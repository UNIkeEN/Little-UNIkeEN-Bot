{"config":{"indexing":"full","lang":["en","ja"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-\\.]+"},"docs":[{"location":"","text":"version 1.0.0 1. \u7b80\u4ecb Little-UNIkeEN-Bot \u662f\u4e00\u4e2a\u7531 Python \u7f16\u5199\u7684\u8f7b\u91cf\u7ea7\u3001\u53ef\u6269\u5c55\u7684QQ\u673a\u5668\u4eba\u524d\u7aef\uff0c\u5e95\u5c42\u57fa\u4e8e go-cqhttp\u3001flask\u3001mysql \u7b49\u7b2c\u4e09\u65b9\u4f9d\u8d56\u3002 2. \u9879\u76ee\u67b6\u6784\u56fe \u7ea2\u6846\u6807\u6ce8\u7684\u662f\u7528\u6237\uff08\u63d2\u4ef6\u5f00\u53d1\u8005\uff09\u9700\u6c42 \u84dd\u7ebf\u6807\u6ce8\u7684\u662f\u9700\u8981\u7528\u6237\u81ea\u884c\u8c03\u7528\u6216\u7f16\u5199\u7684\u903b\u8f91 \u7eff\u7ebf\u6807\u6ce8\u7684\u662fbot\u5c01\u88c5\u597d\u7684\u903b\u8f91 3. \u8fd0\u884c\u6d41\u7a0b\u56fe","title":"Index"},{"location":"#1","text":"Little-UNIkeEN-Bot \u662f\u4e00\u4e2a\u7531 Python \u7f16\u5199\u7684\u8f7b\u91cf\u7ea7\u3001\u53ef\u6269\u5c55\u7684QQ\u673a\u5668\u4eba\u524d\u7aef\uff0c\u5e95\u5c42\u57fa\u4e8e go-cqhttp\u3001flask\u3001mysql \u7b49\u7b2c\u4e09\u65b9\u4f9d\u8d56\u3002","title":"1. \u7b80\u4ecb"},{"location":"#2","text":"\u7ea2\u6846\u6807\u6ce8\u7684\u662f\u7528\u6237\uff08\u63d2\u4ef6\u5f00\u53d1\u8005\uff09\u9700\u6c42 \u84dd\u7ebf\u6807\u6ce8\u7684\u662f\u9700\u8981\u7528\u6237\u81ea\u884c\u8c03\u7528\u6216\u7f16\u5199\u7684\u903b\u8f91 \u7eff\u7ebf\u6807\u6ce8\u7684\u662fbot\u5c01\u88c5\u597d\u7684\u903b\u8f91","title":"2. \u9879\u76ee\u67b6\u6784\u56fe"},{"location":"#3","text":"","title":"3. \u8fd0\u884c\u6d41\u7a0b\u56fe"},{"location":"about/","text":"\u4f5c\u8005\u4ecb\u7ecd UNIkeEN \u8eab\u4efd\uff1aSJTU 21\u7ea7\u672c\u79d1\u751f\uff0c\u7535\u9662 \u804c\u52a1\uff1a\u9879\u76ee\u53d1\u8d77\u4eba\u3001\u4e3b\u8981\u5f00\u53d1\u8005 fangtiancheng \u8eab\u4efd\uff1aSJTU 19\u7ea7\u672c\u79d1\u751f\uff0c\u7535\u9662 \u804c\u52a1\uff1a\u4e3b\u67b6\u6784\u5e08\u3001\u6280\u672f\u987e\u95ee \u5f00\u53d1\u5386\u7a0b 2022\u5e74\u6691\u5047\uff0c\u5468\u56f4\u7684\u670b\u53cb\u53d7\u67d0\u79cd\u98ce\u6c14\u5f71\u54cd\uff0c\u7eb7\u7eb7\u8dd1\u53bb\u5f00\u53d1 QQ \u804a\u5929\u673a\u5668\u4eba\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u4eba\u9009\u62e9 nonebot \u4f5c\u4e3a\u57fa\u7840\u6846\u67b6\u3002\u4f5c\u4e3a\u540e\u6765\u8005\uff0c\u6211\u89c2\u5bdf\u5230\uff1a\u4ed6\u4eec\u5728\u4f7f\u7528 nonebot \u540e\uff0c\u8fd8\u7eb7\u7eb7\u8dd1\u53bb\u770b go-cqhttp \u6587\u6863\uff0c\u751a\u81f3\u6709\u51e0\u4e2a\u62b1\u6028 nonebot \u5c01\u88c5\u592a\u6df1\u3002\u53d7\u6b64\u5f71\u54cd\uff0c\u6211\u4fbf\u6253\u7b97\u53ea\u57fa\u4e8e go-cqhttp \u5f00\u53d1\u4e00\u5957 QQ \u673a\u5668\u4eba\u51fa\u6765\u3002 \u4e00\u4e2a\u6708\u540e\uff0c Little-UNIkeEN-Bot \u5927\u81f4\u6210\u578b\u3002\u6211\u4f5c\u4e3a\u540e\u6765\u8005\uff0c\u5f00\u53d1\u51fa\u7684\u529f\u80fd\u6bd4\u90a3\u51e0\u4e2a\u5148\u5230\u8005\u7684\u8fd8\u8981\u591a\u3002\u56e0\u6b64\uff0c\u6211\u4fbf\u8003\u8651\u5c06\u8fd9\u4e2a\u9879\u76ee\u7ee7\u7eed\u505a\u5927\u3002\u63a5\u4e0b\u6765\u4e00\u4e2a\u6708\uff0c\u6211\u6253\u78e8\u67b6\u6784\u3001\u5f15\u8fdb\u6280\u672f\u3001\u5f00\u53d1\u65b0\u63d2\u4ef6\uff0c\u987a\u5229\u5730\u628a bot \u4fee\u5230\u66f4\u8fdb\u4e00\u6b65\u7684\u9ad8\u5ea6\u3002\u540c\u65f6\uff0c\u6211\u4e5f\u5f00\u59cb\u601d\u8003\u4e00\u4e2a\u54f2\u5b66\u95ee\u9898\uff1a onebot \u662f\u4e00\u4e2a\u597d\u65b9\u6848\u5417\uff1f \u6211\u601d\u8003\u4e86\u597d\u4e45\uff0c\u6700\u540e\u8ba4\u5b9a\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u65b9\u6848\u3002\u539f\u56e0\u5982\u4e0b\uff1a onebot \u534f\u8bae\u4e3b\u6253\u8de8\u5e73\u53f0\uff0c\u76ee\u524d nonebot \u4e5f\u786e\u5b9e\u5b9e\u73b0\u4e86\uff0c\u4f46\u662f\u5e73\u53f0\u4e4b\u95f4\u7684\u5185\u5bb9\u5f02\u8d28\u6027\u662f\u4e2d\u95f4\u5c42\u8f6f\u4ef6\u65e0\u6cd5\u62b9\u5e73\u7684\u3002\u6bd4\u5982 qq \u7684\u8868\u60c5\u3001at\u3001\u6233\u4e00\u6233\uff0c\u5f62\u72b6\u5982 [cq:xxx,id=xxx] \uff1b\u9489\u9489\u7684\u5bcc\u6587\u672c\uff0c\u683c\u5f0f\u66f4\u4e0d\u597d\u63cf\u8ff0\u3002\u5982\u679c\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u62b9\u9664\u5185\u5bb9\u5f02\u8d28\u6027\uff0c\u90a3\u4e48\u625b\u8d77\u8de8\u5e73\u53f0\u5927\u65d7\u7684\u4e2d\u95f4\u5c42\u4e5f\u6ca1\u6709\u751f\u5b58\u7684\u7684\u5fc5\u8981\u4e86\uff1b\u5982\u679c\u4e2d\u95f4\u5c42\u62b9\u9664\u4e86\u5185\u5bb9\u5f02\u8d28\u6027\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u81ea\u5df1\u5236\u5b9a\u5927\u91cf\u6807\u51c6\u3001\u7f16\u5199\u5927\u91cf\u51fd\u6570\u3001\u9891\u7e41\u4fee\u6539\u4ee3\u7801\u5bf9\u63a5\u5e95\u5c42\uff0c\u8fd9\u6837\u505a\u65e2\u4e27\u5931\u4e86\u7248\u672c\u7a33\u5b9a\u6027\uff0c\u66f4\u9700\u8981\u6d88\u8017\u5f00\u53d1\u8005\u5927\u91cf\u7cbe\u529b\u53bb\u5b66\u4e60\u4f60\u81ea\u5df1\u5236\u5b9a\u7684\u63a5\u53e3\uff0c\u6709\u79cd\u201c\u81ea\u5df1\u73a9\u81ea\u5df1\u7684\u201d\u7684\u611f\u89c9\u3002\u66f4\u5931\u671b\u7684\u662f\uff0c\u963f\u91cc\u817e\u8baf\u53ef\u4e0d\u542c\u6211\u4eec\u8fd9\u4e9bbot\u5f00\u53d1\u4eba\u5458\u7684\u547c\u58f0\uff0c\u5f02\u8d28\u6027\u5185\u5bb9\u8fd8\u4f1a\u66f4\u591a\u66f4\u9891\u7e41\u5730\u5728\u672a\u6765\u51fa\u73b0\u3002 nonebot\u662f\u9075\u5b88onebot\u534f\u8bae\u7684\uff0c\u81ea\u7136\u80fd\u770b\u51fa\u5176\u7f3a\u70b9\uff1a\u5c01\u88c5\u6df1\u8981\u6c42\u591a\u3001\u5f00\u53d1\u6210\u672c\u8fc7\u9ad8\u3001\u7248\u672c\u4e0d\u7a33\u5b9a\u3001QQ\u72ec\u7279\u7684\u5185\u5bb9\u4e0d\u80fd\u5b8c\u7f8e\u8868\u8fbe(\u6bd4\u5982\u7cbe\u534e\u6d88\u606f\u7b49).... \u56e0\u6b64\uff0c\u6211\u66f4\u52a0\u575a\u5b9a\u4e86\u63a8\u51fa\u4e00\u5957\u5b8c\u6574\u9879\u76ee\u7684\u51b3\u5fc3\u3002\u6211\u5f00\u59cb\u53ec\u96c6\u5c0f\u4f19\u4f34\u5199\u63d2\u4ef6\u3001\u5199\u6587\u6863\u3001\u6df1\u5ea6\u6253\u78e8\u67b6\u6784.... \u76f4\u5230\uff0c\u6211\u4eec\u9686\u91cd\u63a8\u51fa\u672c\u9879\u76ee\u7684 1.0.0 \u7248\u672c\uff01 \u6211\u4eec\u7684\u4f18\u52bf\u548c\u4e0d\u8db3 nonebot \u662f Little-UNIkeEN-Bot \u7684\u4e3b\u8981\u7ade\u54c1\u4e4b\u4e00\uff0c\u76f8\u6bd4 nonebot \uff0c\u6211\u4eec\u7684\u4f18\u52bf\u6709\uff1a \u6838\u5fc3\u4ee3\u7801\u5c0f\u4e8e 1000 \u884c\uff0c\u67b6\u6784\u7b80\u5355\u3001\u903b\u8f91\u6e05\u6670 \u5728\u7f16\u7a0b\u5c42\u9762\u5c4f\u853d\u591a\u7ebf\u7a0b\uff0c\u6781\u5927\u5730\u51cf\u5c11\u5f00\u53d1\u96be\u5ea6 \u5efa\u8bae\u7528\u6237\u76f4\u63a5\u4e0e qq \u9a71\u52a8\u5bf9\u8bdd\uff0c\u5e95\u5c42\u4e30\u5bcc\u529f\u80fd\u5373\u5b66\u5373\u7528 \u4e0d\u7528\u8de8\u8fc7\u4e2d\u95f4\u5c42\uff0c\u80fd\u76f4\u63a5\u63a5\u53d7 gocq \u7684 dict \u683c\u5f0f\u6d88\u606f\u3001\u4f7f\u7528 python \u5e93\u5b9a\u65f6\u7b49\uff0c\u51cf\u5c11\u5b66\u4e60\u3001\u5f00\u53d1\u6210\u672c \u6d88\u606f\u5c01\u88c5\u7b80\u5355\uff0c\u63d2\u4ef6\u793a\u4f8b\u4e30\u5bcc\uff0c\u529f\u80fd\u8f7b\u677e\u7f16\u5199 \u7ed9\u5185\u5bb9\u751f\u4ea7\u8005\u63d0\u4f9b sql \u5b58\u50a8\u3001PIL \u5149\u6805\u5316\u670d\u52a1\uff0c\u5927\u5927\u589e\u52a0\u751f\u4ea7\u6548\u7387 \u6211\u4eec\u7684\u4e0d\u8db3\u6709\uff1a \u975e\u8de8\u5e73\u53f0\uff0c\u76ee\u524d\u5b98\u65b9\u5e93\u4ec5\u652f\u6301 qq (\u4e0d\u8fc7\u5df2\u7ecf\u6709\u5176\u4ed6\u4f5c\u8005\u5f00\u53d1\u4e86\u5fae\u4fe1\u7248\u672c) \u5728\u5f00\u53d1\u8fdb\u9636\u63d2\u4ef6\u65f6\uff0c\u9700\u8981\u5f00\u53d1\u8005\u989d\u5916\u5b66\u4e60 mysql \u3001\u9605\u8bfb go-cqhttp \u6587\u6863 \u6211\u4eec\u521a\u521a\u5f00\u6e90\uff0c\u793e\u533a\u5efa\u8bbe\u5e76\u4e0d\u5b8c\u5584 \u6211\u4eec\u548c nonebot \u7684\u5dee\u5f02\uff1a \u6211\u4eec\u7684\u5b9a\u4f4d\u662f qq \u673a\u5668\u4eba\u524d\u7aef\uff0cnonebot \u7684\u5b9a\u4f4d\u662f\u591a\u804a\u5929\u8f6f\u4ef6\u4e2d\u95f4\u5c42&\u524d\u7aef nonebot2 \u53cb\u60c5\u94fe\u63a5\uff1a \u6587\u6863 \uff0c \u4ee3\u7801 \u514d\u8d23\u58f0\u660e \u5f00\u6e90\u793e\u533a\u5efa\u8bbe","title":"\u5173\u4e8e\u672c\u9879\u76ee"},{"location":"about/#_1","text":"UNIkeEN \u8eab\u4efd\uff1aSJTU 21\u7ea7\u672c\u79d1\u751f\uff0c\u7535\u9662 \u804c\u52a1\uff1a\u9879\u76ee\u53d1\u8d77\u4eba\u3001\u4e3b\u8981\u5f00\u53d1\u8005 fangtiancheng \u8eab\u4efd\uff1aSJTU 19\u7ea7\u672c\u79d1\u751f\uff0c\u7535\u9662 \u804c\u52a1\uff1a\u4e3b\u67b6\u6784\u5e08\u3001\u6280\u672f\u987e\u95ee","title":"\u4f5c\u8005\u4ecb\u7ecd"},{"location":"about/#_2","text":"2022\u5e74\u6691\u5047\uff0c\u5468\u56f4\u7684\u670b\u53cb\u53d7\u67d0\u79cd\u98ce\u6c14\u5f71\u54cd\uff0c\u7eb7\u7eb7\u8dd1\u53bb\u5f00\u53d1 QQ \u804a\u5929\u673a\u5668\u4eba\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u4eba\u9009\u62e9 nonebot \u4f5c\u4e3a\u57fa\u7840\u6846\u67b6\u3002\u4f5c\u4e3a\u540e\u6765\u8005\uff0c\u6211\u89c2\u5bdf\u5230\uff1a\u4ed6\u4eec\u5728\u4f7f\u7528 nonebot \u540e\uff0c\u8fd8\u7eb7\u7eb7\u8dd1\u53bb\u770b go-cqhttp \u6587\u6863\uff0c\u751a\u81f3\u6709\u51e0\u4e2a\u62b1\u6028 nonebot \u5c01\u88c5\u592a\u6df1\u3002\u53d7\u6b64\u5f71\u54cd\uff0c\u6211\u4fbf\u6253\u7b97\u53ea\u57fa\u4e8e go-cqhttp \u5f00\u53d1\u4e00\u5957 QQ \u673a\u5668\u4eba\u51fa\u6765\u3002 \u4e00\u4e2a\u6708\u540e\uff0c Little-UNIkeEN-Bot \u5927\u81f4\u6210\u578b\u3002\u6211\u4f5c\u4e3a\u540e\u6765\u8005\uff0c\u5f00\u53d1\u51fa\u7684\u529f\u80fd\u6bd4\u90a3\u51e0\u4e2a\u5148\u5230\u8005\u7684\u8fd8\u8981\u591a\u3002\u56e0\u6b64\uff0c\u6211\u4fbf\u8003\u8651\u5c06\u8fd9\u4e2a\u9879\u76ee\u7ee7\u7eed\u505a\u5927\u3002\u63a5\u4e0b\u6765\u4e00\u4e2a\u6708\uff0c\u6211\u6253\u78e8\u67b6\u6784\u3001\u5f15\u8fdb\u6280\u672f\u3001\u5f00\u53d1\u65b0\u63d2\u4ef6\uff0c\u987a\u5229\u5730\u628a bot \u4fee\u5230\u66f4\u8fdb\u4e00\u6b65\u7684\u9ad8\u5ea6\u3002\u540c\u65f6\uff0c\u6211\u4e5f\u5f00\u59cb\u601d\u8003\u4e00\u4e2a\u54f2\u5b66\u95ee\u9898\uff1a onebot \u662f\u4e00\u4e2a\u597d\u65b9\u6848\u5417\uff1f \u6211\u601d\u8003\u4e86\u597d\u4e45\uff0c\u6700\u540e\u8ba4\u5b9a\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u65b9\u6848\u3002\u539f\u56e0\u5982\u4e0b\uff1a onebot \u534f\u8bae\u4e3b\u6253\u8de8\u5e73\u53f0\uff0c\u76ee\u524d nonebot \u4e5f\u786e\u5b9e\u5b9e\u73b0\u4e86\uff0c\u4f46\u662f\u5e73\u53f0\u4e4b\u95f4\u7684\u5185\u5bb9\u5f02\u8d28\u6027\u662f\u4e2d\u95f4\u5c42\u8f6f\u4ef6\u65e0\u6cd5\u62b9\u5e73\u7684\u3002\u6bd4\u5982 qq \u7684\u8868\u60c5\u3001at\u3001\u6233\u4e00\u6233\uff0c\u5f62\u72b6\u5982 [cq:xxx,id=xxx] \uff1b\u9489\u9489\u7684\u5bcc\u6587\u672c\uff0c\u683c\u5f0f\u66f4\u4e0d\u597d\u63cf\u8ff0\u3002\u5982\u679c\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u62b9\u9664\u5185\u5bb9\u5f02\u8d28\u6027\uff0c\u90a3\u4e48\u625b\u8d77\u8de8\u5e73\u53f0\u5927\u65d7\u7684\u4e2d\u95f4\u5c42\u4e5f\u6ca1\u6709\u751f\u5b58\u7684\u7684\u5fc5\u8981\u4e86\uff1b\u5982\u679c\u4e2d\u95f4\u5c42\u62b9\u9664\u4e86\u5185\u5bb9\u5f02\u8d28\u6027\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u81ea\u5df1\u5236\u5b9a\u5927\u91cf\u6807\u51c6\u3001\u7f16\u5199\u5927\u91cf\u51fd\u6570\u3001\u9891\u7e41\u4fee\u6539\u4ee3\u7801\u5bf9\u63a5\u5e95\u5c42\uff0c\u8fd9\u6837\u505a\u65e2\u4e27\u5931\u4e86\u7248\u672c\u7a33\u5b9a\u6027\uff0c\u66f4\u9700\u8981\u6d88\u8017\u5f00\u53d1\u8005\u5927\u91cf\u7cbe\u529b\u53bb\u5b66\u4e60\u4f60\u81ea\u5df1\u5236\u5b9a\u7684\u63a5\u53e3\uff0c\u6709\u79cd\u201c\u81ea\u5df1\u73a9\u81ea\u5df1\u7684\u201d\u7684\u611f\u89c9\u3002\u66f4\u5931\u671b\u7684\u662f\uff0c\u963f\u91cc\u817e\u8baf\u53ef\u4e0d\u542c\u6211\u4eec\u8fd9\u4e9bbot\u5f00\u53d1\u4eba\u5458\u7684\u547c\u58f0\uff0c\u5f02\u8d28\u6027\u5185\u5bb9\u8fd8\u4f1a\u66f4\u591a\u66f4\u9891\u7e41\u5730\u5728\u672a\u6765\u51fa\u73b0\u3002 nonebot\u662f\u9075\u5b88onebot\u534f\u8bae\u7684\uff0c\u81ea\u7136\u80fd\u770b\u51fa\u5176\u7f3a\u70b9\uff1a\u5c01\u88c5\u6df1\u8981\u6c42\u591a\u3001\u5f00\u53d1\u6210\u672c\u8fc7\u9ad8\u3001\u7248\u672c\u4e0d\u7a33\u5b9a\u3001QQ\u72ec\u7279\u7684\u5185\u5bb9\u4e0d\u80fd\u5b8c\u7f8e\u8868\u8fbe(\u6bd4\u5982\u7cbe\u534e\u6d88\u606f\u7b49).... \u56e0\u6b64\uff0c\u6211\u66f4\u52a0\u575a\u5b9a\u4e86\u63a8\u51fa\u4e00\u5957\u5b8c\u6574\u9879\u76ee\u7684\u51b3\u5fc3\u3002\u6211\u5f00\u59cb\u53ec\u96c6\u5c0f\u4f19\u4f34\u5199\u63d2\u4ef6\u3001\u5199\u6587\u6863\u3001\u6df1\u5ea6\u6253\u78e8\u67b6\u6784.... \u76f4\u5230\uff0c\u6211\u4eec\u9686\u91cd\u63a8\u51fa\u672c\u9879\u76ee\u7684 1.0.0 \u7248\u672c\uff01","title":"\u5f00\u53d1\u5386\u7a0b"},{"location":"about/#_3","text":"nonebot \u662f Little-UNIkeEN-Bot \u7684\u4e3b\u8981\u7ade\u54c1\u4e4b\u4e00\uff0c\u76f8\u6bd4 nonebot \uff0c\u6211\u4eec\u7684\u4f18\u52bf\u6709\uff1a \u6838\u5fc3\u4ee3\u7801\u5c0f\u4e8e 1000 \u884c\uff0c\u67b6\u6784\u7b80\u5355\u3001\u903b\u8f91\u6e05\u6670 \u5728\u7f16\u7a0b\u5c42\u9762\u5c4f\u853d\u591a\u7ebf\u7a0b\uff0c\u6781\u5927\u5730\u51cf\u5c11\u5f00\u53d1\u96be\u5ea6 \u5efa\u8bae\u7528\u6237\u76f4\u63a5\u4e0e qq \u9a71\u52a8\u5bf9\u8bdd\uff0c\u5e95\u5c42\u4e30\u5bcc\u529f\u80fd\u5373\u5b66\u5373\u7528 \u4e0d\u7528\u8de8\u8fc7\u4e2d\u95f4\u5c42\uff0c\u80fd\u76f4\u63a5\u63a5\u53d7 gocq \u7684 dict \u683c\u5f0f\u6d88\u606f\u3001\u4f7f\u7528 python \u5e93\u5b9a\u65f6\u7b49\uff0c\u51cf\u5c11\u5b66\u4e60\u3001\u5f00\u53d1\u6210\u672c \u6d88\u606f\u5c01\u88c5\u7b80\u5355\uff0c\u63d2\u4ef6\u793a\u4f8b\u4e30\u5bcc\uff0c\u529f\u80fd\u8f7b\u677e\u7f16\u5199 \u7ed9\u5185\u5bb9\u751f\u4ea7\u8005\u63d0\u4f9b sql \u5b58\u50a8\u3001PIL \u5149\u6805\u5316\u670d\u52a1\uff0c\u5927\u5927\u589e\u52a0\u751f\u4ea7\u6548\u7387 \u6211\u4eec\u7684\u4e0d\u8db3\u6709\uff1a \u975e\u8de8\u5e73\u53f0\uff0c\u76ee\u524d\u5b98\u65b9\u5e93\u4ec5\u652f\u6301 qq (\u4e0d\u8fc7\u5df2\u7ecf\u6709\u5176\u4ed6\u4f5c\u8005\u5f00\u53d1\u4e86\u5fae\u4fe1\u7248\u672c) \u5728\u5f00\u53d1\u8fdb\u9636\u63d2\u4ef6\u65f6\uff0c\u9700\u8981\u5f00\u53d1\u8005\u989d\u5916\u5b66\u4e60 mysql \u3001\u9605\u8bfb go-cqhttp \u6587\u6863 \u6211\u4eec\u521a\u521a\u5f00\u6e90\uff0c\u793e\u533a\u5efa\u8bbe\u5e76\u4e0d\u5b8c\u5584 \u6211\u4eec\u548c nonebot \u7684\u5dee\u5f02\uff1a \u6211\u4eec\u7684\u5b9a\u4f4d\u662f qq \u673a\u5668\u4eba\u524d\u7aef\uff0cnonebot \u7684\u5b9a\u4f4d\u662f\u591a\u804a\u5929\u8f6f\u4ef6\u4e2d\u95f4\u5c42&\u524d\u7aef nonebot2 \u53cb\u60c5\u94fe\u63a5\uff1a \u6587\u6863 \uff0c \u4ee3\u7801","title":"\u6211\u4eec\u7684\u4f18\u52bf\u548c\u4e0d\u8db3"},{"location":"about/#_4","text":"","title":"\u514d\u8d23\u58f0\u660e"},{"location":"about/#_5","text":"","title":"\u5f00\u6e90\u793e\u533a\u5efa\u8bbe"},{"location":"license/","text":"MIT\u8bb8\u53ef Copyright (C) 2022 UNIkeEN Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"\u6388\u6743\u8bb8\u53ef"},{"location":"test/","text":"FPS-AI-Aiming \u7ec4\u5458\uff1a\u5b59\u745c\u6770\u3001\u6731\u70e8\u3001\u5f6d\u68a6\u9f99 \u6982\u8981 \u672c\u7a0b\u5e8f\u4e3aSJTU AI001\u8bfe\u7a0b\u5c0f\u7ec4\u4f5c\u4e1a\uff0c\u4ec5\u4f9b\u6280\u672f\u9a8c\u8bc1\uff0c\u4e0d\u7528\u4e8e\u5b9e\u9645\u6e38\u620f\u4f5c\u5f0a \u200b \u672c\u7a0b\u5e8f\u57fa\u4e8epytorch\u6846\u67b6\u4e0eyolov5\u7269\u4f53\u68c0\u6d4b\u5e73\u53f0\uff0c\u5b9e\u73b0\u4e86\u4eba\u5de5\u667a\u80fd\u5bf9FPS\uff08\u7b2c\u4e00\u4eba\u79f0\u5c04\u51fb\uff09\u6e38\u620f\u7684\u8f85\u52a9\u7784\u51c6\u3002\u4e0e\u4f20\u7edf\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u4e0d\u540c\uff0c\u672c\u7a0b\u5e8f\u4e0d\u8bfb\u53d6\u6216\u6539\u52a8\u6e38\u620f\u7684\u5185\u5b58\u6570\u636e\uff0c\u800c\u662f\u901a\u8fc7\u4eba\u5de5\u667a\u80fd\u5b9e\u65f6\u5206\u6790\u6e38\u620f\u753b\u9762\u3001\u786e\u5b9a\u654c\u4eba\u4f4d\u7f6e\u5e76\u79fb\u52a8\u9f20\u6807\u5c04\u51fb\uff0c\u53cd\u5e94\u6d41\u7a0b\u4e0e\u4eba\u8111\u76f8\u540c\uff0c\u96be\u4ee5\u88ab\u666e\u901a\u53cd\u4f5c\u5f0a\u65b9\u5f0f\u68c0\u6d4b\u3002\u672c\u7a0b\u5e8f\u7684\u7279\u70b9\u6709\uff1a \u5355\u6b21\u8bc6\u522b\u8fc7\u7a0b\u7ecf\u8fc7\u53cd\u590d\u4f18\u5316\uff0c\u5728RTX30\u7cfb\u663e\u5361\u4e0b\u5355\u6b21\u65f6\u5ef6$\\leq 0.1s$\u200b \u524d\u540e\u7aef\u5206\u79bb\uff0c\u524d\u7aef\u542f\u52a8\u5668UI\u754c\u9762\u73b0\u4ee3\u5316\u3001\u6241\u5e73\u5316\uff0c\u63d0\u4f9b\u53c2\u6570\u8c03\u8282\u529f\u80fd\u5e76\u4e0e\u540e\u7aef\u901a\u8fc7json\u53c2\u6570\u5171\u4eab \u8bbe\u8ba1\u6f14\u793a\u6a21\u5f0f\uff0c\u5b9e\u65f6\u5c55\u73b0AI\u7684\u8bc6\u522b\u8fc7\u7a0b \u8bbe\u8ba1\u9759\u6001\u548c\u52a8\u6001\u6a21\u5f0f\uff0c\u5728\u654c\u4eba\u9759\u6001\u548c\u8fd1\u5300\u901f\u8fd0\u52a8\u65f6\u6709\u53ef\u89c2\u7684\u5c04\u51fb\u7cbe\u51c6\u5ea6 \u9002\u914d\u591a\u6b3e\u5c04\u51fb\u6e38\u620f\uff0c\u5bf9CS:GO\uff08\u300a\u53cd\u6050\u7cbe\u82f1:\u5168\u7403\u653b\u52bf\u300b\uff09\u5355\u72ec\u4f18\u5316\uff0c\u8003\u8651\u5230\u9f20\u6807\u52a0\u901f\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u8bbe\u7f6e\u5bf9\u7a0b\u5e8f\u53c2\u6570\u7684\u5f71\u54cd \u200b \u4ece\u672c\u6b21\u6280\u672f\u9a8c\u8bc1\u4e2d\uff0c\u6211\u4eec\u6df1\u523b\u610f\u8bc6\u5230\u6e38\u620f\u516c\u53f8\u5bf9\u4ee5\u4eba\u5de5\u667a\u80fdCV\u8bc6\u522b\u4e3a\u539f\u7406\u7684\u65b0\u578b\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u9632\u4e0d\u80dc\u9632\uff0c\u4f46AI\u4e3a\u7f29\u5c0f\u5ef6\u8fdf\uff0c\u4e00\u822c\u5c06\u79fb\u52a8\u9f20\u6807\u7684\u8fc7\u7a0b\u5c3d\u91cf\u7f29\u77ed\uff0c\u4e14\u6a21\u62df\u9f20\u6807\u79fb\u52a8\u65b9\u5f0f\u4e0e\u4eba\u5de5\u5b58\u5728\u5dee\u5f02\u3002\u901a\u8fc7\u5b9e\u65f6\u8bb0\u5f55\u9f20\u6807\u79fb\u52a8\u3001\u7ed3\u5408\u7528\u6237\u4e3e\u62a5\uff0c\u672a\u6765\u6216\u8bb8\u53ef\u4ee5\u8bad\u7ec3\u51fa\u5408\u9002\u7684\u795e\u7ecf\u7f51\u7edc\u68c0\u6d4b\u8fd9\u4e00\u65b0\u578b\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u610f\u8bc6\u5230\u6b64\u7c7b\u6280\u672f\u6216\u8bb8\u53ef\u4ee5\u8fd0\u7528\u4e8e\u672a\u6765\u6218\u573a\u3002 \u76ee\u5f55 FPS-AI-Aiming \u6982\u8981 \u76ee\u5f55 \u5c0f\u7ec4\u5206\u5de5 \u5b59\u745c\u6770 \u6731\u70e8 \u5f6d\u68a6\u9f99 \u7a0b\u5e8f\u67b6\u6784 \u529f\u80fd\u5b9e\u73b0\u4e0e\u6280\u672f\u65b9\u6848 \u524d\u7aef\u542f\u52a8\u5668 \u540e\u7aef\u811a\u672c \u6280\u672f\u96be\u70b9 1.Python\u7684tkinter\u6807\u51c6GUI\u5e93\u8bbe\u8ba1\u98ce\u683c\u8001\u65e7 2.\u524d\u540e\u7aef\u4f20\u9012\u53c2\u6570\u95ee\u9898 3.\u5355\u6b21\u7784\u51c6\u65f6\u95f4\u5ef6\u8fdf\u9ad8 4.\u9884\u8bad\u7ec3\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u77e9\u5f62\u6846 5.CS:GO\u9f20\u6807\u504f\u79fb\u95ee\u9898 \u5f00\u53d1\u65e5\u5fd7 \u524d\u7aef\u542f\u52a8\u5668 0.3.6 - 7-16-10:08 0.3.5 - 7-14-19:54 0.3.3 - 7-14-15:37 0.3.1 - 7-14-14:30 0.3.0 - 7-13-22:51 0.2.0 - 7-13-11:23 \u540e\u7aef\u811a\u672c 0.3.3 - 7.15-19:32 0.3.2 - 7.14-23:11 0.3.1 - 7.14-18:00 0.3.0 - 7.14-00:56 0.2.0 - 7.13-12:32 0.1.5 - 7.12-21:48 0.1.0 - 7.12-11:14 \u9644\u5f55 \u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93 \u5c0f\u7ec4\u5206\u5de5 \u5b59\u745c\u6770 \u4e3b\u4f53\u8d1f\u8d23\u524d\u7aef\u542f\u52a8\u5668\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3 \u53c2\u4e0e\u4e86\u540e\u7aef\u811a\u672c\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\uff0c\u5b8c\u6210\u4e86\u6700\u521d\u7248\u672c\u7684\u6f14\u793a\u7a97\u53e3\u4ee3\u7801\uff0c\u63d0\u4f9b\u6a21\u578b\u4f18\u5316\u3001\u83b7\u53d6\u771f\u5b9e\u5206\u8fa8\u7387\u7b49\u601d\u8def \u901a\u8fc7\u5b9e\u9a8c\u5f97\u51fa\u6e38\u620f\u4e2d\u9f20\u6807\u7075\u654f\u5ea6\u4e0e\u7a0b\u5e8f\u53c2\u6570\u7684\u5173\u7cfb \u64b0\u5199\u4e86\u5f00\u53d1\u65e5\u5fd7\uff08\u672c\u6587\u6863\uff09 \u6731\u70e8 \u4e3b\u4f53\u8d1f\u8d23\u540e\u7aef\u811a\u672c\u3001\u6f14\u793a\u6a21\u5f0f\u7a97\u53e3\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\u3002\u5b9e\u73b0\u540e\u7aef\u4e0eCS:GO\u6e38\u620f\u5ba2\u6237\u7aef\u7684\u4ea4\u4e92 \u53c2\u4e0e\u4e86\u524d\u7aef\u542f\u52a8\u5668\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\uff0c\u63d0\u4f9b\u4e86\u53c2\u6570\u8bbe\u8ba1\u3001\u524d\u540e\u7aef\u4fe1\u606f\u4f20\u9012\u7b49\u601d\u8def \u901a\u8fc7\u5b9e\u9a8c\u5f97\u51fa\u6e38\u620f\u4e2d\u9f20\u6807\u7075\u654f\u5ea6\u4e0e\u7a0b\u5e8f\u53c2\u6570\u7684\u5173\u7cfb \u5f55\u5236\u4e86\u6f14\u793a\u89c6\u9891 \u5f6d\u68a6\u9f99 \u6253\u6807\u5236\u4f5c\u8bad\u7ec3\u6570\u636e\u96c6\uff08\u7531\u4e8e\u8bad\u7ec3\u540e\u6a21\u578b\u7684\u901f\u5ea6\u548c\u7cbe\u5ea6\u95ee\u9898\u6700\u7ec8\u9009\u62e9\u4f7f\u7528 yolov5n \uff09 \u5728Apex Legends\u548cCS1.6\u6e38\u620f\u4e0a\u6d4b\u8bd5\u7a0b\u5e8f\u5e76\u5f97\u51fa\u4e86\u5bf9\u4e0d\u540c\u6e38\u620f\u9002\u914d\u7684\u601d\u8def\uff0c\u5728CS1.6\u548cApex\u4e0a\u4e5f\u5b9e\u73b0\u4e86\u8f83\u53ef\u89c2\u7684\u7cbe\u5ea6 \u5236\u4f5c\u4e86\u6c47\u62a5PPT\u3001\u672c\u6587\u6863\u4e2d\u7684\u6d41\u7a0b\u56fe \u7a0b\u5e8f\u67b6\u6784 \u7a0b\u5e8f\u4e2d\u7531\u7ec4\u5458\u539f\u521b\u7684\u4e3b\u8981\u4ee3\u7801\u6587\u4ef6\u6709\uff1a launcher.py \u524d\u7aef\u542f\u52a8\u5668\uff0c\u4e0e\u7528\u6237\u63d0\u4f9b\u4ea4\u4e92\u3002\u7528\u6237\u53ef\u8bbe\u7f6e\u542f\u52a8\u53c2\u6570\u5e76\u8fd0\u884c \\bin\\ai.py \u540e\u7aef\u4e3b\u7a0b\u5e8f\uff0c\u6355\u6349\u6e38\u620f\u753b\u9762\u3001\u8c03\u7528API\u8bc6\u522b\u4eba\u7269\u3001\u8ba1\u7b97\u5c04\u51fb\u4f4d\u7f6e\u5e76\u6a21\u62df\u79fb\u52a8\u9f20\u6807 \\bin\\demo.py \u6f14\u793a\u6a21\u5f0f\u524d\u53f0\u7f6e\u9876\u5c0f\u7a97\uff0c\u5c55\u793a\u8bc6\u522b\u8fc7\u7a0b \\bin\\asr_switch.py \u7528\u4e8e\u8bed\u97f3\u8bc6\u522b\u5173\u95ed\u540e\u7aef\uff08\u5f85\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff09 \u7a0b\u5e8f\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7528\u4e8e\u6d4b\u8bd5\u6027\u80fd\u548c\u53c2\u6570\u7684\u4ee3\u7801\u6587\u4ef6\u6709\uff1a \\bin\\tune.py \u7528\u4e8e\u6d4b\u8bd5CS:GO\uff08\u300a\u53cd\u6050\u7cbe\u82f1:\u5168\u7403\u653b\u52bf\u300b\uff09\u9f20\u6807\u52a0\u901f\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u8bbe\u7f6e\u5bf9\u7a0b\u5e8f\u53c2\u6570\u7684\u5f71\u54cd \u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u6a21\u578b\u5e73\u53f0\u6709\uff1a \\bin\\ultralytics\\yolov5\\ \u8c03\u7528\u7684\u7269\u4f53\u68c0\u6d4b\u5e73\u53f0\uff0c\u57fa\u4e8etorch [Console-Running-Directory]\\yolov5n.pt \u9884\u8bad\u7ec3\u6a21\u578b\u4f4d\u4e8e\u8fd0\u884c\u811a\u672c\u7684\u547d\u4ee4\u884ccd\u76ee\u5f55\uff08\u82e5\u65e0\u5219\u81ea\u52a8\u4e0b\u8f7d\uff09 \\bin\\audio.py \u8bfe\u7a0b\u63d0\u4f9b\u5e93\uff08\u6765\u81ea sjtu.audio \uff09 \u529f\u80fd\u5b9e\u73b0\u4e0e\u6280\u672f\u65b9\u6848 \u7a0b\u5e8f\u8fd0\u884c\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a \u6ce8\uff1a\u9700\u4f7f\u7528 launcher.py \u542f\u52a8\u7a0b\u5e8f\uff0c\u82e5\u76f4\u63a5\u542f\u52a8 \\bin\\ai.py \u4f1a\u81ea\u52a8\u5173\u95ed\u3002 \u524d\u7aef\u542f\u52a8\u5668 \u524d\u7aef\u754c\u9762\u4e2d\u7684\u5404\u7ec4\u4ef6\u4f7f\u7528\u5747\u57fa\u4e8e tkinter \u7684 ttkbootstrap \u5e93\u6784\u5efa\u3002 \u6bcf\u884c\u4e3a\u4e00\u7ec4\u53c2\u6570\u7684\u9009\u62e9\uff0c\u8bbe\u8ba1\u4e0a\u501f\u9274\u4e86pytorch\u548copenVINO\u4e0b\u8f7d\u754c\u9762\u7684\u98ce\u683c\uff0c\u5e03\u5c40\u4e0a\u4f7f\u7528\u591a\u91cd ttk.Frame \u5d4c\u5957 ttk.RatioButton \u5b9e\u73b0\u3002\u540c\u65f6\uff0c\u6839\u636e\u4e0d\u540c\u7684\u53c2\u6570\u9009\u62e9\u4f1a\u63d0\u4f9b\u4e0d\u540c\u7684\u63d0\u793a\uff08\u5982\u6a21\u578b\u9009\u62e9\u8f83\u5c0f\u7684 yolov5n \uff0c\u663e\u793a\u201c\u6240\u6709\u8bbe\u5907\u5747\u63a8\u8350\u4f7f\u7528\u201d\uff0c\u9009\u62e9\u8f83\u6df1\u5c42\u7684 yolov5m \uff0c\u663e\u793a\u201c\u63a8\u8350\u5728RTX3080\u53ca\u4ee5\u4e0a\u663e\u5361\u4f7f\u7528\uff09\u3002 \u9009\u62e9\u76ee\u6807\u6e38\u620f\u4e3aCS:GO\u65f6\u4f1a\u663e\u793a\u9f20\u6807\u7075\u654f\u5ea6\u7684\u8c03\u8282\u6761\uff08\u4f7f\u7528 ttk.Scale \u5b9e\u73b0\uff09\uff0c\u8fd0\u884c\u540e\u53c2\u6570\u88ab\u4fdd\u5b58\u81f3 \\\\bin\\running_status.json \u4e2d\uff0c\u53ef\u4f9b\u4e0b\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u8bfb\u53d6\uff0c\u7701\u53bb\u4e86\u6bcf\u6b21\u8bbe\u7f6e\u7684\u9ebb\u70e6\u3002\u540c\u65f6\u4f7f\u7528 try...except \u8bed\u53e5\u907f\u514d\u7b2c\u4e00\u6b21\u8fd0\u884cjson\u6587\u4ef6\u4e0d\u5b58\u5728\u5f15\u53d1\u62a5\u9519\u3002 \u70b9\u51fb\u8fd0\u884c\u6309\u94ae\u540e\uff0c\u5f39\u7a97\u63d0\u793a\u4f7f\u7528\u8bf4\u660e\u3002\u5e76\u6839\u636e\u53c2\u6570\u6267\u884c \\bin\\ai.py \u548c \\bin\\demo.py \uff0c\u8fd0\u884c\u6309\u94ae\u540c\u65f6\u53d8\u4e3a\u5173\u95ed\u6309\u94ae\uff0c\u7528\u4e8e\u5173\u95ed\u540e\u7aef\u811a\u672c\u3002\u8fd0\u884c\u72b6\u6001\u4e0b\uff0c\u7a97\u53e3\u6807\u9898\u4e5f\u53d1\u751f\u6539\u53d8\u3002 \u540e\u7aef\u811a\u672c \u4ece \\\\bin\\running_status.json \u8bfb\u53d6\u542f\u52a8\u5668\u4e2d\u7528\u6237\u5b9a\u4e49\u7684\u53c2\u6570 \u4f7f\u7528 win32gui \u3001 screenindo \u3001 PyQt5 \u5e93\u5b9e\u73b0\u81ea\u52a8\u83b7\u53d6\u7cfb\u7edf\u539f\u59cb\u5206\u8fa8\u7387\u4e0e\u5bf9\u6307\u5b9a\u6e38\u620f\u7a97\u53e3\u7684\u622a\u5c4f\uff0c\u5e76\u5b9a\u4e49\u4e86 QImageToCvMat() \u51fd\u6570\u5c06\u6355\u6349\u5230\u7684\u5c4f\u5e55\u622a\u56fe\u8f6c\u6362\u683c\u5f0f\u3002\u5728 demo \u6a21\u5f0f\u4e0b\u4f7f\u7528 opencv \u5e93\u76f8\u5173\u51fd\u6570\u7ed8\u5236\u4eba\u7269\u4f4d\u7f6e\u3001\u5934\u90e8\u4f4d\u7f6e\u5e76\u5f39\u7a97\u5c55\u793a\u3002 \u4f7f\u7528 keyboard \u5e93\u7684 keyboard.hook() \u51fd\u6570\u5bf9\u952e\u76d8\u4e8b\u4ef6\u5b9e\u65bd\u76d1\u542c\uff0c\u5f53\u7528\u6237\u6309\u4e0b x \u952e\u65f6\u542f\u52a8\u540e\u7eed\u6d41\u7a0b \u901a\u8fc7 torch.hub.load() \u51fd\u6570\u8c03\u7528 yolov5 \u5e93\u7684API\u6355\u6349\u4eba\u7269\u4f4d\u7f6e\uff0c\u9009\u53d6\u7f6e\u4fe1\u5ea6\u8f83\u9ad8\u3001\u79bb\u51c6\u661f\u6700\u8fd1\u7684\u8bc6\u522b\u76ee\u6807\uff0c\u901a\u8fc7 calc_head() \u8ba1\u7b97\u5934\u90e8\u4f4d\u7f6e\u3002\u8fd0\u52a8\u6a21\u5f0f\u4e0b\u5355\u6b21\u6309\u4e0b x \u91cd\u590d\u4e0a\u8ff0\u6d41\u7a0b\u4e24\u6b21\uff0c\u8ba1\u7b97\u654c\u65b9\u8fd0\u52a8\u901f\u5ea6\u3001\u6839\u636e\u5b9e\u6d4b\u7684\u8bc6\u522b\u65f6\u95f4\u52a0\u4ee5\u8fd0\u52a8\u8865\u507f\u3002 \u5b9a\u4f4d\u5230\u5c04\u51fb\u4f4d\u7f6e\u540e\u4f7f\u7528 pydirectinput.moveTo() \u4e0e pydirectinput.click() \u51fd\u6570\u79fb\u52a8\u9f20\u6807\u5e76\u6a21\u62df\u5c04\u51fb\u3002\u5bf9CS:GO\u91c7\u53d6\u7279\u6b8a\u4f18\u5316\uff0c\u901a\u8fc7\u524d\u7aef\u4f20\u5165\u7684\u9f20\u6807\u7075\u654f\u5ea6\u8ba1\u7b97\u79fb\u52a8\u901f\u5ea6\u7684\u500d\u7387 tune \u6280\u672f\u96be\u70b9 1.Python\u7684tkinter\u6807\u51c6GUI\u5e93\u8bbe\u8ba1\u98ce\u683c\u8001\u65e7 \u89e3\u51b3\uff1a\u4f7f\u7528 ttkbootstrap \u5e93\u5b9e\u73b0\u4e86\u7f8e\u5316\u3002 2.\u524d\u540e\u7aef\u4f20\u9012\u53c2\u6570\u95ee\u9898 \u901a\u8fc7 import \u8c03\u7528\u51fd\u6570\u7684\u65b9\u5f0f\u96be\u4ee5\u8c03\u548c\u524d\u540e\u7aef\u591a\u4e2a\u5faa\u73af\u6267\u884c\u7684 loop \u51b2\u7a81\u4e0e\u963b\u585e \u89e3\u51b3\uff1a \u524d\u540e\u7aef\u5b8c\u5168\u5206\u79bb \uff0c\u524d\u7aef\u901a\u8fc7 start pythonw \u4ee5\u72ec\u7acb\u8fdb\u7a0b\u3001\u9690\u85cf\u7ec8\u7aef\u7684\u65b9\u5f0f\u6253\u5f00\u540e\u7aef\u811a\u672c\uff0c\u901a\u8fc7json\u6587\u4ef6\u4f20\u9012\u3001\u4fdd\u5b58\u53c2\u6570\u5e76\u5173\u95ed\u540e\u7aef\u811a\u672c\u3002 3.\u5355\u6b21\u7784\u51c6\u65f6\u95f4\u5ef6\u8fdf\u9ad8 \u6700\u65e9\u7248\u672c\u7684\u5355\u6b21\u7784\u51c6\u9700\u8981\u82b1\u8d390.4-0.5\u79d2\uff0c\u8fd9\u4e48\u9ad8\u7684\u5ef6\u8fdf\u5728\u7d27\u5f20\u7684\u5c04\u51fb\u6e38\u620f\u4e2d\u6beb\u65e0\u4f5c\u7528\uff0c\u5e94\u5bf9\u79fb\u52a8\u654c\u4eba\u7cbe\u51c6\u5ea6\u5dee\u3002\u6700\u540e\u6211\u4eec\u5c06\u901f\u5ea6\u4f18\u5316\u81f3\u5728RTX30\u7cfb\u663e\u5361\uff08RTX3070 6M\uff09\u4e0b\u5355\u6b21\u65f6\u5ef6\u7ea60.09\u79d2\uff0c\u5728\u96c6\u6210\u663e\u5361\uff08AMD R7-5800H \u79fb\u52a8\u7aefVega Graphics\uff09\u4e0b\u5355\u6b21\u65f6\u5ef6\u5c0f\u4e8e0.2\u79d2\uff09 \u89e3\u51b3\uff1a\u6211\u4eec\u5bf9\u4ece\u622a\u56fe\u3001\u8bc6\u522b\u5230\u6a21\u62df\u9f20\u6807\u79fb\u52a8\u7684 \u591a\u4e2a\u73af\u8282\u90fd\u8fdb\u884c\u4e86\u53cd\u590d\u7684\u8fed\u4ee3\u4f18\u5316 \u6d4b\u8bd55\u79cd\u622a\u56fe\u65b9\u5f0f\uff0c\u6700\u7ec8\u9009\u62e9\u4e86\u6700\u5feb\u7684 PyQt5 \u5e93\u51fd\u6570\uff0c\u622a\u5c4f\u90e8\u5206\u6700\u7ec8\u8017\u65f6\u5c0f\u4e8e0.02\u79d2\u3002 \u6d4b\u8bd5\u591a\u79cd\u6a21\u578b\uff0c\u6700\u7ec8\u9009\u62e9 yolov5n \u548c yolov5s \u6a21\u578b\u4f5c\u4e3a\u4e3b\u529b\uff08\u7528\u6237\u53ef\u4ee5\u5728\u542f\u52a8\u5668\u9009\u62e9\uff09\uff0c\u5e76\u5c06\u6a21\u578b\u4ece cpu-only \u8fc1\u79fb\u81f3 cuda \uff08GPU\uff09\uff0c\u8bc6\u522b\u6a21\u578b\u90e8\u5206\u6700\u7ec8\u8017\u65f6\u5c0f\u4e8e0.06\u79d2\uff08 yolov5n \uff0c\u72ec\u663e\uff09\u30010.12\u79d2\uff08 yolov5n \uff0c\u6838\u663e\uff09 \u7814\u7a76 pydirectinput \u7684\u5e93\u51fd\u6570\u4ee3\u7801\uff0c\u4fdd\u8bc1\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u6539\u52a8\uff0c\u4f7f\u9f20\u6807\u79fb\u52a8\u90e8\u5206\u8017\u65f6\u5c0f\u4e8e0.005\u79d2\uff0c\u51e0\u4e4e\u5ffd\u7565\u4e0d\u8ba1\u3002 \u591a\u6b21\u4f18\u5316\u4e86\u8ba1\u7b97\u6700\u4f73\u5c04\u51fb\u4f4d\u7f6e\u7684\u51fd\u6570 aim() \u548c calc_head() \uff0c\u786e\u7acb\u76ee\u6807\u90e8\u5206\u8017\u65f6\u6700\u7ec8\u5c0f\u4e8e0.008\u79d2\uff0c\u51e0\u4e4e\u5ffd\u7565\u4e0d\u8ba1\u3002 4.\u9884\u8bad\u7ec3\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u77e9\u5f62\u6846 \u8003\u8651\u5230\u5b9e\u65f6\u6e38\u620f\u4e0b\u7684\u6027\u80fd\u5f71\u54cd\u548c\u901f\u5ea6\u9700\u6c42\uff0c\u4f7f\u7528\u7684\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u8bc6\u522b\u7684\u77e9\u5f62\u6846 \u89e3\u51b3\uff1a \u81ea\u884c\u8bbe\u8ba1\u4e86\u901a\u8fc7\u77e9\u5f62\u6846\u8ba1\u7b97\u4eba\u7269\u5934\u90e8\u4f4d\u7f6e\u7684\u51fd\u6570 \uff0c\u786e\u5b9a\u5934\u90e8\u5927\u81f4\u4f4d\u7f6e\u5e76\u7784\u51c6\u3002\u6839\u636e\u6e38\u620f\u8fd0\u884c\u65f6\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\uff0c\u6700\u7ec8\u5c04\u51fb\u7cbe\u786e\u5ea6\u5341\u5206\u53ef\u89c2 5.CS:GO\u9f20\u6807\u504f\u79fb\u95ee\u9898 CS:GO\u63a5\u53d7\u9f20\u6807\u539f\u59cb\u8f93\u5165\u540e\u8fdb\u884c\u4e86\u53d8\u6362\uff0c\u5bfc\u81f4\u9f20\u6807\u79fb\u52a8\u8fc7\u5927\u65f6\u51fa\u73b0\u504f\u79fb\u3002 \u89e3\u51b3\uff1a\u5728\u53cd\u590d\u6d4b\u8bd5\u4e2d\u6211\u4eec\u786e\u5b9a\u5176\u4e0e\u9f20\u6807\u52a0\u901f\u3001\u9f20\u6807\u7075\u654f\u5ea6\u6709\u5173\u3002\u6211\u4eec\u8bb0\u5f55\u4e86\u7ea620\u7ec4\u53c2\u6570\uff0c \u81ea\u884c\u642d\u5efa\u4e86\u5355\u5c42pytorch\u5168\u8fde\u63a5\u6a21\u578b \uff0c\u6700\u7ec8\u56de\u5f52\u5f97\u5230\u4e86\u9f20\u6807\u79fb\u52a8\u500d\u7387\u57fa\u672c\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u548c\u9f20\u6807\u52a0\u901f\u6709\u5173\uff0c\u5e76\u5f97\u5230\u5b9a\u6027\u5173\u7cfb\u3002\u540c\u65f6\u5728\u6e38\u620f\u5185\u5173\u95ed\u201c\u539f\u59cb\u8f93\u5165\u201d\u9009\u9879\u3002 \u5f00\u53d1\u65e5\u5fd7 \u524d\u7aef\u542f\u52a8\u5668 0.3.6 - 7-16-10:08 \u4fee\u590d\u4e862\u4e2abug \u4f18\u5316\u4f7f\u7528\u4f53\u9a8c\uff0c\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u53c2\u6570\uff0c\u5c06\u63d0\u793a\u7528\u6237\u6539\u52a8\u4e0b\u6b21\u751f\u6548\uff0c\u82e5\u5728\u542f\u52a8\u5668\u5185\u4f7f\u7528\u5feb\u6377\u952e\u542f\u52a8/\u5173\u95ed\u540e\u7aef\u5c06\u4e0d\u663e\u793a\u5f39\u7a97 \u5728\u6e38\u620f\u5185\u53ef\u4ee5\u901a\u8fc7\u8bed\u97f3\u5173\u95ed\u540e\u7aef\uff0c\u65e0\u9700\u5207\u6362\u542f\u52a8\u5668\u5173\u95ed\uff08\u5f85\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff09 0.3.5 - 7-14-19:54 \u5728\u7528\u6237\u9009\u62e9CS:GO\u65f6\u663e\u793a\u9f20\u6807\u7075\u654f\u5ea6\u7684\u8c03\u8282\u5668\uff0c\u4e0e\u6e38\u620f\u5185\u4fdd\u6301\u4e00\u81f4\uff0c\u63d0\u9ad8\u7cbe\u51c6\u5ea6 0.3.3 - 7-14-15:37 \u4f18\u5316\u4f7f\u7528\u4f53\u9a8c\uff0c\u8bbe\u7f6e\u5f39\u7a97\u63d0\u793a\uff0c\u6307\u5f15\u7528\u6237\u4f7f\u7528\u65b9\u5f0f 0.3.1 - 7-14-14:30 \u5b8c\u6210\u4e0e\u540e\u7aef\u7684json\u53c2\u6570\u4f20\u9012 \u540e\u7aef\u811a\u672c\u6539\u4e3a\u65b0\u7ebf\u7a0b\u9690\u85cf\u5f0f\u542f\u52a8\uff08 python -> start pythonw \uff09\uff0c\u907f\u514d\u8fd0\u884c\u540e\u7aef\u4e4b\u540e\u524d\u7aef\u7a0b\u5e8f\u963b\u585e \u589e\u52a0\u52a8\u6001\u6a21\u5f0f\u542f\u52a8\uff08Beta\uff09\u9009\u9879 \u542f\u52a8\u5668\u8fd0\u884c\u540e\u7aef\u4e4b\u540e\u4e0d\u518d\u5173\u95ed\uff0c\u8fd0\u884c\u6309\u94ae\u53d8\u4e3a\u7ed3\u675f\u540e\u7aef\u3002\u540c\u65f6\uff0c\u5173\u95ed\u542f\u52a8\u5668\u7a97\u53e3\u4e5f\u4f1a\u7ed3\u675f\u540e\u7aef\uff08\u7c7b\u4f3c\u817e\u8baf\u4f1a\u8bae\u8bbe\u8ba1\uff09 0.3.0 - 7-13-22:51 \u4f7f\u7528 ttkbootstrap \u91cd\u6784\u754c\u9762\uff0c\u73b0\u4ee3\u5316\u3001\u6241\u5e73\u5316\u3002 \u589e\u52a0\u6a21\u578b\u9009\u62e9\u53ca\u63d0\u793a\u3001\u6e38\u620f\u9009\u62e9\u3001\u542f\u52a8\u65b9\u5f0f\u9009\u62e9\uff08Demo\u6216Normal\uff09 0.2.0 - 7-13-11:23 \u4f7f\u7528 tkinter \u5b8c\u6210\u524d\u7aef\u542f\u52a8\u5668\u5f00\u53d1 \u540e\u7aef\u811a\u672c 0.3.3 - 7.15-19:32 \u4fee\u590d\u4e86\u6f14\u793a\u6a21\u5f0f\u76841\u4e2abug\uff0c\u4f18\u5316\u52a8\u6001\u8865\u507f\u7b97\u6cd5\u7684\u6d41\u7a0b\uff0c\u51cf\u5c11\u65f6\u5ef6 0.3.2 - 7.14-23:11 \u9002\u914dCS:GO\uff0c\u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u9f20\u6807\u7075\u654f\u5ea6\u8c03\u6574\u9f20\u6807\u79fb\u52a8\u7b97\u6cd5\uff0c\u63d0\u9ad8\u7cbe\u51c6\u5ea6 0.3.1 - 7.14-18:00 \u65b0\u7684\u6f14\u793a\u6a21\u5f0f\uff0c\u5b9e\u65f6\u6807\u6846\u5e76\u5c55\u793a\uff0c\u622a\u56fe\u8bc6\u522b\u8303\u56f4\u6539\u56de\u5168\u5c4f\u8bc6\u522b\u3002 \u5b8c\u6210\u4e0e\u524d\u7aef\u7684json\u53c2\u6570\u4f20\u9012 0.3.0 - 7.14-00:56 \u4fee\u590d\u8bc6\u522b\u975e\u771f\u5b9e\u5c4f\u5e55\u5206\u8fa8\u7387\u7684\u95ee\u9898 \u521d\u6b65\u5b9e\u73b0\u4e86\u52a8\u6001\u8865\u507f\u7b97\u6cd5\uff0c\u5bf9\u8fd1\u5300\u901f\u8fd0\u52a8\u7684\u654c\u4eba\u6709\u6548 0.2.0 - 7.13-12:32 \u5c06\u6a21\u578b\u8fc1\u79fb\u81f3cuda\uff0c\u8fdb\u4e00\u6b65\u964d\u4f4e\u65f6\u5ef6 \u4f18\u5316\u4e86\u9009\u62e9\u6700\u4f73\u76ee\u6807\u7684\u65b9\u5f0f\uff0c\u7531\u9009\u62e9\u6700\u5927\u76ee\u6807\u6539\u4e3a\u9009\u62e9\u79bb\u51c6\u661f\u6700\u8fd1\u76ee\u6807 0.1.5 - 7.12-21:48 \u6539\u8fdb\u622a\u56fe\u3001\u9f20\u6807\u79fb\u52a8\u7684API\uff0c\u4fee\u6539\u4f7f\u7528\u6a21\u578b\uff0c\u7b80\u6d01\u6d41\u7a0b\u51fd\u6570\u3002\u964d\u4f4e\u5355\u6b21\u7784\u51c6\u5ef6\u8fdf\u4e3a0.2\u79d2\u5de6\u53f3\uff0c\u4e0e\u9ad8\u624b\u53cd\u5e94\u901f\u5ea6\u6301\u5e73 \u4fee\u6539\u622a\u56fe\u7684\u8bc6\u522b\u4f4d\u7f6e\u4e3a\u5c4f\u5e55\u4e2d\u5fc3 \u4f7f\u7528opencv\u7f6e\u9876\u5c0f\u7a97\u5c55\u793a\u8bc6\u522b\u8fc7\u7a0b 0.1.0 - 7.12-11:14 \u521d\u4ee3\u7248\u672c\uff0c\u5355\u6b21\u7784\u51c6\u5ef6\u8fdf\u8fd10.4-0.5\u79d2 \u9644\u5f55 \u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93 os sys time tkinter ttkbootstrap json pickle PyQt5.QtWidgets PyQt5.QtGui win32gui pytest pytorch(torch) keyboard pydirectinput opencv-python(cv2) numpy","title":"FPS-AI-Aiming"},{"location":"test/#fps-ai-aiming","text":"\u7ec4\u5458\uff1a\u5b59\u745c\u6770\u3001\u6731\u70e8\u3001\u5f6d\u68a6\u9f99","title":"FPS-AI-Aiming"},{"location":"test/#_1","text":"\u672c\u7a0b\u5e8f\u4e3aSJTU AI001\u8bfe\u7a0b\u5c0f\u7ec4\u4f5c\u4e1a\uff0c\u4ec5\u4f9b\u6280\u672f\u9a8c\u8bc1\uff0c\u4e0d\u7528\u4e8e\u5b9e\u9645\u6e38\u620f\u4f5c\u5f0a \u200b \u672c\u7a0b\u5e8f\u57fa\u4e8epytorch\u6846\u67b6\u4e0eyolov5\u7269\u4f53\u68c0\u6d4b\u5e73\u53f0\uff0c\u5b9e\u73b0\u4e86\u4eba\u5de5\u667a\u80fd\u5bf9FPS\uff08\u7b2c\u4e00\u4eba\u79f0\u5c04\u51fb\uff09\u6e38\u620f\u7684\u8f85\u52a9\u7784\u51c6\u3002\u4e0e\u4f20\u7edf\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u4e0d\u540c\uff0c\u672c\u7a0b\u5e8f\u4e0d\u8bfb\u53d6\u6216\u6539\u52a8\u6e38\u620f\u7684\u5185\u5b58\u6570\u636e\uff0c\u800c\u662f\u901a\u8fc7\u4eba\u5de5\u667a\u80fd\u5b9e\u65f6\u5206\u6790\u6e38\u620f\u753b\u9762\u3001\u786e\u5b9a\u654c\u4eba\u4f4d\u7f6e\u5e76\u79fb\u52a8\u9f20\u6807\u5c04\u51fb\uff0c\u53cd\u5e94\u6d41\u7a0b\u4e0e\u4eba\u8111\u76f8\u540c\uff0c\u96be\u4ee5\u88ab\u666e\u901a\u53cd\u4f5c\u5f0a\u65b9\u5f0f\u68c0\u6d4b\u3002\u672c\u7a0b\u5e8f\u7684\u7279\u70b9\u6709\uff1a \u5355\u6b21\u8bc6\u522b\u8fc7\u7a0b\u7ecf\u8fc7\u53cd\u590d\u4f18\u5316\uff0c\u5728RTX30\u7cfb\u663e\u5361\u4e0b\u5355\u6b21\u65f6\u5ef6$\\leq 0.1s$\u200b \u524d\u540e\u7aef\u5206\u79bb\uff0c\u524d\u7aef\u542f\u52a8\u5668UI\u754c\u9762\u73b0\u4ee3\u5316\u3001\u6241\u5e73\u5316\uff0c\u63d0\u4f9b\u53c2\u6570\u8c03\u8282\u529f\u80fd\u5e76\u4e0e\u540e\u7aef\u901a\u8fc7json\u53c2\u6570\u5171\u4eab \u8bbe\u8ba1\u6f14\u793a\u6a21\u5f0f\uff0c\u5b9e\u65f6\u5c55\u73b0AI\u7684\u8bc6\u522b\u8fc7\u7a0b \u8bbe\u8ba1\u9759\u6001\u548c\u52a8\u6001\u6a21\u5f0f\uff0c\u5728\u654c\u4eba\u9759\u6001\u548c\u8fd1\u5300\u901f\u8fd0\u52a8\u65f6\u6709\u53ef\u89c2\u7684\u5c04\u51fb\u7cbe\u51c6\u5ea6 \u9002\u914d\u591a\u6b3e\u5c04\u51fb\u6e38\u620f\uff0c\u5bf9CS:GO\uff08\u300a\u53cd\u6050\u7cbe\u82f1:\u5168\u7403\u653b\u52bf\u300b\uff09\u5355\u72ec\u4f18\u5316\uff0c\u8003\u8651\u5230\u9f20\u6807\u52a0\u901f\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u8bbe\u7f6e\u5bf9\u7a0b\u5e8f\u53c2\u6570\u7684\u5f71\u54cd \u200b \u4ece\u672c\u6b21\u6280\u672f\u9a8c\u8bc1\u4e2d\uff0c\u6211\u4eec\u6df1\u523b\u610f\u8bc6\u5230\u6e38\u620f\u516c\u53f8\u5bf9\u4ee5\u4eba\u5de5\u667a\u80fdCV\u8bc6\u522b\u4e3a\u539f\u7406\u7684\u65b0\u578b\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u9632\u4e0d\u80dc\u9632\uff0c\u4f46AI\u4e3a\u7f29\u5c0f\u5ef6\u8fdf\uff0c\u4e00\u822c\u5c06\u79fb\u52a8\u9f20\u6807\u7684\u8fc7\u7a0b\u5c3d\u91cf\u7f29\u77ed\uff0c\u4e14\u6a21\u62df\u9f20\u6807\u79fb\u52a8\u65b9\u5f0f\u4e0e\u4eba\u5de5\u5b58\u5728\u5dee\u5f02\u3002\u901a\u8fc7\u5b9e\u65f6\u8bb0\u5f55\u9f20\u6807\u79fb\u52a8\u3001\u7ed3\u5408\u7528\u6237\u4e3e\u62a5\uff0c\u672a\u6765\u6216\u8bb8\u53ef\u4ee5\u8bad\u7ec3\u51fa\u5408\u9002\u7684\u795e\u7ecf\u7f51\u7edc\u68c0\u6d4b\u8fd9\u4e00\u65b0\u578b\u6e38\u620f\u4f5c\u5f0a\u65b9\u5f0f\u3002\u540c\u65f6\uff0c\u6211\u4eec\u4e5f\u610f\u8bc6\u5230\u6b64\u7c7b\u6280\u672f\u6216\u8bb8\u53ef\u4ee5\u8fd0\u7528\u4e8e\u672a\u6765\u6218\u573a\u3002","title":"\u6982\u8981"},{"location":"test/#_2","text":"FPS-AI-Aiming \u6982\u8981 \u76ee\u5f55 \u5c0f\u7ec4\u5206\u5de5 \u5b59\u745c\u6770 \u6731\u70e8 \u5f6d\u68a6\u9f99 \u7a0b\u5e8f\u67b6\u6784 \u529f\u80fd\u5b9e\u73b0\u4e0e\u6280\u672f\u65b9\u6848 \u524d\u7aef\u542f\u52a8\u5668 \u540e\u7aef\u811a\u672c \u6280\u672f\u96be\u70b9 1.Python\u7684tkinter\u6807\u51c6GUI\u5e93\u8bbe\u8ba1\u98ce\u683c\u8001\u65e7 2.\u524d\u540e\u7aef\u4f20\u9012\u53c2\u6570\u95ee\u9898 3.\u5355\u6b21\u7784\u51c6\u65f6\u95f4\u5ef6\u8fdf\u9ad8 4.\u9884\u8bad\u7ec3\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u77e9\u5f62\u6846 5.CS:GO\u9f20\u6807\u504f\u79fb\u95ee\u9898 \u5f00\u53d1\u65e5\u5fd7 \u524d\u7aef\u542f\u52a8\u5668 0.3.6 - 7-16-10:08 0.3.5 - 7-14-19:54 0.3.3 - 7-14-15:37 0.3.1 - 7-14-14:30 0.3.0 - 7-13-22:51 0.2.0 - 7-13-11:23 \u540e\u7aef\u811a\u672c 0.3.3 - 7.15-19:32 0.3.2 - 7.14-23:11 0.3.1 - 7.14-18:00 0.3.0 - 7.14-00:56 0.2.0 - 7.13-12:32 0.1.5 - 7.12-21:48 0.1.0 - 7.12-11:14 \u9644\u5f55 \u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93","title":"\u76ee\u5f55"},{"location":"test/#_3","text":"","title":"\u5c0f\u7ec4\u5206\u5de5"},{"location":"test/#_4","text":"\u4e3b\u4f53\u8d1f\u8d23\u524d\u7aef\u542f\u52a8\u5668\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3 \u53c2\u4e0e\u4e86\u540e\u7aef\u811a\u672c\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\uff0c\u5b8c\u6210\u4e86\u6700\u521d\u7248\u672c\u7684\u6f14\u793a\u7a97\u53e3\u4ee3\u7801\uff0c\u63d0\u4f9b\u6a21\u578b\u4f18\u5316\u3001\u83b7\u53d6\u771f\u5b9e\u5206\u8fa8\u7387\u7b49\u601d\u8def \u901a\u8fc7\u5b9e\u9a8c\u5f97\u51fa\u6e38\u620f\u4e2d\u9f20\u6807\u7075\u654f\u5ea6\u4e0e\u7a0b\u5e8f\u53c2\u6570\u7684\u5173\u7cfb \u64b0\u5199\u4e86\u5f00\u53d1\u65e5\u5fd7\uff08\u672c\u6587\u6863\uff09","title":"\u5b59\u745c\u6770"},{"location":"test/#_5","text":"\u4e3b\u4f53\u8d1f\u8d23\u540e\u7aef\u811a\u672c\u3001\u6f14\u793a\u6a21\u5f0f\u7a97\u53e3\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\u3002\u5b9e\u73b0\u540e\u7aef\u4e0eCS:GO\u6e38\u620f\u5ba2\u6237\u7aef\u7684\u4ea4\u4e92 \u53c2\u4e0e\u4e86\u524d\u7aef\u542f\u52a8\u5668\u7684\u5f00\u53d1\u3001\u6d4b\u8bd5\u4e0e\u8fed\u4ee3\uff0c\u63d0\u4f9b\u4e86\u53c2\u6570\u8bbe\u8ba1\u3001\u524d\u540e\u7aef\u4fe1\u606f\u4f20\u9012\u7b49\u601d\u8def \u901a\u8fc7\u5b9e\u9a8c\u5f97\u51fa\u6e38\u620f\u4e2d\u9f20\u6807\u7075\u654f\u5ea6\u4e0e\u7a0b\u5e8f\u53c2\u6570\u7684\u5173\u7cfb \u5f55\u5236\u4e86\u6f14\u793a\u89c6\u9891","title":"\u6731\u70e8"},{"location":"test/#_6","text":"\u6253\u6807\u5236\u4f5c\u8bad\u7ec3\u6570\u636e\u96c6\uff08\u7531\u4e8e\u8bad\u7ec3\u540e\u6a21\u578b\u7684\u901f\u5ea6\u548c\u7cbe\u5ea6\u95ee\u9898\u6700\u7ec8\u9009\u62e9\u4f7f\u7528 yolov5n \uff09 \u5728Apex Legends\u548cCS1.6\u6e38\u620f\u4e0a\u6d4b\u8bd5\u7a0b\u5e8f\u5e76\u5f97\u51fa\u4e86\u5bf9\u4e0d\u540c\u6e38\u620f\u9002\u914d\u7684\u601d\u8def\uff0c\u5728CS1.6\u548cApex\u4e0a\u4e5f\u5b9e\u73b0\u4e86\u8f83\u53ef\u89c2\u7684\u7cbe\u5ea6 \u5236\u4f5c\u4e86\u6c47\u62a5PPT\u3001\u672c\u6587\u6863\u4e2d\u7684\u6d41\u7a0b\u56fe","title":"\u5f6d\u68a6\u9f99"},{"location":"test/#_7","text":"\u7a0b\u5e8f\u4e2d\u7531\u7ec4\u5458\u539f\u521b\u7684\u4e3b\u8981\u4ee3\u7801\u6587\u4ef6\u6709\uff1a launcher.py \u524d\u7aef\u542f\u52a8\u5668\uff0c\u4e0e\u7528\u6237\u63d0\u4f9b\u4ea4\u4e92\u3002\u7528\u6237\u53ef\u8bbe\u7f6e\u542f\u52a8\u53c2\u6570\u5e76\u8fd0\u884c \\bin\\ai.py \u540e\u7aef\u4e3b\u7a0b\u5e8f\uff0c\u6355\u6349\u6e38\u620f\u753b\u9762\u3001\u8c03\u7528API\u8bc6\u522b\u4eba\u7269\u3001\u8ba1\u7b97\u5c04\u51fb\u4f4d\u7f6e\u5e76\u6a21\u62df\u79fb\u52a8\u9f20\u6807 \\bin\\demo.py \u6f14\u793a\u6a21\u5f0f\u524d\u53f0\u7f6e\u9876\u5c0f\u7a97\uff0c\u5c55\u793a\u8bc6\u522b\u8fc7\u7a0b \\bin\\asr_switch.py \u7528\u4e8e\u8bed\u97f3\u8bc6\u522b\u5173\u95ed\u540e\u7aef\uff08\u5f85\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff09 \u7a0b\u5e8f\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7528\u4e8e\u6d4b\u8bd5\u6027\u80fd\u548c\u53c2\u6570\u7684\u4ee3\u7801\u6587\u4ef6\u6709\uff1a \\bin\\tune.py \u7528\u4e8e\u6d4b\u8bd5CS:GO\uff08\u300a\u53cd\u6050\u7cbe\u82f1:\u5168\u7403\u653b\u52bf\u300b\uff09\u9f20\u6807\u52a0\u901f\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u8bbe\u7f6e\u5bf9\u7a0b\u5e8f\u53c2\u6570\u7684\u5f71\u54cd \u4f7f\u7528\u7684\u7b2c\u4e09\u65b9\u6a21\u578b\u5e73\u53f0\u6709\uff1a \\bin\\ultralytics\\yolov5\\ \u8c03\u7528\u7684\u7269\u4f53\u68c0\u6d4b\u5e73\u53f0\uff0c\u57fa\u4e8etorch [Console-Running-Directory]\\yolov5n.pt \u9884\u8bad\u7ec3\u6a21\u578b\u4f4d\u4e8e\u8fd0\u884c\u811a\u672c\u7684\u547d\u4ee4\u884ccd\u76ee\u5f55\uff08\u82e5\u65e0\u5219\u81ea\u52a8\u4e0b\u8f7d\uff09 \\bin\\audio.py \u8bfe\u7a0b\u63d0\u4f9b\u5e93\uff08\u6765\u81ea sjtu.audio \uff09","title":"\u7a0b\u5e8f\u67b6\u6784"},{"location":"test/#_8","text":"\u7a0b\u5e8f\u8fd0\u884c\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a \u6ce8\uff1a\u9700\u4f7f\u7528 launcher.py \u542f\u52a8\u7a0b\u5e8f\uff0c\u82e5\u76f4\u63a5\u542f\u52a8 \\bin\\ai.py \u4f1a\u81ea\u52a8\u5173\u95ed\u3002","title":"\u529f\u80fd\u5b9e\u73b0\u4e0e\u6280\u672f\u65b9\u6848"},{"location":"test/#_9","text":"\u524d\u7aef\u754c\u9762\u4e2d\u7684\u5404\u7ec4\u4ef6\u4f7f\u7528\u5747\u57fa\u4e8e tkinter \u7684 ttkbootstrap \u5e93\u6784\u5efa\u3002 \u6bcf\u884c\u4e3a\u4e00\u7ec4\u53c2\u6570\u7684\u9009\u62e9\uff0c\u8bbe\u8ba1\u4e0a\u501f\u9274\u4e86pytorch\u548copenVINO\u4e0b\u8f7d\u754c\u9762\u7684\u98ce\u683c\uff0c\u5e03\u5c40\u4e0a\u4f7f\u7528\u591a\u91cd ttk.Frame \u5d4c\u5957 ttk.RatioButton \u5b9e\u73b0\u3002\u540c\u65f6\uff0c\u6839\u636e\u4e0d\u540c\u7684\u53c2\u6570\u9009\u62e9\u4f1a\u63d0\u4f9b\u4e0d\u540c\u7684\u63d0\u793a\uff08\u5982\u6a21\u578b\u9009\u62e9\u8f83\u5c0f\u7684 yolov5n \uff0c\u663e\u793a\u201c\u6240\u6709\u8bbe\u5907\u5747\u63a8\u8350\u4f7f\u7528\u201d\uff0c\u9009\u62e9\u8f83\u6df1\u5c42\u7684 yolov5m \uff0c\u663e\u793a\u201c\u63a8\u8350\u5728RTX3080\u53ca\u4ee5\u4e0a\u663e\u5361\u4f7f\u7528\uff09\u3002 \u9009\u62e9\u76ee\u6807\u6e38\u620f\u4e3aCS:GO\u65f6\u4f1a\u663e\u793a\u9f20\u6807\u7075\u654f\u5ea6\u7684\u8c03\u8282\u6761\uff08\u4f7f\u7528 ttk.Scale \u5b9e\u73b0\uff09\uff0c\u8fd0\u884c\u540e\u53c2\u6570\u88ab\u4fdd\u5b58\u81f3 \\\\bin\\running_status.json \u4e2d\uff0c\u53ef\u4f9b\u4e0b\u6b21\u542f\u52a8\u65f6\u81ea\u52a8\u8bfb\u53d6\uff0c\u7701\u53bb\u4e86\u6bcf\u6b21\u8bbe\u7f6e\u7684\u9ebb\u70e6\u3002\u540c\u65f6\u4f7f\u7528 try...except \u8bed\u53e5\u907f\u514d\u7b2c\u4e00\u6b21\u8fd0\u884cjson\u6587\u4ef6\u4e0d\u5b58\u5728\u5f15\u53d1\u62a5\u9519\u3002 \u70b9\u51fb\u8fd0\u884c\u6309\u94ae\u540e\uff0c\u5f39\u7a97\u63d0\u793a\u4f7f\u7528\u8bf4\u660e\u3002\u5e76\u6839\u636e\u53c2\u6570\u6267\u884c \\bin\\ai.py \u548c \\bin\\demo.py \uff0c\u8fd0\u884c\u6309\u94ae\u540c\u65f6\u53d8\u4e3a\u5173\u95ed\u6309\u94ae\uff0c\u7528\u4e8e\u5173\u95ed\u540e\u7aef\u811a\u672c\u3002\u8fd0\u884c\u72b6\u6001\u4e0b\uff0c\u7a97\u53e3\u6807\u9898\u4e5f\u53d1\u751f\u6539\u53d8\u3002","title":"\u524d\u7aef\u542f\u52a8\u5668"},{"location":"test/#_10","text":"\u4ece \\\\bin\\running_status.json \u8bfb\u53d6\u542f\u52a8\u5668\u4e2d\u7528\u6237\u5b9a\u4e49\u7684\u53c2\u6570 \u4f7f\u7528 win32gui \u3001 screenindo \u3001 PyQt5 \u5e93\u5b9e\u73b0\u81ea\u52a8\u83b7\u53d6\u7cfb\u7edf\u539f\u59cb\u5206\u8fa8\u7387\u4e0e\u5bf9\u6307\u5b9a\u6e38\u620f\u7a97\u53e3\u7684\u622a\u5c4f\uff0c\u5e76\u5b9a\u4e49\u4e86 QImageToCvMat() \u51fd\u6570\u5c06\u6355\u6349\u5230\u7684\u5c4f\u5e55\u622a\u56fe\u8f6c\u6362\u683c\u5f0f\u3002\u5728 demo \u6a21\u5f0f\u4e0b\u4f7f\u7528 opencv \u5e93\u76f8\u5173\u51fd\u6570\u7ed8\u5236\u4eba\u7269\u4f4d\u7f6e\u3001\u5934\u90e8\u4f4d\u7f6e\u5e76\u5f39\u7a97\u5c55\u793a\u3002 \u4f7f\u7528 keyboard \u5e93\u7684 keyboard.hook() \u51fd\u6570\u5bf9\u952e\u76d8\u4e8b\u4ef6\u5b9e\u65bd\u76d1\u542c\uff0c\u5f53\u7528\u6237\u6309\u4e0b x \u952e\u65f6\u542f\u52a8\u540e\u7eed\u6d41\u7a0b \u901a\u8fc7 torch.hub.load() \u51fd\u6570\u8c03\u7528 yolov5 \u5e93\u7684API\u6355\u6349\u4eba\u7269\u4f4d\u7f6e\uff0c\u9009\u53d6\u7f6e\u4fe1\u5ea6\u8f83\u9ad8\u3001\u79bb\u51c6\u661f\u6700\u8fd1\u7684\u8bc6\u522b\u76ee\u6807\uff0c\u901a\u8fc7 calc_head() \u8ba1\u7b97\u5934\u90e8\u4f4d\u7f6e\u3002\u8fd0\u52a8\u6a21\u5f0f\u4e0b\u5355\u6b21\u6309\u4e0b x \u91cd\u590d\u4e0a\u8ff0\u6d41\u7a0b\u4e24\u6b21\uff0c\u8ba1\u7b97\u654c\u65b9\u8fd0\u52a8\u901f\u5ea6\u3001\u6839\u636e\u5b9e\u6d4b\u7684\u8bc6\u522b\u65f6\u95f4\u52a0\u4ee5\u8fd0\u52a8\u8865\u507f\u3002 \u5b9a\u4f4d\u5230\u5c04\u51fb\u4f4d\u7f6e\u540e\u4f7f\u7528 pydirectinput.moveTo() \u4e0e pydirectinput.click() \u51fd\u6570\u79fb\u52a8\u9f20\u6807\u5e76\u6a21\u62df\u5c04\u51fb\u3002\u5bf9CS:GO\u91c7\u53d6\u7279\u6b8a\u4f18\u5316\uff0c\u901a\u8fc7\u524d\u7aef\u4f20\u5165\u7684\u9f20\u6807\u7075\u654f\u5ea6\u8ba1\u7b97\u79fb\u52a8\u901f\u5ea6\u7684\u500d\u7387 tune","title":"\u540e\u7aef\u811a\u672c"},{"location":"test/#_11","text":"","title":"\u6280\u672f\u96be\u70b9"},{"location":"test/#1pythontkintergui","text":"\u89e3\u51b3\uff1a\u4f7f\u7528 ttkbootstrap \u5e93\u5b9e\u73b0\u4e86\u7f8e\u5316\u3002","title":"1.Python\u7684tkinter\u6807\u51c6GUI\u5e93\u8bbe\u8ba1\u98ce\u683c\u8001\u65e7"},{"location":"test/#2","text":"\u901a\u8fc7 import \u8c03\u7528\u51fd\u6570\u7684\u65b9\u5f0f\u96be\u4ee5\u8c03\u548c\u524d\u540e\u7aef\u591a\u4e2a\u5faa\u73af\u6267\u884c\u7684 loop \u51b2\u7a81\u4e0e\u963b\u585e \u89e3\u51b3\uff1a \u524d\u540e\u7aef\u5b8c\u5168\u5206\u79bb \uff0c\u524d\u7aef\u901a\u8fc7 start pythonw \u4ee5\u72ec\u7acb\u8fdb\u7a0b\u3001\u9690\u85cf\u7ec8\u7aef\u7684\u65b9\u5f0f\u6253\u5f00\u540e\u7aef\u811a\u672c\uff0c\u901a\u8fc7json\u6587\u4ef6\u4f20\u9012\u3001\u4fdd\u5b58\u53c2\u6570\u5e76\u5173\u95ed\u540e\u7aef\u811a\u672c\u3002","title":"2.\u524d\u540e\u7aef\u4f20\u9012\u53c2\u6570\u95ee\u9898"},{"location":"test/#3","text":"\u6700\u65e9\u7248\u672c\u7684\u5355\u6b21\u7784\u51c6\u9700\u8981\u82b1\u8d390.4-0.5\u79d2\uff0c\u8fd9\u4e48\u9ad8\u7684\u5ef6\u8fdf\u5728\u7d27\u5f20\u7684\u5c04\u51fb\u6e38\u620f\u4e2d\u6beb\u65e0\u4f5c\u7528\uff0c\u5e94\u5bf9\u79fb\u52a8\u654c\u4eba\u7cbe\u51c6\u5ea6\u5dee\u3002\u6700\u540e\u6211\u4eec\u5c06\u901f\u5ea6\u4f18\u5316\u81f3\u5728RTX30\u7cfb\u663e\u5361\uff08RTX3070 6M\uff09\u4e0b\u5355\u6b21\u65f6\u5ef6\u7ea60.09\u79d2\uff0c\u5728\u96c6\u6210\u663e\u5361\uff08AMD R7-5800H \u79fb\u52a8\u7aefVega Graphics\uff09\u4e0b\u5355\u6b21\u65f6\u5ef6\u5c0f\u4e8e0.2\u79d2\uff09 \u89e3\u51b3\uff1a\u6211\u4eec\u5bf9\u4ece\u622a\u56fe\u3001\u8bc6\u522b\u5230\u6a21\u62df\u9f20\u6807\u79fb\u52a8\u7684 \u591a\u4e2a\u73af\u8282\u90fd\u8fdb\u884c\u4e86\u53cd\u590d\u7684\u8fed\u4ee3\u4f18\u5316 \u6d4b\u8bd55\u79cd\u622a\u56fe\u65b9\u5f0f\uff0c\u6700\u7ec8\u9009\u62e9\u4e86\u6700\u5feb\u7684 PyQt5 \u5e93\u51fd\u6570\uff0c\u622a\u5c4f\u90e8\u5206\u6700\u7ec8\u8017\u65f6\u5c0f\u4e8e0.02\u79d2\u3002 \u6d4b\u8bd5\u591a\u79cd\u6a21\u578b\uff0c\u6700\u7ec8\u9009\u62e9 yolov5n \u548c yolov5s \u6a21\u578b\u4f5c\u4e3a\u4e3b\u529b\uff08\u7528\u6237\u53ef\u4ee5\u5728\u542f\u52a8\u5668\u9009\u62e9\uff09\uff0c\u5e76\u5c06\u6a21\u578b\u4ece cpu-only \u8fc1\u79fb\u81f3 cuda \uff08GPU\uff09\uff0c\u8bc6\u522b\u6a21\u578b\u90e8\u5206\u6700\u7ec8\u8017\u65f6\u5c0f\u4e8e0.06\u79d2\uff08 yolov5n \uff0c\u72ec\u663e\uff09\u30010.12\u79d2\uff08 yolov5n \uff0c\u6838\u663e\uff09 \u7814\u7a76 pydirectinput \u7684\u5e93\u51fd\u6570\u4ee3\u7801\uff0c\u4fdd\u8bc1\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u6539\u52a8\uff0c\u4f7f\u9f20\u6807\u79fb\u52a8\u90e8\u5206\u8017\u65f6\u5c0f\u4e8e0.005\u79d2\uff0c\u51e0\u4e4e\u5ffd\u7565\u4e0d\u8ba1\u3002 \u591a\u6b21\u4f18\u5316\u4e86\u8ba1\u7b97\u6700\u4f73\u5c04\u51fb\u4f4d\u7f6e\u7684\u51fd\u6570 aim() \u548c calc_head() \uff0c\u786e\u7acb\u76ee\u6807\u90e8\u5206\u8017\u65f6\u6700\u7ec8\u5c0f\u4e8e0.008\u79d2\uff0c\u51e0\u4e4e\u5ffd\u7565\u4e0d\u8ba1\u3002","title":"3.\u5355\u6b21\u7784\u51c6\u65f6\u95f4\u5ef6\u8fdf\u9ad8"},{"location":"test/#4","text":"\u8003\u8651\u5230\u5b9e\u65f6\u6e38\u620f\u4e0b\u7684\u6027\u80fd\u5f71\u54cd\u548c\u901f\u5ea6\u9700\u6c42\uff0c\u4f7f\u7528\u7684\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u8bc6\u522b\u7684\u77e9\u5f62\u6846 \u89e3\u51b3\uff1a \u81ea\u884c\u8bbe\u8ba1\u4e86\u901a\u8fc7\u77e9\u5f62\u6846\u8ba1\u7b97\u4eba\u7269\u5934\u90e8\u4f4d\u7f6e\u7684\u51fd\u6570 \uff0c\u786e\u5b9a\u5934\u90e8\u5927\u81f4\u4f4d\u7f6e\u5e76\u7784\u51c6\u3002\u6839\u636e\u6e38\u620f\u8fd0\u884c\u65f6\u5b9e\u9645\u60c5\u51b5\u8c03\u6574\uff0c\u6700\u7ec8\u5c04\u51fb\u7cbe\u786e\u5ea6\u5341\u5206\u53ef\u89c2","title":"4.\u9884\u8bad\u7ec3\u6a21\u578b\u4ec5\u63d0\u4f9b\u4eba\u7269\u77e9\u5f62\u6846"},{"location":"test/#5csgo","text":"CS:GO\u63a5\u53d7\u9f20\u6807\u539f\u59cb\u8f93\u5165\u540e\u8fdb\u884c\u4e86\u53d8\u6362\uff0c\u5bfc\u81f4\u9f20\u6807\u79fb\u52a8\u8fc7\u5927\u65f6\u51fa\u73b0\u504f\u79fb\u3002 \u89e3\u51b3\uff1a\u5728\u53cd\u590d\u6d4b\u8bd5\u4e2d\u6211\u4eec\u786e\u5b9a\u5176\u4e0e\u9f20\u6807\u52a0\u901f\u3001\u9f20\u6807\u7075\u654f\u5ea6\u6709\u5173\u3002\u6211\u4eec\u8bb0\u5f55\u4e86\u7ea620\u7ec4\u53c2\u6570\uff0c \u81ea\u884c\u642d\u5efa\u4e86\u5355\u5c42pytorch\u5168\u8fde\u63a5\u6a21\u578b \uff0c\u6700\u7ec8\u56de\u5f52\u5f97\u5230\u4e86\u9f20\u6807\u79fb\u52a8\u500d\u7387\u57fa\u672c\u4e0e\u9f20\u6807\u7075\u654f\u5ea6\u548c\u9f20\u6807\u52a0\u901f\u6709\u5173\uff0c\u5e76\u5f97\u5230\u5b9a\u6027\u5173\u7cfb\u3002\u540c\u65f6\u5728\u6e38\u620f\u5185\u5173\u95ed\u201c\u539f\u59cb\u8f93\u5165\u201d\u9009\u9879\u3002","title":"5.CS:GO\u9f20\u6807\u504f\u79fb\u95ee\u9898"},{"location":"test/#_12","text":"","title":"\u5f00\u53d1\u65e5\u5fd7"},{"location":"test/#_13","text":"","title":"\u524d\u7aef\u542f\u52a8\u5668"},{"location":"test/#036-7-16-1008","text":"\u4fee\u590d\u4e862\u4e2abug \u4f18\u5316\u4f7f\u7528\u4f53\u9a8c\uff0c\u5728\u8fd0\u884c\u65f6\u6539\u53d8\u53c2\u6570\uff0c\u5c06\u63d0\u793a\u7528\u6237\u6539\u52a8\u4e0b\u6b21\u751f\u6548\uff0c\u82e5\u5728\u542f\u52a8\u5668\u5185\u4f7f\u7528\u5feb\u6377\u952e\u542f\u52a8/\u5173\u95ed\u540e\u7aef\u5c06\u4e0d\u663e\u793a\u5f39\u7a97 \u5728\u6e38\u620f\u5185\u53ef\u4ee5\u901a\u8fc7\u8bed\u97f3\u5173\u95ed\u540e\u7aef\uff0c\u65e0\u9700\u5207\u6362\u542f\u52a8\u5668\u5173\u95ed\uff08\u5f85\u8fdb\u4e00\u6b65\u6d4b\u8bd5\uff09","title":"0.3.6 - 7-16-10:08"},{"location":"test/#035-7-14-1954","text":"\u5728\u7528\u6237\u9009\u62e9CS:GO\u65f6\u663e\u793a\u9f20\u6807\u7075\u654f\u5ea6\u7684\u8c03\u8282\u5668\uff0c\u4e0e\u6e38\u620f\u5185\u4fdd\u6301\u4e00\u81f4\uff0c\u63d0\u9ad8\u7cbe\u51c6\u5ea6","title":"0.3.5 - 7-14-19:54"},{"location":"test/#033-7-14-1537","text":"\u4f18\u5316\u4f7f\u7528\u4f53\u9a8c\uff0c\u8bbe\u7f6e\u5f39\u7a97\u63d0\u793a\uff0c\u6307\u5f15\u7528\u6237\u4f7f\u7528\u65b9\u5f0f","title":"0.3.3 - 7-14-15:37"},{"location":"test/#031-7-14-1430","text":"\u5b8c\u6210\u4e0e\u540e\u7aef\u7684json\u53c2\u6570\u4f20\u9012 \u540e\u7aef\u811a\u672c\u6539\u4e3a\u65b0\u7ebf\u7a0b\u9690\u85cf\u5f0f\u542f\u52a8\uff08 python -> start pythonw \uff09\uff0c\u907f\u514d\u8fd0\u884c\u540e\u7aef\u4e4b\u540e\u524d\u7aef\u7a0b\u5e8f\u963b\u585e \u589e\u52a0\u52a8\u6001\u6a21\u5f0f\u542f\u52a8\uff08Beta\uff09\u9009\u9879 \u542f\u52a8\u5668\u8fd0\u884c\u540e\u7aef\u4e4b\u540e\u4e0d\u518d\u5173\u95ed\uff0c\u8fd0\u884c\u6309\u94ae\u53d8\u4e3a\u7ed3\u675f\u540e\u7aef\u3002\u540c\u65f6\uff0c\u5173\u95ed\u542f\u52a8\u5668\u7a97\u53e3\u4e5f\u4f1a\u7ed3\u675f\u540e\u7aef\uff08\u7c7b\u4f3c\u817e\u8baf\u4f1a\u8bae\u8bbe\u8ba1\uff09","title":"0.3.1 - 7-14-14:30"},{"location":"test/#030-7-13-2251","text":"\u4f7f\u7528 ttkbootstrap \u91cd\u6784\u754c\u9762\uff0c\u73b0\u4ee3\u5316\u3001\u6241\u5e73\u5316\u3002 \u589e\u52a0\u6a21\u578b\u9009\u62e9\u53ca\u63d0\u793a\u3001\u6e38\u620f\u9009\u62e9\u3001\u542f\u52a8\u65b9\u5f0f\u9009\u62e9\uff08Demo\u6216Normal\uff09","title":"0.3.0 - 7-13-22:51"},{"location":"test/#020-7-13-1123","text":"\u4f7f\u7528 tkinter \u5b8c\u6210\u524d\u7aef\u542f\u52a8\u5668\u5f00\u53d1","title":"0.2.0 - 7-13-11:23"},{"location":"test/#_14","text":"","title":"\u540e\u7aef\u811a\u672c"},{"location":"test/#033-715-1932","text":"\u4fee\u590d\u4e86\u6f14\u793a\u6a21\u5f0f\u76841\u4e2abug\uff0c\u4f18\u5316\u52a8\u6001\u8865\u507f\u7b97\u6cd5\u7684\u6d41\u7a0b\uff0c\u51cf\u5c11\u65f6\u5ef6","title":"0.3.3 - 7.15-19:32"},{"location":"test/#032-714-2311","text":"\u9002\u914dCS:GO\uff0c\u6839\u636e\u7528\u6237\u8f93\u5165\u7684\u9f20\u6807\u7075\u654f\u5ea6\u8c03\u6574\u9f20\u6807\u79fb\u52a8\u7b97\u6cd5\uff0c\u63d0\u9ad8\u7cbe\u51c6\u5ea6","title":"0.3.2 - 7.14-23:11"},{"location":"test/#031-714-1800","text":"\u65b0\u7684\u6f14\u793a\u6a21\u5f0f\uff0c\u5b9e\u65f6\u6807\u6846\u5e76\u5c55\u793a\uff0c\u622a\u56fe\u8bc6\u522b\u8303\u56f4\u6539\u56de\u5168\u5c4f\u8bc6\u522b\u3002 \u5b8c\u6210\u4e0e\u524d\u7aef\u7684json\u53c2\u6570\u4f20\u9012","title":"0.3.1 - 7.14-18:00"},{"location":"test/#030-714-0056","text":"\u4fee\u590d\u8bc6\u522b\u975e\u771f\u5b9e\u5c4f\u5e55\u5206\u8fa8\u7387\u7684\u95ee\u9898 \u521d\u6b65\u5b9e\u73b0\u4e86\u52a8\u6001\u8865\u507f\u7b97\u6cd5\uff0c\u5bf9\u8fd1\u5300\u901f\u8fd0\u52a8\u7684\u654c\u4eba\u6709\u6548","title":"0.3.0 - 7.14-00:56"},{"location":"test/#020-713-1232","text":"\u5c06\u6a21\u578b\u8fc1\u79fb\u81f3cuda\uff0c\u8fdb\u4e00\u6b65\u964d\u4f4e\u65f6\u5ef6 \u4f18\u5316\u4e86\u9009\u62e9\u6700\u4f73\u76ee\u6807\u7684\u65b9\u5f0f\uff0c\u7531\u9009\u62e9\u6700\u5927\u76ee\u6807\u6539\u4e3a\u9009\u62e9\u79bb\u51c6\u661f\u6700\u8fd1\u76ee\u6807","title":"0.2.0 - 7.13-12:32"},{"location":"test/#015-712-2148","text":"\u6539\u8fdb\u622a\u56fe\u3001\u9f20\u6807\u79fb\u52a8\u7684API\uff0c\u4fee\u6539\u4f7f\u7528\u6a21\u578b\uff0c\u7b80\u6d01\u6d41\u7a0b\u51fd\u6570\u3002\u964d\u4f4e\u5355\u6b21\u7784\u51c6\u5ef6\u8fdf\u4e3a0.2\u79d2\u5de6\u53f3\uff0c\u4e0e\u9ad8\u624b\u53cd\u5e94\u901f\u5ea6\u6301\u5e73 \u4fee\u6539\u622a\u56fe\u7684\u8bc6\u522b\u4f4d\u7f6e\u4e3a\u5c4f\u5e55\u4e2d\u5fc3 \u4f7f\u7528opencv\u7f6e\u9876\u5c0f\u7a97\u5c55\u793a\u8bc6\u522b\u8fc7\u7a0b","title":"0.1.5 - 7.12-21:48"},{"location":"test/#010-712-1114","text":"\u521d\u4ee3\u7248\u672c\uff0c\u5355\u6b21\u7784\u51c6\u5ef6\u8fdf\u8fd10.4-0.5\u79d2","title":"0.1.0 - 7.12-11:14"},{"location":"test/#_15","text":"","title":"\u9644\u5f55"},{"location":"test/#_16","text":"os sys time tkinter ttkbootstrap json pickle PyQt5.QtWidgets PyQt5.QtGui win32gui pytest pytorch(torch) keyboard pydirectinput opencv-python(cv2) numpy","title":"\u7b2c\u4e09\u65b9\u4f9d\u8d56\u5e93"},{"location":"update-plan/","text":"","title":"\u66f4\u65b0\u8ba1\u5212"},{"location":"api/account-operation/","text":"\u7b80\u4ecb \u7531\u4e8e bot \u7684\u90e8\u5206\u63d2\u4ef6\u9700\u8981\u6784\u5efa\u4e00\u5957\u5956\u52b1\u673a\u5236\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u5f15\u5165\u91d1\u5e01\u7cfb\u7edf\uff0c\u56e0\u6b64\u5199\u4e86\u4e00\u6574\u5957 API \u8c28\u4f9b\u63d2\u4ef6\u7a0b\u5e8f\u5458\u4f7f\u7528\u3002 1.0.0 \u7248\u672c\u7684\u91d1\u5e01\u7cfb\u7edf\u6709\u4ee5\u4e0b\u51e0\u4e2a\u51fd\u6570\u548c\u529f\u80fd\uff1a \u51fd\u6570\u540d \u529f\u80fd create_account_sql \u521b\u5efa\u91d1\u5e01\u7cfb\u7edf\u7684 sql get_user_coins \u67e5\u8be2\u7528\u6237\u91d1\u5e01 update_user_coins \u66f4\u65b0\u7528\u6237\u91d1\u5e01 get_user_transactions \u67e5\u8be2\u7528\u6237\u6d88\u8d39\u8bb0\u5f55 \u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u53ef\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\uff1a \u4ee3\u7801\u5206\u6790 from utils.basicEvent import warning import mysql.connector from datetime import datetime from utils.basicConfigs import sqlConfig from pymysql.converters import escape_string from typing import Union ''' BOT_DATA.accounts \u8d26\u6237 +----------+------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +----------+------------------+------+-----+---------+-------+ | id | bigint | NO | PRI | NULL | | | coin | bigint | YES | | NULL | | | lastSign | date | YES | | NULL | | | fortune | tinyint unsigned | YES | | NULL | | +----------+------------------+------+-----+---------+-------+ BOT_DATA.transactions \u4ea4\u6613\u8bb0\u5f55 +-------------+-----------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------------+-----------------+------+-----+---------+----------------+ | seq | bigint unsigned | NO | PRI | NULL | auto_increment | | timestp | timestamp | YES | | NULL | | | qq | bigint | YES | | NULL | | | changes | bigint | YES | | NULL | | | balance | bigint | YES | | NULL | | | description | varchar(255) | YES | | NULL | | +-------------+-----------------+------+-----+---------+----------------+ ''' def create_account_sql (): \"\"\"\u521b\u5efa\u91d1\u5e01\u7cfb\u7edfsql\u7684\u51fd\u6570\"\"\" try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`accounts` ( `id` bigint not null, `coin` bigint, `lastSign` date, `fortune` tinyint unsigned, primary key (`id`) ); \"\"\" ) mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`transactions` ( `seq` bigint unsigned not null auto_increment, `timestp` timestamp, `qq` bigint, `changes` bigint, `balance` bigint, `description` varchar(255), primary key (`seq`) );\"\"\" ) except mysql . connector . Error as e : warning ( \"mysql error in create_account_sql: {} \" . format ( e )) except BaseException as e : warning ( \"error in create_account_sql: {} \" . format ( e )) def get_user_coins ( id : int , format = True ): \"\"\"\u67e5\u8be2\u7528\u6237\u91d1\u5e01\u7684\u51fd\u6570 @id: \u7528\u6237QQ\u53f7 @format: \u662f\u5426\u5bf9result/100\u5904\u7406 (\u9ed8\u8ba4\u4e3atrue, \u8868\u793a\u8f93\u51fa\u4e3a\u5904\u7406\u540e\u503c, \u4e3a\u5c0f\u6570\u4e14\u7cbe\u786e\u5230\u5206) @return: if format: \u8fd4\u56de0.01\u6574\u6570\u500d\u7684float, \u5355\u4f4d\u662f\u5143 else: \u8fd4\u56deint, \u5355\u4f4d\u662f\u5206 \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in get_user_coins: id should be int, but got {} \" . format ( id )) return try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"SELECT coin FROM `BOT_DATA`.`accounts` where id= %d \" % id ) result = list ( mycursor ) if len ( result ) == 0 : mycursor . execute ( \"INSERT INTO `BOT_DATA`.`accounts` (id, coin, lastSign) VALUES ( %d , '0', '1980-01-01')\" % id ) return 0 else : return int ( result [ 0 ][ 0 ]) / ( 100 if format else 1 ) except mysql . connector . Error as e : warning ( \"mysql error in get_user_coins: {} \" . format ( e )) except BaseException as e : warning ( \"error in get_user_coins: {} \" . format ( e )) return 0 def update_user_coins ( id : int , append : Union [ int , float ], description : str , format : bool = True ) -> bool : \"\"\"\u66f4\u65b0\u7528\u6237\u91d1\u5e01\u7684\u51fd\u6570 @id: \u7528\u6237\u53f7\u7801, \u5fc5\u987b\u4e3aint @append: \u589e\u52a0\u91d1\u5e01\u6570\u91cf if format: \u5355\u4f4d\u662f\u5143 else: \u5355\u4f4d\u662f\u5206 @format: \u662f\u5426\u5bf9append x 100\u5904\u7406 (\u9ed8\u8ba4\u4e3aTrue, \u8868\u793a\u8f93\u5165\u4e3a\u539f\u59cb\u91d1\u5e01\u503c, \u4e3a\u5c0f\u6570\u4e14\u7cbe\u786e\u5230\u5206) @description: \u6539\u53d8\u539f\u56e0\u63cf\u8ff0 @return: \u662f\u5426\u66f4\u6539\u6210\u529f \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in update_user_coins: id should be int, but got {} \" . format ( id )) return False try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"SELECT coin FROM BOT_DATA.accounts where id= %d \" % id ) except mysql . connector . Error as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False result = list ( mycursor ) num_append = int (( append ) * ( 100 if format else 1 )) if len ( result ) == 0 : try : mycursor . execute ( \"\"\"INSERT INTO BOT_DATA.accounts (id, coin, lastSign) VALUES ( %d , %d , '1980-01-01');\"\"\" % ( id , num_append )) return True except mysql . connector . errors . DatabaseError as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False else : try : result = int ( result [ 0 ][ 0 ]) mycursor . execute ( \"\"\"UPDATE BOT_DATA.accounts SET coin= %d WHERE id= %d ;\"\"\" % ( result + num_append , id )) now = datetime . now () now = now . strftime ( \"%Y-%m- %d %H:%M:%S\" ) mycursor . execute ( \"\"\" INSERT INTO BOT_DATA.transactions (timestp, qq, changes, balance, description) VALUES (' %s ', %d , %d , %d , ' %s '); \"\"\" % ( escape_string ( now ), id , num_append , result + num_append , escape_string ( description ))) return True except mysql . connector . errors . DatabaseError as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False # \u66f4\u65b0\u5931\u8d25 def get_user_transactions ( id : int ) -> list : \"\"\"\u67e5\u8be2\u7528\u6237\u6d88\u8d39\u8bb0\u5f55\u51fd\u6570 @id: \u7528\u6237QQ @return: \u7528\u6237\u6d88\u8d39\u8bb0\u5f55 \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in get_user_transactions: id should be int, but got {} \" . format ( id )) return [] try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"SELECT * FROM BOT_DATA.transactions where qq= %d ORDER BY `seq` desc limit 20;\" % id ) result = list ( mycursor ) return result except mysql . connector . Error as e : warning ( \"sql error in get_user_transactions: {} \" . format ( e )) return [] \u5e94\u7528\u573a\u666f \u8f6e\u76d8\u8d4c \u6d88\u8d39\u8bb0\u5f55\u67e5\u8be2","title":"\u91d1\u5e01\u7cfb\u7edf"},{"location":"api/account-operation/#_1","text":"\u7531\u4e8e bot \u7684\u90e8\u5206\u63d2\u4ef6\u9700\u8981\u6784\u5efa\u4e00\u5957\u5956\u52b1\u673a\u5236\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u5f15\u5165\u91d1\u5e01\u7cfb\u7edf\uff0c\u56e0\u6b64\u5199\u4e86\u4e00\u6574\u5957 API \u8c28\u4f9b\u63d2\u4ef6\u7a0b\u5e8f\u5458\u4f7f\u7528\u3002 1.0.0 \u7248\u672c\u7684\u91d1\u5e01\u7cfb\u7edf\u6709\u4ee5\u4e0b\u51e0\u4e2a\u51fd\u6570\u548c\u529f\u80fd\uff1a \u51fd\u6570\u540d \u529f\u80fd create_account_sql \u521b\u5efa\u91d1\u5e01\u7cfb\u7edf\u7684 sql get_user_coins \u67e5\u8be2\u7528\u6237\u91d1\u5e01 update_user_coins \u66f4\u65b0\u7528\u6237\u91d1\u5e01 get_user_transactions \u67e5\u8be2\u7528\u6237\u6d88\u8d39\u8bb0\u5f55 \u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u53ef\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\uff1a","title":"\u7b80\u4ecb"},{"location":"api/account-operation/#_2","text":"from utils.basicEvent import warning import mysql.connector from datetime import datetime from utils.basicConfigs import sqlConfig from pymysql.converters import escape_string from typing import Union ''' BOT_DATA.accounts \u8d26\u6237 +----------+------------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +----------+------------------+------+-----+---------+-------+ | id | bigint | NO | PRI | NULL | | | coin | bigint | YES | | NULL | | | lastSign | date | YES | | NULL | | | fortune | tinyint unsigned | YES | | NULL | | +----------+------------------+------+-----+---------+-------+ BOT_DATA.transactions \u4ea4\u6613\u8bb0\u5f55 +-------------+-----------------+------+-----+---------+----------------+ | Field | Type | Null | Key | Default | Extra | +-------------+-----------------+------+-----+---------+----------------+ | seq | bigint unsigned | NO | PRI | NULL | auto_increment | | timestp | timestamp | YES | | NULL | | | qq | bigint | YES | | NULL | | | changes | bigint | YES | | NULL | | | balance | bigint | YES | | NULL | | | description | varchar(255) | YES | | NULL | | +-------------+-----------------+------+-----+---------+----------------+ ''' def create_account_sql (): \"\"\"\u521b\u5efa\u91d1\u5e01\u7cfb\u7edfsql\u7684\u51fd\u6570\"\"\" try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`accounts` ( `id` bigint not null, `coin` bigint, `lastSign` date, `fortune` tinyint unsigned, primary key (`id`) ); \"\"\" ) mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`transactions` ( `seq` bigint unsigned not null auto_increment, `timestp` timestamp, `qq` bigint, `changes` bigint, `balance` bigint, `description` varchar(255), primary key (`seq`) );\"\"\" ) except mysql . connector . Error as e : warning ( \"mysql error in create_account_sql: {} \" . format ( e )) except BaseException as e : warning ( \"error in create_account_sql: {} \" . format ( e )) def get_user_coins ( id : int , format = True ): \"\"\"\u67e5\u8be2\u7528\u6237\u91d1\u5e01\u7684\u51fd\u6570 @id: \u7528\u6237QQ\u53f7 @format: \u662f\u5426\u5bf9result/100\u5904\u7406 (\u9ed8\u8ba4\u4e3atrue, \u8868\u793a\u8f93\u51fa\u4e3a\u5904\u7406\u540e\u503c, \u4e3a\u5c0f\u6570\u4e14\u7cbe\u786e\u5230\u5206) @return: if format: \u8fd4\u56de0.01\u6574\u6570\u500d\u7684float, \u5355\u4f4d\u662f\u5143 else: \u8fd4\u56deint, \u5355\u4f4d\u662f\u5206 \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in get_user_coins: id should be int, but got {} \" . format ( id )) return try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"SELECT coin FROM `BOT_DATA`.`accounts` where id= %d \" % id ) result = list ( mycursor ) if len ( result ) == 0 : mycursor . execute ( \"INSERT INTO `BOT_DATA`.`accounts` (id, coin, lastSign) VALUES ( %d , '0', '1980-01-01')\" % id ) return 0 else : return int ( result [ 0 ][ 0 ]) / ( 100 if format else 1 ) except mysql . connector . Error as e : warning ( \"mysql error in get_user_coins: {} \" . format ( e )) except BaseException as e : warning ( \"error in get_user_coins: {} \" . format ( e )) return 0 def update_user_coins ( id : int , append : Union [ int , float ], description : str , format : bool = True ) -> bool : \"\"\"\u66f4\u65b0\u7528\u6237\u91d1\u5e01\u7684\u51fd\u6570 @id: \u7528\u6237\u53f7\u7801, \u5fc5\u987b\u4e3aint @append: \u589e\u52a0\u91d1\u5e01\u6570\u91cf if format: \u5355\u4f4d\u662f\u5143 else: \u5355\u4f4d\u662f\u5206 @format: \u662f\u5426\u5bf9append x 100\u5904\u7406 (\u9ed8\u8ba4\u4e3aTrue, \u8868\u793a\u8f93\u5165\u4e3a\u539f\u59cb\u91d1\u5e01\u503c, \u4e3a\u5c0f\u6570\u4e14\u7cbe\u786e\u5230\u5206) @description: \u6539\u53d8\u539f\u56e0\u63cf\u8ff0 @return: \u662f\u5426\u66f4\u6539\u6210\u529f \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in update_user_coins: id should be int, but got {} \" . format ( id )) return False try : mydb = mysql . connector . connect ( ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () mycursor . execute ( \"SELECT coin FROM BOT_DATA.accounts where id= %d \" % id ) except mysql . connector . Error as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False result = list ( mycursor ) num_append = int (( append ) * ( 100 if format else 1 )) if len ( result ) == 0 : try : mycursor . execute ( \"\"\"INSERT INTO BOT_DATA.accounts (id, coin, lastSign) VALUES ( %d , %d , '1980-01-01');\"\"\" % ( id , num_append )) return True except mysql . connector . errors . DatabaseError as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False else : try : result = int ( result [ 0 ][ 0 ]) mycursor . execute ( \"\"\"UPDATE BOT_DATA.accounts SET coin= %d WHERE id= %d ;\"\"\" % ( result + num_append , id )) now = datetime . now () now = now . strftime ( \"%Y-%m- %d %H:%M:%S\" ) mycursor . execute ( \"\"\" INSERT INTO BOT_DATA.transactions (timestp, qq, changes, balance, description) VALUES (' %s ', %d , %d , %d , ' %s '); \"\"\" % ( escape_string ( now ), id , num_append , result + num_append , escape_string ( description ))) return True except mysql . connector . errors . DatabaseError as e : warning ( \"sql error in update_user_coins: {} \" . format ( e )) return False # \u66f4\u65b0\u5931\u8d25 def get_user_transactions ( id : int ) -> list : \"\"\"\u67e5\u8be2\u7528\u6237\u6d88\u8d39\u8bb0\u5f55\u51fd\u6570 @id: \u7528\u6237QQ @return: \u7528\u6237\u6d88\u8d39\u8bb0\u5f55 \"\"\" if isinstance ( id , str ): try : id = int ( id ) except BaseException as e : warning ( \"meet exception in get_user_transactions: id should be int, but got {} \" . format ( id )) return [] try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"SELECT * FROM BOT_DATA.transactions where qq= %d ORDER BY `seq` desc limit 20;\" % id ) result = list ( mycursor ) return result except mysql . connector . Error as e : warning ( \"sql error in get_user_transactions: {} \" . format ( e )) return []","title":"\u4ee3\u7801\u5206\u6790"},{"location":"api/account-operation/#_3","text":"\u8f6e\u76d8\u8d4c \u6d88\u8d39\u8bb0\u5f55\u67e5\u8be2","title":"\u5e94\u7528\u573a\u666f"},{"location":"api/auth-config/","text":"\u4ee3\u7801\u5206\u6790 def createGlobalConfig (): \"\"\"\u521b\u5efaglobal config\u7684sql table\"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mydb . autocommit = True mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`globalConfig` ( `groupId` bigint not null, `groupConfig` json, `groupAdmins` json, primary key (`groupId`) );\"\"\" ) def readGlobalConfig ( groupId : Union [ None , int ], pluginName : str ) -> Union [ dict , Any , None ]: \"\"\"\u8bfbglobal config @groupId if None, then read add groups config elif int, read the specific group config else: warning @pluginName like 'test1.enable' or 'test1' \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () pluginName = escape_string ( pluginName ) if groupId == None : result = {} try : mycursor . execute ( \"SELECT groupId, json_extract(groupConfig,'$. %s ') from BOT_DATA.globalConfig\" % pluginName ) except mysql . connector . Error as e : warning ( \"error in readGlobalConfig: {} \" . format ( e )) return None for grpId , groupConfig in list ( mycursor ): if groupConfig != None : result [ grpId ] = json . loads ( groupConfig ) return result elif isinstance ( groupId , int ): result = {} try : mycursor . execute ( \"SELECT groupId, json_extract(groupConfig, '$. %s ') from BOT_DATA.globalConfig where groupId = %d \" % ( pluginName , groupId )) except mysql . connector . Error as e : warning ( \"error in readGlobalConfig: {} \" . format ( e )) return None for grpId , groupConfig in list ( mycursor ): if groupConfig != None : result [ grpId ] = json . loads ( groupConfig ) if len ( result ) == 0 : return None else : return result [ groupId ] else : warning ( \"unknow groupId type in readGlobalConfig: groupId = {} \" . format ( groupId )) return None # update BOT_DATA.test set groupConfig=json_set(groupConfig, '$.test1.enable', False) where groupId=1234; def writeGlobalConfig ( groupId : Union [ None , int ], pluginName : str , value : Any ): \"\"\"\u5199global config @groupId if None, then read all groups' config elif int, read the specific group config else: warning @pluginName like 'test1.enable' or 'test1' @value \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () pluginName = escape_string ( pluginName ) if groupId == None : try : mycursor . execute ( \"update BOT_DATA.globalConfig set groupConfig=json_set(groupConfig, '$. %s ', cast(' %s ' as json))\" % ( pluginName , json . dumps ( value ))) except mysql . connector . Error as e : warning ( \"error in writeGlobalConfig: {} \" . format ( e )) elif isinstance ( groupId , int ): try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupConfig=json_set(groupConfig, '$. %s ', cast(' %s ' as json)) where groupId= %d \" % ( pluginName , json . dumps ( value ), groupId )) except mysql . connector . Error as e : warning ( \"error in writeGlobalConfig: {} \" . format ( e )) else : warning ( \"unknow groupId type in writeGlobalConfig: groupId = {} \" . format ( groupId )) mydb . commit () def getGroupAdmins ( groupId : int ) -> List [ int ]: \"\"\"\u83b7\u53d6\u7fa4bot\u7ba1\u7406\u5217\u8868 @groupId: \u7fa4\u53f7 @return: \u7fa4bot\u7ba1\u7406\u5458QQ\u53f7\u5217\u8868 \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"select groupAdmins from BOT_DATA.globalConfig where groupId = %s \" % ( groupId )) result = list ( mycursor ) if len ( result ) <= 0 : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mydb . commit () return [] else : result = json . loads ( result [ 0 ][ 0 ]) if not isinstance ( result , list ) or any ([ not isinstance ( x , int ) for x in result ]): warning ( 'error admin type, groupId = %d ' % groupId ) return [] return result except mysql . connector . Error as e : warning ( \"error in getGroupAdmins: {} \" . format ( e )) return [] def addGroupAdmin ( groupId : int , adminId : int ): \"\"\"\u6dfb\u52a0\u7fa4bot\u7ba1\u7406 @groupId: \u7fa4\u53f7 @adminId: \u65b0\u6dfb\u52a0\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7 \"\"\" if not isinstance ( groupId , int ) or not isinstance ( adminId , int ): warning ( \"error groupId type or adminId type in addGroupAdmin: groupId = {} , adminId = {} \" . format ( groupId , adminId )) return mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupAdmins=json_array_append(groupAdmins,'$', %d ) where groupId= %d ;\" % ( adminId , groupId )) mydb . commit () except mysql . connector . Error as e : warning ( \"error in addGroupAdmin: {} \" . format ( e )) def setGroupAdmin ( groupId : int , adminIds : List [ int ]): \"\"\"\u8bbe\u7f6e\u7fa4bot\u7ba1\u7406\u4e3a\u67d0\u4e2alist @groupId: \u7fa4\u53f7 @adminIds: \u66f4\u6539\u540e\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7\u5217\u8868 \"\"\" if not isinstance ( adminIds , list ) or any ([ not isinstance ( x , int ) for x in adminIds ]): warning ( 'error admin type, groupId = %d ' % groupId ) return mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupAdmins=' %s ' where groupId= %d ;\" % ( json . dumps ( adminIds ), groupId )) mydb . commit () except mysql . connector . Error as e : warning ( \"error in setGroupAdmin: {} \" . format ( e )) def delGroupAdmin ( groupId : int , adminId : int ): \"\"\"\u5220\u9664\u7fa4bot\u7ba1\u7406\u5458 @groupId: \u7fa4\u53f7 @adminId: \u8981\u5220\u9664\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7 \"\"\" if not isinstance ( groupId , int ) or not isinstance ( adminId , int ): warning ( \"error groupId type or adminId type in delGroupAdmin: groupId = {} , adminId = {} \" . format ( groupId , adminId )) return groupAdmins = getGroupAdmins ( groupId ) if groupAdmins == None : warning ( \"groupAdmins is None at delGroupAdmin\" ) return groupAdmins = set ( groupAdmins ) if adminId not in groupAdmins : warning ( \"id = ' %d ' not in admins at delGroupAdmin\" % adminId ) return groupAdmins . remove ( adminId ) setGroupAdmin ( groupId , list ( groupAdmins ))","title":"\u9274\u6743\u4e0e\u63d2\u4ef6\u914d\u7f6e"},{"location":"api/auth-config/#_1","text":"def createGlobalConfig (): \"\"\"\u521b\u5efaglobal config\u7684sql table\"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mydb . autocommit = True mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`globalConfig` ( `groupId` bigint not null, `groupConfig` json, `groupAdmins` json, primary key (`groupId`) );\"\"\" ) def readGlobalConfig ( groupId : Union [ None , int ], pluginName : str ) -> Union [ dict , Any , None ]: \"\"\"\u8bfbglobal config @groupId if None, then read add groups config elif int, read the specific group config else: warning @pluginName like 'test1.enable' or 'test1' \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () pluginName = escape_string ( pluginName ) if groupId == None : result = {} try : mycursor . execute ( \"SELECT groupId, json_extract(groupConfig,'$. %s ') from BOT_DATA.globalConfig\" % pluginName ) except mysql . connector . Error as e : warning ( \"error in readGlobalConfig: {} \" . format ( e )) return None for grpId , groupConfig in list ( mycursor ): if groupConfig != None : result [ grpId ] = json . loads ( groupConfig ) return result elif isinstance ( groupId , int ): result = {} try : mycursor . execute ( \"SELECT groupId, json_extract(groupConfig, '$. %s ') from BOT_DATA.globalConfig where groupId = %d \" % ( pluginName , groupId )) except mysql . connector . Error as e : warning ( \"error in readGlobalConfig: {} \" . format ( e )) return None for grpId , groupConfig in list ( mycursor ): if groupConfig != None : result [ grpId ] = json . loads ( groupConfig ) if len ( result ) == 0 : return None else : return result [ groupId ] else : warning ( \"unknow groupId type in readGlobalConfig: groupId = {} \" . format ( groupId )) return None # update BOT_DATA.test set groupConfig=json_set(groupConfig, '$.test1.enable', False) where groupId=1234; def writeGlobalConfig ( groupId : Union [ None , int ], pluginName : str , value : Any ): \"\"\"\u5199global config @groupId if None, then read all groups' config elif int, read the specific group config else: warning @pluginName like 'test1.enable' or 'test1' @value \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () pluginName = escape_string ( pluginName ) if groupId == None : try : mycursor . execute ( \"update BOT_DATA.globalConfig set groupConfig=json_set(groupConfig, '$. %s ', cast(' %s ' as json))\" % ( pluginName , json . dumps ( value ))) except mysql . connector . Error as e : warning ( \"error in writeGlobalConfig: {} \" . format ( e )) elif isinstance ( groupId , int ): try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupConfig=json_set(groupConfig, '$. %s ', cast(' %s ' as json)) where groupId= %d \" % ( pluginName , json . dumps ( value ), groupId )) except mysql . connector . Error as e : warning ( \"error in writeGlobalConfig: {} \" . format ( e )) else : warning ( \"unknow groupId type in writeGlobalConfig: groupId = {} \" . format ( groupId )) mydb . commit () def getGroupAdmins ( groupId : int ) -> List [ int ]: \"\"\"\u83b7\u53d6\u7fa4bot\u7ba1\u7406\u5217\u8868 @groupId: \u7fa4\u53f7 @return: \u7fa4bot\u7ba1\u7406\u5458QQ\u53f7\u5217\u8868 \"\"\" mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"select groupAdmins from BOT_DATA.globalConfig where groupId = %s \" % ( groupId )) result = list ( mycursor ) if len ( result ) <= 0 : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mydb . commit () return [] else : result = json . loads ( result [ 0 ][ 0 ]) if not isinstance ( result , list ) or any ([ not isinstance ( x , int ) for x in result ]): warning ( 'error admin type, groupId = %d ' % groupId ) return [] return result except mysql . connector . Error as e : warning ( \"error in getGroupAdmins: {} \" . format ( e )) return [] def addGroupAdmin ( groupId : int , adminId : int ): \"\"\"\u6dfb\u52a0\u7fa4bot\u7ba1\u7406 @groupId: \u7fa4\u53f7 @adminId: \u65b0\u6dfb\u52a0\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7 \"\"\" if not isinstance ( groupId , int ) or not isinstance ( adminId , int ): warning ( \"error groupId type or adminId type in addGroupAdmin: groupId = {} , adminId = {} \" . format ( groupId , adminId )) return mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupAdmins=json_array_append(groupAdmins,'$', %d ) where groupId= %d ;\" % ( adminId , groupId )) mydb . commit () except mysql . connector . Error as e : warning ( \"error in addGroupAdmin: {} \" . format ( e )) def setGroupAdmin ( groupId : int , adminIds : List [ int ]): \"\"\"\u8bbe\u7f6e\u7fa4bot\u7ba1\u7406\u4e3a\u67d0\u4e2alist @groupId: \u7fa4\u53f7 @adminIds: \u66f4\u6539\u540e\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7\u5217\u8868 \"\"\" if not isinstance ( adminIds , list ) or any ([ not isinstance ( x , int ) for x in adminIds ]): warning ( 'error admin type, groupId = %d ' % groupId ) return mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () try : mycursor . execute ( \"insert ignore into BOT_DATA.globalConfig(groupId, groupConfig, groupAdmins) values ( %d , ' {} ', '[]')\" % groupId ) mycursor . execute ( \"update BOT_DATA.globalConfig set groupAdmins=' %s ' where groupId= %d ;\" % ( json . dumps ( adminIds ), groupId )) mydb . commit () except mysql . connector . Error as e : warning ( \"error in setGroupAdmin: {} \" . format ( e )) def delGroupAdmin ( groupId : int , adminId : int ): \"\"\"\u5220\u9664\u7fa4bot\u7ba1\u7406\u5458 @groupId: \u7fa4\u53f7 @adminId: \u8981\u5220\u9664\u7684\u7fa4bot\u7ba1\u7406\u5458QQ\u53f7 \"\"\" if not isinstance ( groupId , int ) or not isinstance ( adminId , int ): warning ( \"error groupId type or adminId type in delGroupAdmin: groupId = {} , adminId = {} \" . format ( groupId , adminId )) return groupAdmins = getGroupAdmins ( groupId ) if groupAdmins == None : warning ( \"groupAdmins is None at delGroupAdmin\" ) return groupAdmins = set ( groupAdmins ) if adminId not in groupAdmins : warning ( \"id = ' %d ' not in admins at delGroupAdmin\" % adminId ) return groupAdmins . remove ( adminId ) setGroupAdmin ( groupId , list ( groupAdmins ))","title":"\u4ee3\u7801\u5206\u6790"},{"location":"api/draw-card/","text":"\u90e8\u5206\u529f\u80fd\u573a\u666f\u4e0b\uff0cBot\u7684\u56de\u7b54\u5305\u542b\u8f83\u591a\u6587\u5b57\u548c\u63d2\u56fe\uff08\u5982\"\u6bcf\u65e5\u65b0\u95fb\"\uff0c\"\u529f\u80fd\u5217\u8868\"\uff09\uff0c\u4e3a\u907f\u514d\u53d1\u9001\u5927\u91cf\u6587\u5b57\u7684\u98ce\u63a7\u98ce\u9669\u3001\u7f8e\u5316\u56de\u590d\u4fe1\u606f\u7684\u5c55\u793a\u5f62\u5f0f\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5185\u5bb9\u8f6c\u5316\u4e3a\u4e00\u5f20\u56fe\u7247\u53d1\u9001\u3002Little-UNIkeEN-Bot \u57fa\u4e8e pillow \u5c01\u88c5\u4e86 responseImage \u5e93\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u5feb\u901f\u6784\u5efa\u6b64\u7c7b\u56fe\u7247\uff0c\u4ee5\u4e0b\u662f\u4e24\u4e2a\u793a\u4f8b\u3002 \u5bfc\u5165 responseImage \u5e93 responseImage \u5e93\u4f4d\u4e8e ./utils/ \u76ee\u5f55\u4e0b\u3002\u5728\u63d2\u4ef6\u4ee3\u7801\u4e2d\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u5bfc\u5165\u6b64\u5e93\uff1a from utils.responseImage import * \u63d0\u793a \u5728\u4f7f\u7528\u672c\u5e93\u524d\uff0c\u8bf7\u786e\u4fdd ./resources/fonts/ \u76ee\u5f55\u4e0b \u6c49\u4eea\u6587\u9ed1.ttf \u548c SourceHanSansCN-Medium.otf \u5b57\u4f53\u6587\u4ef6\u5b58\u653e\u5b8c\u6574\uff0c\u5426\u5219\u60a8\u5c06\u65e0\u6cd5\u4f7f\u7528\u9ed8\u8ba4\u5b57\u4f53\u3002 \u5982\u8981\u66f4\u6362\u9ed8\u8ba4\u5b57\u4f53\u6216\u5b57\u4f53\u5b58\u653e\u5730\u5740\uff0c\u8bf7\u4fee\u6539\u5e93\u4e2d\u5168\u5c40\u5e38\u91cf\u4ee3\u7801\u3002 \u521b\u5efa\u56fe\u7247 \u672c\u5e93\u7684\u6240\u6709\u64cd\u4f5c\u5747\u57fa\u4e8e ResponseImage \u7c7b\u5b8c\u6210\uff0c \u65b0\u5efa\u4e00\u4e2a ResponseImage \u7c7b\u7684\u5b9e\u4f8b\u4ee5\u521b\u5efa\u4e00\u5f20\u56fe\u7247 \u3002 \u793a\u4f8b\u4ee3\u7801\uff1a img = ResponseImage ( theme = 'unicorn' , title = '\u5e2e\u52a9\u5217\u8868' , titleColor = ( 165 , 255 , 255 , 255 ), primaryColor = PALETTE_SJTU_RED , footer = '\u66f4\u65b0\u65e5\u671f 2022/08/30' , layout = 'two-column' ) \u53ef\u9009\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 theme \u4e3b\u9898 unicorn \u8868\u793a\u4f7f\u7528\u9ed8\u8ba4\u4e3b\u9898 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a'unicorn' autoSize \u81ea\u52a8\u8c03\u6574\u5927\u5c0f bool\u578b\u53d8\u91cf \u8868\u793a\u662f\u5426\u6839\u636e\u4fe1\u606f\u5185\u5bb9\u8c03\u6574\u5927\u5c0f \u53ef\u9009\u9ed8\u8ba4\u4e3aTrue layout \u5e03\u5c40\u65b9\u5f0f normal \u8868\u793a\u5355\u680f\u5e03\u5c40 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u5355\u680f two-column \u8868\u793a\u53cc\u680f\u5e03\u5c40 height \u56fe\u7247\u9ad8\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u9ad8\u5ea6 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a800\uff0cautoSize\u4e3aTrue\u65f6\u65e0\u6548 width \u56fe\u7247\u5bbd\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u5bbd\u5ea6 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a880\uff0cautoSize\u4e3aTrue\u65f6\uff0c\u5c06\u56fa\u5b9awidth\u81ea\u52a8\u8c03\u6574\u9ad8\u5ea6 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u663e\u793a\u5728\u56fe\u7247\u9876\u90e8\u7684\u6807\u9898 \u53ef\u9009\uff0c\u4e0d\u652f\u6301\u6362\u884c\uff0c\u9ed8\u8ba4\u4e3a'\u54cd\u5e94\u5361\u7247' titleColor \u6807\u9898\u6846\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u6807\u9898\u6846\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u82e5\u7f3a\u7701\uff0c\u5219\u4e0eprimaryColor\u4e00\u81f4 primaryColor \u4e3b\u9898\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u4e3b\u9898\u8272\u7684RGBA\u503c\uff0c\u5c06\u5e94\u7528\u4e8e\u524d\u666f\u5361\u7247\u5173\u952e\u53e5\u989c\u8272 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u84dd\u8272 backColor \u80cc\u666f\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a(240,240,240,255) footer \u9875\u811a str\u578b\u53d8\u91cf \u8868\u793a\u663e\u793a\u5728\u56fe\u7247\u5e95\u90e8\u7684\u9875\u811a \u53ef\u9009\uff0c\u4e0d\u652f\u6301\u6362\u884c\uff0c\u9ed8\u8ba4\u4e3a\u7a7a cardTitleFont \u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009 cardSubtitleFont \u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u548c\u5173\u952e\u53e5\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009 cardBodyFont \u524d\u666f\u5361\u7247\u6b63\u6587\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009 \u6dfb\u52a0\u524d\u666f\u5361\u7247 ResponseImage \u5b9e\u4f8b\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5bb9\u5668\u3002\u5982\u8981\u8ba9\u56fe\u7247\u5c55\u793a\u5404\u7c7b\u4fe1\u606f\uff0c\u4f60\u9700\u8981\u5411\u5b9e\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\"\u524d\u666f\u5361\u7247\"\u3002 \"\u524d\u666f\u5361\u7247\"\u673a\u5236\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5c06\u5404\u7c7b\u4fe1\u606f\u5206\u7ec4\u5c55\u793a\u3002 addCard() \u6dfb\u52a0\u5361\u7247 \u4f7f\u7528 ResponseImage.addCard() \u51fd\u6570\uff0c\u5411 ResponseImage \u5b9e\u4f8b\u6dfb\u52a0\u5355\u4e2a\u524d\u666f\u5361\u7247\u3002\u5361\u7247\u5728\u56fe\u7247\u4e2d\u6309\u6dfb\u52a0\u5361\u7247\u7684\u987a\u5e8f\u663e\u793a\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a img . addCard ( ResponseImage . NormalCard ( title = '\u539f\u795e2.1\u7248\u672c' , subtitle = '\u300c\u97f6\u5149\u629a\u6708\uff0c\u5929\u4e0b\u4eba\u95f4\u300dPV\u53f0\u8bcd' , body = \"\"\"\u98ce\u96e8\u72b9\u795d\uff0c\u5c71\u6d77\u540c\u6b22\uff0c\u662f\u627f\u5929\u5730\u4e4b\u4f51\uff1b \u661f\u79fb\u6597\u8f6c\uff0c\u6ca7\u6d77\u6851\u7530\uff0c\u70df\u706b\u4eba\u95f4\u4f9d\u65e7\uff1b \u529f\u540d\u5728\u6211\uff0c\u767e\u5c81\u5343\u79cb\uff0c\u6bcb\u5fd8\u79c9\u70db\u591c\u6e38\uff1b \u53e4\u4eca\u8bf8\u4e8b\uff0c\u6fc0\u8361\u4e2d\u6d41\uff0c\u5b8f\u56fe\u5f85\u770b\u65b0\u79c0\u3002\"\"\" , icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAA...' , subtitleFontColor = PALETTE_GREEN , backColor = PALETTE_LIGHTGREEN ) ) \u5e93\u9884\u8bbe\u4e86\u591a\u79cd\u5361\u7247\u7c7b\u578b\u53ef\u4f9b\u6dfb\u52a0\uff1a NormalCard \u6807\u51c6\u7c7b\u578b\u524d\u666f\u5361\u7247\uff0c\u5185\u5bb9\u5de6\u5bf9\u9f50\u3002 \u53ef\u4f9b\u7f16\u8f91\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6807\u9898 \u53ef\u9009 subtitle \u526f\u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u526f\u6807\u9898 \u53ef\u9009 keyword \u5173\u952e\u53e5 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5173\u952e\u53e5 \u53ef\u9009\uff0c\u5173\u952e\u53e5\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u56fe\u7247\u4e3b\u9898\u8272 body \u6b63\u6587 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6b63\u6587 \u53ef\u9009 icon \u56fe\u6807 str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u9760\u5de6\u663e\u793a\u7684\u56fe\u6807 \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u5c06\u81ea\u52a8\u7f29\u653e\u4e3a90x90\u5927\u5c0f\u663e\u793a titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . NormalCard ( title = '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5de6\u5bf9\u9f50\u663e\u793a' , icon = '...' , ) ) NoticeCard \u901a\u77e5\u7c7b\u578b\u524d\u666f\u5361\u7247\uff0c\u5185\u5bb9\u5c45\u4e2d\u663e\u793a\u3002 \u53ef\u4f9b\u7f16\u8f91\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6807\u9898 \u53ef\u9009 subtitle \u526f\u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u526f\u6807\u9898 \u53ef\u9009 keyword \u5173\u952e\u53e5 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5173\u952e\u53e5 \u53ef\u9009\uff0c\u5173\u952e\u53e5\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u56fe\u7247\u4e3b\u9898\u8272 body \u6b63\u6587 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6b63\u6587 \u53ef\u9009 illustration \u914d\u56fe str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u5e95\u90e8\u663e\u793a\u7684\u914d\u56fe \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u82e5\u56fe\u7247\u8fc7\u5927\uff0c\u5c06\u81ea\u52a8\u7f29\u653e\u4ee5\u9002\u914d\u5361\u7247\u5bbd\u5ea6 titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . NoticeCard ( title = 'NoticeCard \\n [title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5c45\u4e2d\u663e\u793a' , icon = 'https://picx.zhimg.com/v2-7d1069f8beeeae09f0d26812941cebe0_1440w.jpg?source=172ae18b' , ) ) RichContentCard \u5bcc\u5185\u5bb9\u590d\u5408\u7c7b\u578b\u5361\u7247\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u524d\u666f\u5361\u7247\u4e2d\u663e\u793a\u590d\u5408\u683c\u5f0f\u7684\u591a\u884c\u6587\u672c\u3002 \u6587\u672c\u5185\u5bb9\u4ee5\u5217\u8868\u7684\u5f62\u5f0f\u8f93\u5165\uff0c\u5217\u8868\u4e2d\u6bcf\u9879\u4e3a\u4e00\u4e2a\u5f62\u5982 (\u683c\u5f0f\uff0c\u5185\u5bb9) \u7684\u5143\u7ec4\uff0c\u5176\u4e2d\"\u683c\u5f0f\"\u5b57\u6bb5\u53ef\u9009\uff1a title \uff0c subtitle \uff0c keyword \uff0c body \uff0c separator \u3002\u5177\u4f53\u5e94\u7528\u53c2\u89c1\u4e0b\u65b9\u793a\u4f8b\u4ee3\u7801\u3002 \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 raw_content \u5185\u5bb9 list\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5185\u5bb9 \u53ef\u9009\uff0c\u4ee5\u5217\u8868\u5d4c\u5957\u5143\u7ec4\u5f62\u5f0f\u8f93\u5165 icon \u56fe\u6807 str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u9760\u5de6\u663e\u793a\u7684\u56fe\u6807 \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u5c06\u81ea\u52a8\u7f29\u653e\u4e3a90x90\u5927\u5c0f\u663e\u793a titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . RichContentCard ( raw_content = [ ( 'title' , 'RichContentCard' ), ( 'keyword' , '\u5f26\u6708\u821e\u6b65' ), ( 'body' , '\u666e\u901a\u653b\u51fb\uff1a\u53ef\u4ee5\u8fdb\u884c\u81f3\u591a\u4e09\u6bb5\u7684\u8fde\u7eed\u5251\u51fb\uff1b\u91cd\u51fb\u6d88\u8017\u4e00\u5b9a\u4f53\u529b\u8fdb\u884c\u4e00\u6b21\u65cb\u8f6c\u65a9\u51fb\uff1b\u4e0b\u843d\u653b\u51fb\uff0c\u4ece\u7a7a\u4e2d\u4e0b\u5760\u51b2\u51fb\u5730\u9762\uff0c\u653b\u51fb\u4e0b\u843d\u8def\u5f84\u4e0a\u7684\u654c\u4eba\uff0c\u5e76\u5728\u843d\u5730\u65f6\u9020\u6210\u8303\u56f4\u4f24\u5bb3\u3002' ), ( 'separator' ,), ( 'keyword' , '\u4e03\u57df\u821e\u6b65' ), ( 'subtitle' , 'E\u6280\u80fd' ), ( 'body' , '\u5c55\u5f00\u201d\u7fe9\u8f6c\u201d\u72b6\u6001\uff0c\u57fa\u4e8e\u59ae\u9732\u7684\u751f\u547d\u503c\u4e0a\u9650\u5bf9\u8eab\u8fb9\u7684\u654c\u4eba\u9020\u6210\u6c34\u5143\u7d20\u4f24\u5bb3\u3002' ), ( 'separator' ,), ( 'keyword' , '\u6d6e\u83b2\u821e\u6b65 \u8fdc\u68a6\u8046\u6cc9' ), ( 'subtitle' , 'Q\u6280\u80fd' ), ( 'body' , '\u57fa\u4e8e\u59ae\u9732\u7684\u751f\u547d\u503c\u4e0a\u9650\uff0c\u9020\u6210\u6c34\u5143\u7d20\u8303\u56f4\u4f24\u5bb3\uff0c\u5e76\u4e3a\u547d\u4e2d\u7684\u654c\u4eba\u65bd\u52a0\u201c\u6c34\u4e16\u6d41\u6c94\u201d\u72b6\u6001\uff0c\u77ed\u6682\u95f4\u9694\u540e\uff0c\u5904\u4e8e\u201c\u6c38\u4e16\u6ce8\u6c94\u201d\u72b6\u6001\u4e0b\u7684\u654c\u4eba\u5c06\u53d7\u5230\u6c34\u5143\u7d20\u4f24\u5bb3\u3002' ), ], icon = 'https://gimg2.baidu.com/image_search/src=http%3A %2F%2F imgo.hackhome.com %2F img2022 %2F 7 %2F 5 %2F 11 %2F 23040603.jpg&refer=http%3A %2F%2F imgo.hackhome.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1667132746&t=a133591be6a3a16de33e20c8989f424c' ) ) BlankCard \u7a7a\u767d\u5361\u7247\uff0c\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 size \u9ad8\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u7684\u9ad8\u5ea6 (\u4e0d\u542b\u8fb9\u6846\u548c\u95f4\u8ddd) \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a0 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 addCardList() \u6dfb\u52a0\u5361\u7247\u5217\u8868 \u4f7f\u7528 ResponseImage.addCardList() \u51fd\u6570\uff0c\u53ef\u4ee5\u4ee5\u5217\u8868\u5f62\u5f0f\u4e00\u6b21\u6dfb\u52a0\u591a\u4e2a\u524d\u666f\u5361\u7247\uff0c\u5361\u7247\u7c7b\u578b\u540c\u4e0a\u3002 \u4f7f\u7528\u5b57\u5178\u7c7b\u578b\u6dfb\u52a0\u5361\u7247 \u9664\u4f7f\u7528\u5f62\u5982 NormalCard \u7b49\u7c7b\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b57\u5178\u5f62\u5f0f\u6dfb\u52a0\u5361\u7247\u6570\u636e\uff0c\u5b57\u5178\u7684 style \u952e\u503c\u5fc5\u9009\uff0c\u8868\u793a\u5361\u7247\u7c7b\u578b\u3002\u4ee5\u4e0b\u4e24\u6bb5\u4ee3\u7801\u7684\u6548\u679c\u76f8\u540c\uff1a img . addCard ( ResponseImage . NormalCard ( title = '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5de6\u5bf9\u9f50\u663e\u793a' , icon = '...' , ) ) img . addCard ( { 'style' : 'normal' , 'title' : '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , 'subtitle' : '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , 'keyword' : '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , 'body' : '''[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \u5de6\u5bf9\u9f50\u663e\u793a''' , 'icon' : '...' } ) \u6ce8\u610f \u4f7f\u7528\u5b57\u5178\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u6dfb\u52a0\u5361\u7247\uff0c\u597d\u5904\u662f\u65b9\u4fbf\u4fee\u6539\u5361\u7247\u7c7b\u578b\uff0c\u7f3a\u70b9\u662f\u6ca1\u6709\u4ee3\u7801\u63d0\u793a\u3001\u5bb9\u6613\u6253\u9519\u5b57\u6bb5\u540d\u79f0\uff0c\u6240\u4ee5\uff0c\u8bf7\u5c0f\u5fc3\u68c0\u67e5\u5b57\u5178\u4e2d\u7684\u952e\uff01 generateImage() \u751f\u6210\u5e76\u4fdd\u5b58 \u4f7f\u7528 ResponseImage.generateImage(savePath) \u51fd\u6570\u751f\u6210\u56fe\u7247\u5e76\u4fdd\u5b58\u56fe\u7247\u5230\u786c\u76d8\u3002 \u51fd\u6570\u8fd4\u56de\u503c\u662f\u4e00\u4e2a PIL.Image \u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u5bf9\u6b64\u5bf9\u8c61\u4f7f\u7528 pillow \u5e93\u7ee7\u7eed\u7f16\u8f91\u3002 \u51fd\u6570\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 savePath \u4fdd\u5b58\u5730\u5740 str\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u7684\u4fdd\u5b58\u5730\u5740 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u7a7a (\u4e0d\u4fdd\u5b58) getBlankCoord() \u83b7\u53d6\u7a7a\u767d\u5361\u7247\u5750\u6807 \u4f7f\u7528 ResponseImage.getBlankCoord() \u83b7\u5f97 BlankCard \u7c7b\u578b\u5361\u7247\u7684\u4f4d\u7f6e\u3002 \u51fd\u6570\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u6bcf\u9879\u662f\u4e00 BlankCard \u7c7b\u578b\u5361\u7247\u56db\u89d2\u7684\u5750\u6807\u3002\u4f7f\u7528\u6b64\u5750\u6807\uff0c\u4f60\u53ef\u4ee5\u5728\u6dfb\u52a0\u7684\u7a7a\u767d\u5361\u7247\u5904\u7ed8\u5236\u3002 \u5e38\u91cf\u5217\u8868 \u5e93\u4e2d\u9884\u8bbe\u4e86\u4e00\u4e9b\u989c\u8272\u5e38\u91cf\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u7edf\u4e00\u989c\u8272 \u6807\u51c6\u989c\u8272\u5e38\u91cf \u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u793a\u4f8b PALETTE_BLACK \u9ed1\u8272 (0, 0, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_WHITE \u767d\u8272 (255, 255, 255, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY \u7070\u8272 (158, 158, 158, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREY_SUBTITLE \u7070\u8272(\u526f\u6807\u9898) (95, 95, 95, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREY_CONTENT \u7070\u8272(\u6b63\u6587) (125, 125, 125, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY_BORDER \u7070\u8272(\u8fb9\u6846) (213, 213, 213, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY_BACK \u7070\u8272(\u80cc\u666f) (240, 240, 240, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_RED \u7ea2\u8272 (221, 0, 38, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTRED \u6d45\u7ea2\u8272 (255, 232, 236, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREEN \u7eff\u8272 (0, 191, 48, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTGREEN \u6d45\u7eff\u8272 (219, 255, 228, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_ORANGE \u6a59\u8272 (244, 149, 4, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTORANGE \u6d45\u6a59\u8272 (254, 232, 199, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_BLUE \u84dd\u8272 (32, 131, 197, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTBLUE \u6d45\u84dd\u8272 (9, 188, 211, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_CYAN \u9752\u8272 (0, 150, 136, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_INDIGO \u975b\u84dd\u8272 (69, 84, 164, 255) \u793a\u4f8b\u6587\u5b57 SJTU\u89c6\u89c9\u6807\u51c6\u8272\u5e38\u91cf \u4ee5\u4e0b\u989c\u8272\u6ee1\u8db3\u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\u89c6\u89c9\u8bc6\u522b\u7cfb\u7edf\u7684\u989c\u8272\u6807\u51c6 \u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u793a\u4f8b PALETTE_SJTU_RED \u4ea4\u5927\u7ea2 (200, 22, 30, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_DARKRED \u4ea4\u5927\u6697\u7ea2 (167, 32, 56, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_ORANGE \u4ea4\u5927\u6a59 (240, 131, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_YELLOW \u4ea4\u5927\u9ec4 (253, 208, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_BLUE \u4ea4\u5927\u84dd (0, 134, 209, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_DARKBLUE \u4ea4\u5927\u6697\u84dd (0, 64, 152, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_GREEN \u4ea4\u5927\u7eff (51, 141, 39, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_CYAN \u4ea4\u5927\u9752 (0, 81, 78, 255) \u793a\u4f8b\u6587\u5b57","title":"\u54cd\u5e94\u5361\u7247\u7ed8\u5236"},{"location":"api/draw-card/#responseimage","text":"responseImage \u5e93\u4f4d\u4e8e ./utils/ \u76ee\u5f55\u4e0b\u3002\u5728\u63d2\u4ef6\u4ee3\u7801\u4e2d\u4f7f\u7528\u5982\u4e0b\u4ee3\u7801\u5bfc\u5165\u6b64\u5e93\uff1a from utils.responseImage import * \u63d0\u793a \u5728\u4f7f\u7528\u672c\u5e93\u524d\uff0c\u8bf7\u786e\u4fdd ./resources/fonts/ \u76ee\u5f55\u4e0b \u6c49\u4eea\u6587\u9ed1.ttf \u548c SourceHanSansCN-Medium.otf \u5b57\u4f53\u6587\u4ef6\u5b58\u653e\u5b8c\u6574\uff0c\u5426\u5219\u60a8\u5c06\u65e0\u6cd5\u4f7f\u7528\u9ed8\u8ba4\u5b57\u4f53\u3002 \u5982\u8981\u66f4\u6362\u9ed8\u8ba4\u5b57\u4f53\u6216\u5b57\u4f53\u5b58\u653e\u5730\u5740\uff0c\u8bf7\u4fee\u6539\u5e93\u4e2d\u5168\u5c40\u5e38\u91cf\u4ee3\u7801\u3002","title":"\u5bfc\u5165 responseImage \u5e93"},{"location":"api/draw-card/#_1","text":"\u672c\u5e93\u7684\u6240\u6709\u64cd\u4f5c\u5747\u57fa\u4e8e ResponseImage \u7c7b\u5b8c\u6210\uff0c \u65b0\u5efa\u4e00\u4e2a ResponseImage \u7c7b\u7684\u5b9e\u4f8b\u4ee5\u521b\u5efa\u4e00\u5f20\u56fe\u7247 \u3002 \u793a\u4f8b\u4ee3\u7801\uff1a img = ResponseImage ( theme = 'unicorn' , title = '\u5e2e\u52a9\u5217\u8868' , titleColor = ( 165 , 255 , 255 , 255 ), primaryColor = PALETTE_SJTU_RED , footer = '\u66f4\u65b0\u65e5\u671f 2022/08/30' , layout = 'two-column' ) \u53ef\u9009\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 theme \u4e3b\u9898 unicorn \u8868\u793a\u4f7f\u7528\u9ed8\u8ba4\u4e3b\u9898 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a'unicorn' autoSize \u81ea\u52a8\u8c03\u6574\u5927\u5c0f bool\u578b\u53d8\u91cf \u8868\u793a\u662f\u5426\u6839\u636e\u4fe1\u606f\u5185\u5bb9\u8c03\u6574\u5927\u5c0f \u53ef\u9009\u9ed8\u8ba4\u4e3aTrue layout \u5e03\u5c40\u65b9\u5f0f normal \u8868\u793a\u5355\u680f\u5e03\u5c40 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u5355\u680f two-column \u8868\u793a\u53cc\u680f\u5e03\u5c40 height \u56fe\u7247\u9ad8\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u9ad8\u5ea6 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a800\uff0cautoSize\u4e3aTrue\u65f6\u65e0\u6548 width \u56fe\u7247\u5bbd\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u5bbd\u5ea6 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a880\uff0cautoSize\u4e3aTrue\u65f6\uff0c\u5c06\u56fa\u5b9awidth\u81ea\u52a8\u8c03\u6574\u9ad8\u5ea6 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u663e\u793a\u5728\u56fe\u7247\u9876\u90e8\u7684\u6807\u9898 \u53ef\u9009\uff0c\u4e0d\u652f\u6301\u6362\u884c\uff0c\u9ed8\u8ba4\u4e3a'\u54cd\u5e94\u5361\u7247' titleColor \u6807\u9898\u6846\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u6807\u9898\u6846\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u82e5\u7f3a\u7701\uff0c\u5219\u4e0eprimaryColor\u4e00\u81f4 primaryColor \u4e3b\u9898\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u4e3b\u9898\u8272\u7684RGBA\u503c\uff0c\u5c06\u5e94\u7528\u4e8e\u524d\u666f\u5361\u7247\u5173\u952e\u53e5\u989c\u8272 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u84dd\u8272 backColor \u80cc\u666f\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a(240,240,240,255) footer \u9875\u811a str\u578b\u53d8\u91cf \u8868\u793a\u663e\u793a\u5728\u56fe\u7247\u5e95\u90e8\u7684\u9875\u811a \u53ef\u9009\uff0c\u4e0d\u652f\u6301\u6362\u884c\uff0c\u9ed8\u8ba4\u4e3a\u7a7a cardTitleFont \u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009 cardSubtitleFont \u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u548c\u5173\u952e\u53e5\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009 cardBodyFont \u524d\u666f\u5361\u7247\u6b63\u6587\u5b57\u4f53 ImageFont.FreeTypeFont\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u4f7f\u7528\u7684\u5b57\u4f53\u53ca\u5927\u5c0f \u53ef\u9009","title":"\u521b\u5efa\u56fe\u7247"},{"location":"api/draw-card/#_2","text":"ResponseImage \u5b9e\u4f8b\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5bb9\u5668\u3002\u5982\u8981\u8ba9\u56fe\u7247\u5c55\u793a\u5404\u7c7b\u4fe1\u606f\uff0c\u4f60\u9700\u8981\u5411\u5b9e\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\"\u524d\u666f\u5361\u7247\"\u3002 \"\u524d\u666f\u5361\u7247\"\u673a\u5236\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5c06\u5404\u7c7b\u4fe1\u606f\u5206\u7ec4\u5c55\u793a\u3002","title":"\u6dfb\u52a0\u524d\u666f\u5361\u7247"},{"location":"api/draw-card/#addcard","text":"\u4f7f\u7528 ResponseImage.addCard() \u51fd\u6570\uff0c\u5411 ResponseImage \u5b9e\u4f8b\u6dfb\u52a0\u5355\u4e2a\u524d\u666f\u5361\u7247\u3002\u5361\u7247\u5728\u56fe\u7247\u4e2d\u6309\u6dfb\u52a0\u5361\u7247\u7684\u987a\u5e8f\u663e\u793a\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a img . addCard ( ResponseImage . NormalCard ( title = '\u539f\u795e2.1\u7248\u672c' , subtitle = '\u300c\u97f6\u5149\u629a\u6708\uff0c\u5929\u4e0b\u4eba\u95f4\u300dPV\u53f0\u8bcd' , body = \"\"\"\u98ce\u96e8\u72b9\u795d\uff0c\u5c71\u6d77\u540c\u6b22\uff0c\u662f\u627f\u5929\u5730\u4e4b\u4f51\uff1b \u661f\u79fb\u6597\u8f6c\uff0c\u6ca7\u6d77\u6851\u7530\uff0c\u70df\u706b\u4eba\u95f4\u4f9d\u65e7\uff1b \u529f\u540d\u5728\u6211\uff0c\u767e\u5c81\u5343\u79cb\uff0c\u6bcb\u5fd8\u79c9\u70db\u591c\u6e38\uff1b \u53e4\u4eca\u8bf8\u4e8b\uff0c\u6fc0\u8361\u4e2d\u6d41\uff0c\u5b8f\u56fe\u5f85\u770b\u65b0\u79c0\u3002\"\"\" , icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAA...' , subtitleFontColor = PALETTE_GREEN , backColor = PALETTE_LIGHTGREEN ) ) \u5e93\u9884\u8bbe\u4e86\u591a\u79cd\u5361\u7247\u7c7b\u578b\u53ef\u4f9b\u6dfb\u52a0\uff1a","title":"addCard() \u6dfb\u52a0\u5361\u7247"},{"location":"api/draw-card/#normalcard","text":"\u6807\u51c6\u7c7b\u578b\u524d\u666f\u5361\u7247\uff0c\u5185\u5bb9\u5de6\u5bf9\u9f50\u3002 \u53ef\u4f9b\u7f16\u8f91\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6807\u9898 \u53ef\u9009 subtitle \u526f\u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u526f\u6807\u9898 \u53ef\u9009 keyword \u5173\u952e\u53e5 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5173\u952e\u53e5 \u53ef\u9009\uff0c\u5173\u952e\u53e5\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u56fe\u7247\u4e3b\u9898\u8272 body \u6b63\u6587 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6b63\u6587 \u53ef\u9009 icon \u56fe\u6807 str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u9760\u5de6\u663e\u793a\u7684\u56fe\u6807 \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u5c06\u81ea\u52a8\u7f29\u653e\u4e3a90x90\u5927\u5c0f\u663e\u793a titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . NormalCard ( title = '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5de6\u5bf9\u9f50\u663e\u793a' , icon = '...' , ) )","title":"NormalCard"},{"location":"api/draw-card/#noticecard","text":"\u901a\u77e5\u7c7b\u578b\u524d\u666f\u5361\u7247\uff0c\u5185\u5bb9\u5c45\u4e2d\u663e\u793a\u3002 \u53ef\u4f9b\u7f16\u8f91\u7684\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 title \u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6807\u9898 \u53ef\u9009 subtitle \u526f\u6807\u9898 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u526f\u6807\u9898 \u53ef\u9009 keyword \u5173\u952e\u53e5 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5173\u952e\u53e5 \u53ef\u9009\uff0c\u5173\u952e\u53e5\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u56fe\u7247\u4e3b\u9898\u8272 body \u6b63\u6587 str\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u6b63\u6587 \u53ef\u9009 illustration \u914d\u56fe str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u5e95\u90e8\u663e\u793a\u7684\u914d\u56fe \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u82e5\u56fe\u7247\u8fc7\u5927\uff0c\u5c06\u81ea\u52a8\u7f29\u653e\u4ee5\u9002\u914d\u5361\u7247\u5bbd\u5ea6 titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . NoticeCard ( title = 'NoticeCard \\n [title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5c45\u4e2d\u663e\u793a' , icon = 'https://picx.zhimg.com/v2-7d1069f8beeeae09f0d26812941cebe0_1440w.jpg?source=172ae18b' , ) )","title":"NoticeCard"},{"location":"api/draw-card/#richcontentcard","text":"\u5bcc\u5185\u5bb9\u590d\u5408\u7c7b\u578b\u5361\u7247\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u524d\u666f\u5361\u7247\u4e2d\u663e\u793a\u590d\u5408\u683c\u5f0f\u7684\u591a\u884c\u6587\u672c\u3002 \u6587\u672c\u5185\u5bb9\u4ee5\u5217\u8868\u7684\u5f62\u5f0f\u8f93\u5165\uff0c\u5217\u8868\u4e2d\u6bcf\u9879\u4e3a\u4e00\u4e2a\u5f62\u5982 (\u683c\u5f0f\uff0c\u5185\u5bb9) \u7684\u5143\u7ec4\uff0c\u5176\u4e2d\"\u683c\u5f0f\"\u5b57\u6bb5\u53ef\u9009\uff1a title \uff0c subtitle \uff0c keyword \uff0c body \uff0c separator \u3002\u5177\u4f53\u5e94\u7528\u53c2\u89c1\u4e0b\u65b9\u793a\u4f8b\u4ee3\u7801\u3002 \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 raw_content \u5185\u5bb9 list\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u663e\u793a\u7684\u5185\u5bb9 \u53ef\u9009\uff0c\u4ee5\u5217\u8868\u5d4c\u5957\u5143\u7ec4\u5f62\u5f0f\u8f93\u5165 icon \u56fe\u6807 str\u578b\u53d8\u91cf\u6216Image\u5bf9\u8c61 \u8868\u793a\u524d\u666f\u5361\u7247\u9760\u5de6\u663e\u793a\u7684\u56fe\u6807 \u53ef\u9009\uff0c\u652f\u6301\u672c\u5730\u56fe\u7247/\u7f51\u7edc\u56fe\u7247\u5730\u5740\uff0cbase64\u7f16\u7801\u4e32\u6216PIL.Image\u5bf9\u8c61\u3002\u5c06\u81ea\u52a8\u7f29\u653e\u4e3a90x90\u5927\u5c0f\u663e\u793a titleFontColor \u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u9ed1\u8272 subtitleFontColor \u526f\u6807\u9898\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u526f\u6807\u9898\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6df1\u7070 bodyFontColor \u6b63\u6587\u5b57\u4f53\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u6b63\u6587\u90e8\u5206\u5b57\u4f53\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u6d45\u7070 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272 \u793a\u4f8b\u4ee3\u7801\u53ca\u6548\u679c\uff1a img . addCard ( ResponseImage . RichContentCard ( raw_content = [ ( 'title' , 'RichContentCard' ), ( 'keyword' , '\u5f26\u6708\u821e\u6b65' ), ( 'body' , '\u666e\u901a\u653b\u51fb\uff1a\u53ef\u4ee5\u8fdb\u884c\u81f3\u591a\u4e09\u6bb5\u7684\u8fde\u7eed\u5251\u51fb\uff1b\u91cd\u51fb\u6d88\u8017\u4e00\u5b9a\u4f53\u529b\u8fdb\u884c\u4e00\u6b21\u65cb\u8f6c\u65a9\u51fb\uff1b\u4e0b\u843d\u653b\u51fb\uff0c\u4ece\u7a7a\u4e2d\u4e0b\u5760\u51b2\u51fb\u5730\u9762\uff0c\u653b\u51fb\u4e0b\u843d\u8def\u5f84\u4e0a\u7684\u654c\u4eba\uff0c\u5e76\u5728\u843d\u5730\u65f6\u9020\u6210\u8303\u56f4\u4f24\u5bb3\u3002' ), ( 'separator' ,), ( 'keyword' , '\u4e03\u57df\u821e\u6b65' ), ( 'subtitle' , 'E\u6280\u80fd' ), ( 'body' , '\u5c55\u5f00\u201d\u7fe9\u8f6c\u201d\u72b6\u6001\uff0c\u57fa\u4e8e\u59ae\u9732\u7684\u751f\u547d\u503c\u4e0a\u9650\u5bf9\u8eab\u8fb9\u7684\u654c\u4eba\u9020\u6210\u6c34\u5143\u7d20\u4f24\u5bb3\u3002' ), ( 'separator' ,), ( 'keyword' , '\u6d6e\u83b2\u821e\u6b65 \u8fdc\u68a6\u8046\u6cc9' ), ( 'subtitle' , 'Q\u6280\u80fd' ), ( 'body' , '\u57fa\u4e8e\u59ae\u9732\u7684\u751f\u547d\u503c\u4e0a\u9650\uff0c\u9020\u6210\u6c34\u5143\u7d20\u8303\u56f4\u4f24\u5bb3\uff0c\u5e76\u4e3a\u547d\u4e2d\u7684\u654c\u4eba\u65bd\u52a0\u201c\u6c34\u4e16\u6d41\u6c94\u201d\u72b6\u6001\uff0c\u77ed\u6682\u95f4\u9694\u540e\uff0c\u5904\u4e8e\u201c\u6c38\u4e16\u6ce8\u6c94\u201d\u72b6\u6001\u4e0b\u7684\u654c\u4eba\u5c06\u53d7\u5230\u6c34\u5143\u7d20\u4f24\u5bb3\u3002' ), ], icon = 'https://gimg2.baidu.com/image_search/src=http%3A %2F%2F imgo.hackhome.com %2F img2022 %2F 7 %2F 5 %2F 11 %2F 23040603.jpg&refer=http%3A %2F%2F imgo.hackhome.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1667132746&t=a133591be6a3a16de33e20c8989f424c' ) )","title":"RichContentCard"},{"location":"api/draw-card/#blankcard","text":"\u7a7a\u767d\u5361\u7247\uff0c\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 size \u9ad8\u5ea6 int\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u7684\u9ad8\u5ea6 (\u4e0d\u542b\u8fb9\u6846\u548c\u95f4\u8ddd) \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a0 backColor \u5361\u7247\u80cc\u666f\u989c\u8272 tuple\u578b\u53d8\u91cf \u8868\u793a\u524d\u666f\u5361\u7247\u80cc\u666f\u989c\u8272\u7684RGBA\u503c \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272","title":"BlankCard"},{"location":"api/draw-card/#addcardlist","text":"\u4f7f\u7528 ResponseImage.addCardList() \u51fd\u6570\uff0c\u53ef\u4ee5\u4ee5\u5217\u8868\u5f62\u5f0f\u4e00\u6b21\u6dfb\u52a0\u591a\u4e2a\u524d\u666f\u5361\u7247\uff0c\u5361\u7247\u7c7b\u578b\u540c\u4e0a\u3002","title":"addCardList() \u6dfb\u52a0\u5361\u7247\u5217\u8868"},{"location":"api/draw-card/#_3","text":"\u9664\u4f7f\u7528\u5f62\u5982 NormalCard \u7b49\u7c7b\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b57\u5178\u5f62\u5f0f\u6dfb\u52a0\u5361\u7247\u6570\u636e\uff0c\u5b57\u5178\u7684 style \u952e\u503c\u5fc5\u9009\uff0c\u8868\u793a\u5361\u7247\u7c7b\u578b\u3002\u4ee5\u4e0b\u4e24\u6bb5\u4ee3\u7801\u7684\u6548\u679c\u76f8\u540c\uff1a img . addCard ( ResponseImage . NormalCard ( title = '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , subtitle = '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , keyword = '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , body = '[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \\n \u5de6\u5bf9\u9f50\u663e\u793a' , icon = '...' , ) ) img . addCard ( { 'style' : 'normal' , 'title' : '[title \u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , 'subtitle' : '[subtitle \u526f\u6807\u9898] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c' , 'keyword' : '[keyword \u5173\u952e\u53e5] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c\u5b57\u4f53\u540c\u526f\u6807\u9898\uff0c\u989c\u8272\u540c\u5173\u952e\u8272' , 'body' : '''[body \u6b63\u6587] \u53ef\u9009\uff0c\u652f\u6301\u81ea\u52a8\u6362\u884c/\u591a\u884c\u6587\u672c\uff0c \u5de6\u5bf9\u9f50\u663e\u793a''' , 'icon' : '...' } ) \u6ce8\u610f \u4f7f\u7528\u5b57\u5178\u7c7b\u578b\u4f5c\u4e3a\u53c2\u6570\u6dfb\u52a0\u5361\u7247\uff0c\u597d\u5904\u662f\u65b9\u4fbf\u4fee\u6539\u5361\u7247\u7c7b\u578b\uff0c\u7f3a\u70b9\u662f\u6ca1\u6709\u4ee3\u7801\u63d0\u793a\u3001\u5bb9\u6613\u6253\u9519\u5b57\u6bb5\u540d\u79f0\uff0c\u6240\u4ee5\uff0c\u8bf7\u5c0f\u5fc3\u68c0\u67e5\u5b57\u5178\u4e2d\u7684\u952e\uff01","title":"\u4f7f\u7528\u5b57\u5178\u7c7b\u578b\u6dfb\u52a0\u5361\u7247"},{"location":"api/draw-card/#generateimage","text":"\u4f7f\u7528 ResponseImage.generateImage(savePath) \u51fd\u6570\u751f\u6210\u56fe\u7247\u5e76\u4fdd\u5b58\u56fe\u7247\u5230\u786c\u76d8\u3002 \u51fd\u6570\u8fd4\u56de\u503c\u662f\u4e00\u4e2a PIL.Image \u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u5bf9\u6b64\u5bf9\u8c61\u4f7f\u7528 pillow \u5e93\u7ee7\u7eed\u7f16\u8f91\u3002 \u51fd\u6570\u53c2\u6570\u5982\u4e0b\uff1a \u5c5e\u6027\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 savePath \u4fdd\u5b58\u5730\u5740 str\u578b\u53d8\u91cf \u8868\u793a\u56fe\u7247\u7684\u4fdd\u5b58\u5730\u5740 \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a\u7a7a (\u4e0d\u4fdd\u5b58)","title":"generateImage() \u751f\u6210\u5e76\u4fdd\u5b58"},{"location":"api/draw-card/#getblankcoord","text":"\u4f7f\u7528 ResponseImage.getBlankCoord() \u83b7\u5f97 BlankCard \u7c7b\u578b\u5361\u7247\u7684\u4f4d\u7f6e\u3002 \u51fd\u6570\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u6bcf\u9879\u662f\u4e00 BlankCard \u7c7b\u578b\u5361\u7247\u56db\u89d2\u7684\u5750\u6807\u3002\u4f7f\u7528\u6b64\u5750\u6807\uff0c\u4f60\u53ef\u4ee5\u5728\u6dfb\u52a0\u7684\u7a7a\u767d\u5361\u7247\u5904\u7ed8\u5236\u3002","title":"getBlankCoord() \u83b7\u53d6\u7a7a\u767d\u5361\u7247\u5750\u6807"},{"location":"api/draw-card/#_4","text":"\u5e93\u4e2d\u9884\u8bbe\u4e86\u4e00\u4e9b\u989c\u8272\u5e38\u91cf\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u7edf\u4e00\u989c\u8272","title":"\u5e38\u91cf\u5217\u8868"},{"location":"api/draw-card/#_5","text":"\u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u793a\u4f8b PALETTE_BLACK \u9ed1\u8272 (0, 0, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_WHITE \u767d\u8272 (255, 255, 255, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY \u7070\u8272 (158, 158, 158, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREY_SUBTITLE \u7070\u8272(\u526f\u6807\u9898) (95, 95, 95, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREY_CONTENT \u7070\u8272(\u6b63\u6587) (125, 125, 125, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY_BORDER \u7070\u8272(\u8fb9\u6846) (213, 213, 213, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GERY_BACK \u7070\u8272(\u80cc\u666f) (240, 240, 240, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_RED \u7ea2\u8272 (221, 0, 38, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTRED \u6d45\u7ea2\u8272 (255, 232, 236, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_GREEN \u7eff\u8272 (0, 191, 48, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTGREEN \u6d45\u7eff\u8272 (219, 255, 228, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_ORANGE \u6a59\u8272 (244, 149, 4, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTORANGE \u6d45\u6a59\u8272 (254, 232, 199, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_BLUE \u84dd\u8272 (32, 131, 197, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_LIGHTBLUE \u6d45\u84dd\u8272 (9, 188, 211, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_CYAN \u9752\u8272 (0, 150, 136, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_INDIGO \u975b\u84dd\u8272 (69, 84, 164, 255) \u793a\u4f8b\u6587\u5b57","title":"\u6807\u51c6\u989c\u8272\u5e38\u91cf"},{"location":"api/draw-card/#sjtu","text":"\u4ee5\u4e0b\u989c\u8272\u6ee1\u8db3\u4e0a\u6d77\u4ea4\u901a\u5927\u5b66\u89c6\u89c9\u8bc6\u522b\u7cfb\u7edf\u7684\u989c\u8272\u6807\u51c6 \u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u793a\u4f8b PALETTE_SJTU_RED \u4ea4\u5927\u7ea2 (200, 22, 30, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_DARKRED \u4ea4\u5927\u6697\u7ea2 (167, 32, 56, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_ORANGE \u4ea4\u5927\u6a59 (240, 131, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_YELLOW \u4ea4\u5927\u9ec4 (253, 208, 0, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_BLUE \u4ea4\u5927\u84dd (0, 134, 209, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_DARKBLUE \u4ea4\u5927\u6697\u84dd (0, 64, 152, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_GREEN \u4ea4\u5927\u7eff (51, 141, 39, 255) \u793a\u4f8b\u6587\u5b57 PALETTE_SJTU_CYAN \u4ea4\u5927\u9752 (0, 81, 78, 255) \u793a\u4f8b\u6587\u5b57","title":"SJTU\u89c6\u89c9\u6807\u51c6\u8272\u5e38\u91cf"},{"location":"api/send/","text":"\u4ee3\u7801\u5206\u6790 def send ( id : int , message : str , type : str = 'group' ) -> None : \"\"\"\u53d1\u9001\u6d88\u606f id: \u7fa4\u53f7\u6216\u8005\u79c1\u804a\u5bf9\u8c61qq\u53f7 message: \u6d88\u606f type: Union['group', 'private'], \u9ed8\u8ba4 'group' \"\"\" url = HTTP_URL + \"/send_msg\" if type == 'group' : params = { \"message_type\" : type , \"group_id\" : id , \"message\" : message } print ( params ) requests . get ( url , params = params ) elif type == 'private' : params = { \"message_type\" : type , \"user_id\" : id , \"message\" : message } print ( params ) requests . get ( url , params = params ) def get_group_list () -> list : \"\"\"\u83b7\u53d6\u7fa4\u804a\u5217\u8868 @return: [ { 'group_create_time': int, 'group_id': int, 'group_name': str, 'group_level': int, 'max_member_count': int, 'member_count': int, }, .... ] \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%88%97%E8%A1%A8 \"\"\" url = HTTP_URL + \"/get_group_list\" try : groupList = json . loads ( requests . get ( url ) . text ) if groupList [ 'status' ] != 'ok' : warning ( \"get_group_list requests not return ok\" ) return [] return groupList [ 'data' ] except BaseException as e : warning ( \"error in get_group_list, error: {} \" . format ( e )) return [] def get_group_msg_history ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u7fa4\u6d88\u606f\u5386\u53f2\u8bb0\u5f55 @message_seq: \u8d77\u59cb\u6d88\u606f\u5e8f\u53f7, \u53ef\u901a\u8fc7 get_msg \u83b7\u5f97 \u5982\u679c\u662fNone\u5c06\u9ed8\u8ba4\u83b7\u53d6\u6700\u65b0\u7684\u6d88\u606f @group_id: \u7fa4\u53f7 @return: \u4ece\u8d77\u59cb\u5e8f\u53f7\u5f00\u59cb\u7684\u524d19\u6761\u6d88\u606f \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%B6%88%E6%81%AF%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95 \"\"\" url = HTTP_URL + \"/get_group_msg_history\" try : params = { \"group_id\" : group_id } if message_seq != None : params [ \"message_seq\" ] = message_seq messageHistory = json . loads ( requests . get ( url , params = params ) . text ) if messageHistory [ 'status' ] != 'ok' : if messageHistory [ 'msg' ] == 'MESSAGES_API_ERROR' : print ( \"group {} meet message API error\" . format ( group_id )) else : warning ( \"get_group_msg_history requests not return ok \\n messages = {} \\n group_id= {} \\n message_seq= {} \" . format ( messageHistory , group_id , message_seq )) return [] return messageHistory [ 'data' ][ 'messages' ] except BaseException as e : warning ( 'error in get_group_msg_history, error: [}' . format ( e )) return [] def get_essence_msg_list ( group_id : int ) -> list : \"\"\"\u83b7\u53d6\u7cbe\u534e\u6d88\u606f\u5217\u8868 @group_id: \u7fa4\u53f7 @return: \u7cbe\u534e\u6d88\u606f\u5217\u8868 \"\"\" url = HTTP_URL + \"/get_essence_msg_list\" try : params = { \"group_id\" : group_id } essenceMsgs = json . loads ( requests . get ( url , params = params ) . text ) if essenceMsgs [ 'status' ] != 'ok' : warning ( \"get_essence_msg_list requests not return ok\" ) return [] return essenceMsgs [ 'data' ] except BaseException as e : warning ( \"error in get_essence_msg_list, error: {} \" . format ( e )) return [] def set_friend_add_request ( flag , approve = True ) -> None : \"\"\"\u5904\u7406\u52a0\u597d\u53cb\"\"\" url = HTTP_URL + \"/set_friend_add_request\" params = { \"flag\" : flag , \"approve\" : approve } print ( params ) requests . get ( url , params = params )","title":"go-cqhttp\u5bf9\u63a5"},{"location":"api/send/#_1","text":"def send ( id : int , message : str , type : str = 'group' ) -> None : \"\"\"\u53d1\u9001\u6d88\u606f id: \u7fa4\u53f7\u6216\u8005\u79c1\u804a\u5bf9\u8c61qq\u53f7 message: \u6d88\u606f type: Union['group', 'private'], \u9ed8\u8ba4 'group' \"\"\" url = HTTP_URL + \"/send_msg\" if type == 'group' : params = { \"message_type\" : type , \"group_id\" : id , \"message\" : message } print ( params ) requests . get ( url , params = params ) elif type == 'private' : params = { \"message_type\" : type , \"user_id\" : id , \"message\" : message } print ( params ) requests . get ( url , params = params ) def get_group_list () -> list : \"\"\"\u83b7\u53d6\u7fa4\u804a\u5217\u8868 @return: [ { 'group_create_time': int, 'group_id': int, 'group_name': str, 'group_level': int, 'max_member_count': int, 'member_count': int, }, .... ] \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%88%97%E8%A1%A8 \"\"\" url = HTTP_URL + \"/get_group_list\" try : groupList = json . loads ( requests . get ( url ) . text ) if groupList [ 'status' ] != 'ok' : warning ( \"get_group_list requests not return ok\" ) return [] return groupList [ 'data' ] except BaseException as e : warning ( \"error in get_group_list, error: {} \" . format ( e )) return [] def get_group_msg_history ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u7fa4\u6d88\u606f\u5386\u53f2\u8bb0\u5f55 @message_seq: \u8d77\u59cb\u6d88\u606f\u5e8f\u53f7, \u53ef\u901a\u8fc7 get_msg \u83b7\u5f97 \u5982\u679c\u662fNone\u5c06\u9ed8\u8ba4\u83b7\u53d6\u6700\u65b0\u7684\u6d88\u606f @group_id: \u7fa4\u53f7 @return: \u4ece\u8d77\u59cb\u5e8f\u53f7\u5f00\u59cb\u7684\u524d19\u6761\u6d88\u606f \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%B6%88%E6%81%AF%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95 \"\"\" url = HTTP_URL + \"/get_group_msg_history\" try : params = { \"group_id\" : group_id } if message_seq != None : params [ \"message_seq\" ] = message_seq messageHistory = json . loads ( requests . get ( url , params = params ) . text ) if messageHistory [ 'status' ] != 'ok' : if messageHistory [ 'msg' ] == 'MESSAGES_API_ERROR' : print ( \"group {} meet message API error\" . format ( group_id )) else : warning ( \"get_group_msg_history requests not return ok \\n messages = {} \\n group_id= {} \\n message_seq= {} \" . format ( messageHistory , group_id , message_seq )) return [] return messageHistory [ 'data' ][ 'messages' ] except BaseException as e : warning ( 'error in get_group_msg_history, error: [}' . format ( e )) return [] def get_essence_msg_list ( group_id : int ) -> list : \"\"\"\u83b7\u53d6\u7cbe\u534e\u6d88\u606f\u5217\u8868 @group_id: \u7fa4\u53f7 @return: \u7cbe\u534e\u6d88\u606f\u5217\u8868 \"\"\" url = HTTP_URL + \"/get_essence_msg_list\" try : params = { \"group_id\" : group_id } essenceMsgs = json . loads ( requests . get ( url , params = params ) . text ) if essenceMsgs [ 'status' ] != 'ok' : warning ( \"get_essence_msg_list requests not return ok\" ) return [] return essenceMsgs [ 'data' ] except BaseException as e : warning ( \"error in get_essence_msg_list, error: {} \" . format ( e )) return [] def set_friend_add_request ( flag , approve = True ) -> None : \"\"\"\u5904\u7406\u52a0\u597d\u53cb\"\"\" url = HTTP_URL + \"/set_friend_add_request\" params = { \"flag\" : flag , \"approve\" : approve } print ( params ) requests . get ( url , params = params )","title":"\u4ee3\u7801\u5206\u6790"},{"location":"api/warning/","text":"warning API \u7b80\u4ecb \u63d2\u4ef6\u5728\u5de5\u4f5c\u65f6\u96be\u514d\u9047\u5230\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u6bcf\u6b21\u767b\u5f55\u670d\u52a1\u5668\u7ffb\u627e\u7ec8\u7aef log \u4ee5\u5b9a\u4f4d\u9519\u8bef\u65e0\u7591\u662f\u4e00\u4e2a\u7e41\u7410\u7684\u8fc7\u7a0b\u3002 \u5229\u7528 try-except \u673a\u5236\u4e0e Bot \u63d0\u4f9b\u7684 warning() \u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u5c06\u8fd0\u884c\u4e2d\u7684\u9519\u8bef\u4fe1\u606f\u901a\u8fc7 QQ \u53d1\u9001\u7ed9\u8d85\u7ea7\u7ba1\u7406\u5458\uff08\u5373 utils/basicConfig.py \u4e2d ROOT_ADMIN_ID \u5217\u8868\u4e2d\u7684\u8d26\u53f7\uff09 \u4ee3\u7801\u5206\u6790 def warning ( what : str ) -> None : \"\"\"warning to admins\"\"\" stack = traceback . format_exc () what = '[warning] \\n ' + what what += ' \\n\\n [location] \\n ' + stack admin_users = ROOT_ADMIN_ID admin_groups = [] for admin in admin_users : send ( admin , what , 'private' ) for admin in admin_groups : send ( admin , what , 'group' )","title":"\u8fd0\u884c\u65f6\u8b66\u544a"},{"location":"api/warning/#warning-api","text":"\u63d2\u4ef6\u5728\u5de5\u4f5c\u65f6\u96be\u514d\u9047\u5230\u8fd0\u884c\u65f6\u9519\u8bef\uff0c\u6bcf\u6b21\u767b\u5f55\u670d\u52a1\u5668\u7ffb\u627e\u7ec8\u7aef log \u4ee5\u5b9a\u4f4d\u9519\u8bef\u65e0\u7591\u662f\u4e00\u4e2a\u7e41\u7410\u7684\u8fc7\u7a0b\u3002 \u5229\u7528 try-except \u673a\u5236\u4e0e Bot \u63d0\u4f9b\u7684 warning() \u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u5c06\u8fd0\u884c\u4e2d\u7684\u9519\u8bef\u4fe1\u606f\u901a\u8fc7 QQ \u53d1\u9001\u7ed9\u8d85\u7ea7\u7ba1\u7406\u5458\uff08\u5373 utils/basicConfig.py \u4e2d ROOT_ADMIN_ID \u5217\u8868\u4e2d\u7684\u8d26\u53f7\uff09","title":"warning API \u7b80\u4ecb"},{"location":"api/warning/#_1","text":"def warning ( what : str ) -> None : \"\"\"warning to admins\"\"\" stack = traceback . format_exc () what = '[warning] \\n ' + what what += ' \\n\\n [location] \\n ' + stack admin_users = ROOT_ADMIN_ID admin_groups = [] for admin in admin_users : send ( admin , what , 'private' ) for admin in admin_groups : send ( admin , what , 'group' )","title":"\u4ee3\u7801\u5206\u6790"},{"location":"get-start/deployment/","text":"\u90e8\u7f72 Bot \u5b8c\u6210\u4e0a\u8ff0\u7684\u4e00\u7cfb\u5217\u73af\u5883\u5b89\u88c5\uff0c\u7ec8\u4e8e\u5230\u4e86 Bot \u7684\u90e8\u7f72\u73af\u8282\uff01 \u5bf9\u63a5\u9a71\u52a8\u5668 \u9996\u5148\uff0c\u4f60\u9700\u8981\u4fee\u6539\u4ee3\u7801\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u53f7\uff0c\u4f7f Bot \u4e0e\u4e4b\u524d\u6240\u914d\u7f6e\u7684\u9a71\u52a8\u5668\uff08go-cqhttp\uff09\u76f8\u5bf9\u63a5\u3002 \u5047\u8bbe\u5728 go-cqhttp \u76ee\u5f55\u4e0b\u7684 config.yml \u4e2d\u914d\u7f6e\u5982\u4e0b\uff1a - http : address : 127.0.0.1:5700 ... post : - url : http://127.0.0.1:5701/ \u63a5\u6536\u7aef\u53e3\u53f7\u4e3a 5700 \uff0c\u53cd\u5411 POST \u7aef\u53e3\u53f7\u4e3a 5701 \u3002\u5bf9\u5e94\u4fee\u6539 utils/basicConfig.py \u5982\u4e0b\uff1a HTTP_URL = \"http://127.0.0.1:5700\" \u4fee\u6539 main.py \u4e2d\u6700\u540e\u4e00\u884c\u5982\u4e0b\uff1a if __name__ == '__main__' : app . run ( host = \"127.0.0.1\" , port = 5701 ) \u8d26\u53f7\u76f8\u5173\u914d\u7f6e \u5b8c\u6210\u5bf9\u63a5\u540e\uff0c\u8bf7\u7ee7\u7eed\u4fee\u6539 utils/basicConfig.py \u3002\u793a\u4f8b\u5982\u4e0b\uff1a APPLY_GROUP_ID = [ 111 , 222 ] ROOT_ADMIN_ID = [ 333 , 444 ] BOT_SELF_QQ = 555 VERSION_TXT = '\u7248\u672c\u53f71.0' sqlConfig = { 'host' : '127.0.0.1' , 'user' : 'root' , 'passwd' : { YOUR_SQL_PASSWORD } } TXT_PERMISSION_DENIED = \"\u8be5\u529f\u80fd\u5c1a\u672a\u6253\u5f00\u54e6\" \u4ee5\u4e0a\u5404\u5e38\u91cf\u7684\u5177\u4f53\u89e3\u91ca\u5982\u4e0b\uff1a \u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 APPLY_GROUP_ID \u54cd\u5e94\u7fa4\u5217\u8868 list\u578b\u53d8\u91cf \u8868\u793a\u6307\u5b9a Bot \u54cd\u5e94\u7684\u7fa4\u804a\u53f7\u7801 \u5982 Bot \u52a0\u5165\u67d0\u7fa4\u4f46\u5217\u8868\u4e2d\u65e0\u6b64\u7fa4\u7fa4\u53f7\uff0c\u5219 Bot \u5bf9\u8be5\u7fa4\u6240\u6709\u4fe1\u606f\u5747\u4e0d\u505a\u54cd\u5e94 ROOT_ADMIN_ID \u8d85\u7ea7\u7ba1\u7406\u5458\u5217\u8868 list\u578b\u53d8\u91cf \u8868\u793a\u8d85\u7ea7\u7ba1\u7406\u5458\u7684 QQ \u53f7\u7801 \u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u63a5\u6536\u8fd0\u884c\u65f6\u8b66\u544a\uff0c\u5e76\u901a\u8fc7\u547d\u4ee4\u914d\u7f6e\u5404\u4e2a\u7fa4\u804a\u7684\u542f\u7528\u63d2\u4ef6\u3001\u4e3a\u5404\u4e2a\u7fa4\u804a\u6dfb\u52a0 Bot \u7ba1\u7406\u5458 BOT_SELF_QQ Bot \u81ea\u8eab\u8d26\u53f7 int\u578b\u53d8\u91cf \u8868\u793a Bot \u81ea\u8eab QQ \u53f7 VERSION_TXT \u7248\u672c\u4fe1\u606f str\u578b\u53d8\u91cf \u8868\u793a\u5f53\u524d Bot \u7684\u7248\u672c\u53f7\u548c\u66f4\u65b0\u63cf\u8ff0\u7b49 \u8be5\u4fe1\u606f\u5c06\u5728\u6536\u5230 -test status \u4fe1\u606f\u65f6\u56de\u590d sqlConfig SQL \u51ed\u8bc1 dict\u578b\u53d8\u91cf \u8868\u793a\u8fde\u63a5 MySQL \u7684\u51ed\u8bc1 \u8fde\u63a5 MySQL \u6240\u9700\u7684\u5730\u5740\u3001\u8d26\u53f7\uff08\u901a\u5e38\u662froot\uff09\u3001\u5bc6\u7801 TXT_PERMISSION_DENIED \u65e0\u6743\u9650\u4fe1\u606f str\u578b\u53d8\u91cf \u8868\u793a Bot \u529f\u80fd\u672a\u5f00\u542f\u65f6\u7684\u56de\u590d \u8be5\u4fe1\u606f\u5c06\u5728\u7528\u6237\u8bd5\u56fe\u4f7f\u7528 Bot \u672a\u5f00\u542f\u529f\u80fd\u65f6\u56de\u590d\uff08\u8bbe\u7f6e\u4e3a\u7a7a\uff0c\u53ef\u9002\u5f53\u51cf\u5c11\u5237\u5c4f\uff09 \u542f\u52a8 Bot \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u606d\u559c\u4f60\uff0c\u4f60\u53ef\u4ee5\u542f\u52a8 Bot \u4e86\uff01\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Bot \uff1a python main.py \u63d0\u793a\uff1a\u540e\u53f0\u8fd0\u884c\u4e0e\u591a\u7ec8\u7aef\u7ba1\u7406 Linux\u73af\u5883\u4e0b\uff0c\u63a8\u8350\u4f7f\u7528 tmux \u7ba1\u7406\u7ec8\u7aef\uff0c\u5e76\u5728 tmux \u4e2d\u65b0\u5efa\u4e00\u4e2a session \u4ee5\u540e\u53f0\u8fd0\u884c bot \u82e5 main.py \u6240\u5728\u7ec8\u7aef\u5728\u542f\u7528 Bot \u7684\u7fa4\u6709\u65b0\u4fe1\u606f\u65f6\u6709\u8f93\u51fa\u4e14\u5207\u6362\u81f3 go-cqhttp \u6240\u5728\u7ec8\u7aef\u4e0d\u518d\u8f93\u51fa\u201c\u4e0a\u62a5\u9519\u8bef\u201d\uff0c\u5219\u8bf4\u660e Bot \u4e0e\u9a71\u52a8\u5668\u8fde\u63a5\u6210\u529f\u3002\u4f60\u53ef\u4ee5\u5728\u542f\u7528 Bot \u7684\u7fa4\u53d1\u9001 -test status \u547d\u4ee4\uff0c\u89c2\u5bdf Bot \u662f\u5426\u56de\u5e94\u4ee5\u8fdb\u4e00\u6b65\u6d4b\u8bd5\u3002","title":"\u90e8\u7f72 Bot"},{"location":"get-start/deployment/#bot","text":"\u5b8c\u6210\u4e0a\u8ff0\u7684\u4e00\u7cfb\u5217\u73af\u5883\u5b89\u88c5\uff0c\u7ec8\u4e8e\u5230\u4e86 Bot \u7684\u90e8\u7f72\u73af\u8282\uff01","title":"\u90e8\u7f72 Bot"},{"location":"get-start/deployment/#_1","text":"\u9996\u5148\uff0c\u4f60\u9700\u8981\u4fee\u6539\u4ee3\u7801\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u53f7\uff0c\u4f7f Bot \u4e0e\u4e4b\u524d\u6240\u914d\u7f6e\u7684\u9a71\u52a8\u5668\uff08go-cqhttp\uff09\u76f8\u5bf9\u63a5\u3002 \u5047\u8bbe\u5728 go-cqhttp \u76ee\u5f55\u4e0b\u7684 config.yml \u4e2d\u914d\u7f6e\u5982\u4e0b\uff1a - http : address : 127.0.0.1:5700 ... post : - url : http://127.0.0.1:5701/ \u63a5\u6536\u7aef\u53e3\u53f7\u4e3a 5700 \uff0c\u53cd\u5411 POST \u7aef\u53e3\u53f7\u4e3a 5701 \u3002\u5bf9\u5e94\u4fee\u6539 utils/basicConfig.py \u5982\u4e0b\uff1a HTTP_URL = \"http://127.0.0.1:5700\" \u4fee\u6539 main.py \u4e2d\u6700\u540e\u4e00\u884c\u5982\u4e0b\uff1a if __name__ == '__main__' : app . run ( host = \"127.0.0.1\" , port = 5701 )","title":"\u5bf9\u63a5\u9a71\u52a8\u5668"},{"location":"get-start/deployment/#_2","text":"\u5b8c\u6210\u5bf9\u63a5\u540e\uff0c\u8bf7\u7ee7\u7eed\u4fee\u6539 utils/basicConfig.py \u3002\u793a\u4f8b\u5982\u4e0b\uff1a APPLY_GROUP_ID = [ 111 , 222 ] ROOT_ADMIN_ID = [ 333 , 444 ] BOT_SELF_QQ = 555 VERSION_TXT = '\u7248\u672c\u53f71.0' sqlConfig = { 'host' : '127.0.0.1' , 'user' : 'root' , 'passwd' : { YOUR_SQL_PASSWORD } } TXT_PERMISSION_DENIED = \"\u8be5\u529f\u80fd\u5c1a\u672a\u6253\u5f00\u54e6\" \u4ee5\u4e0a\u5404\u5e38\u91cf\u7684\u5177\u4f53\u89e3\u91ca\u5982\u4e0b\uff1a \u5e38\u91cf\u540d\u79f0 \u63cf\u8ff0 \u53d6\u503c \u53d6\u503c\u8bf4\u660e \u5907\u6ce8 APPLY_GROUP_ID \u54cd\u5e94\u7fa4\u5217\u8868 list\u578b\u53d8\u91cf \u8868\u793a\u6307\u5b9a Bot \u54cd\u5e94\u7684\u7fa4\u804a\u53f7\u7801 \u5982 Bot \u52a0\u5165\u67d0\u7fa4\u4f46\u5217\u8868\u4e2d\u65e0\u6b64\u7fa4\u7fa4\u53f7\uff0c\u5219 Bot \u5bf9\u8be5\u7fa4\u6240\u6709\u4fe1\u606f\u5747\u4e0d\u505a\u54cd\u5e94 ROOT_ADMIN_ID \u8d85\u7ea7\u7ba1\u7406\u5458\u5217\u8868 list\u578b\u53d8\u91cf \u8868\u793a\u8d85\u7ea7\u7ba1\u7406\u5458\u7684 QQ \u53f7\u7801 \u8d85\u7ea7\u7ba1\u7406\u5458\u53ef\u4ee5\u63a5\u6536\u8fd0\u884c\u65f6\u8b66\u544a\uff0c\u5e76\u901a\u8fc7\u547d\u4ee4\u914d\u7f6e\u5404\u4e2a\u7fa4\u804a\u7684\u542f\u7528\u63d2\u4ef6\u3001\u4e3a\u5404\u4e2a\u7fa4\u804a\u6dfb\u52a0 Bot \u7ba1\u7406\u5458 BOT_SELF_QQ Bot \u81ea\u8eab\u8d26\u53f7 int\u578b\u53d8\u91cf \u8868\u793a Bot \u81ea\u8eab QQ \u53f7 VERSION_TXT \u7248\u672c\u4fe1\u606f str\u578b\u53d8\u91cf \u8868\u793a\u5f53\u524d Bot \u7684\u7248\u672c\u53f7\u548c\u66f4\u65b0\u63cf\u8ff0\u7b49 \u8be5\u4fe1\u606f\u5c06\u5728\u6536\u5230 -test status \u4fe1\u606f\u65f6\u56de\u590d sqlConfig SQL \u51ed\u8bc1 dict\u578b\u53d8\u91cf \u8868\u793a\u8fde\u63a5 MySQL \u7684\u51ed\u8bc1 \u8fde\u63a5 MySQL \u6240\u9700\u7684\u5730\u5740\u3001\u8d26\u53f7\uff08\u901a\u5e38\u662froot\uff09\u3001\u5bc6\u7801 TXT_PERMISSION_DENIED \u65e0\u6743\u9650\u4fe1\u606f str\u578b\u53d8\u91cf \u8868\u793a Bot \u529f\u80fd\u672a\u5f00\u542f\u65f6\u7684\u56de\u590d \u8be5\u4fe1\u606f\u5c06\u5728\u7528\u6237\u8bd5\u56fe\u4f7f\u7528 Bot \u672a\u5f00\u542f\u529f\u80fd\u65f6\u56de\u590d\uff08\u8bbe\u7f6e\u4e3a\u7a7a\uff0c\u53ef\u9002\u5f53\u51cf\u5c11\u5237\u5c4f\uff09","title":"\u8d26\u53f7\u76f8\u5173\u914d\u7f6e"},{"location":"get-start/deployment/#bot_1","text":"\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u606d\u559c\u4f60\uff0c\u4f60\u53ef\u4ee5\u542f\u52a8 Bot \u4e86\uff01\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Bot \uff1a python main.py \u63d0\u793a\uff1a\u540e\u53f0\u8fd0\u884c\u4e0e\u591a\u7ec8\u7aef\u7ba1\u7406 Linux\u73af\u5883\u4e0b\uff0c\u63a8\u8350\u4f7f\u7528 tmux \u7ba1\u7406\u7ec8\u7aef\uff0c\u5e76\u5728 tmux \u4e2d\u65b0\u5efa\u4e00\u4e2a session \u4ee5\u540e\u53f0\u8fd0\u884c bot \u82e5 main.py \u6240\u5728\u7ec8\u7aef\u5728\u542f\u7528 Bot \u7684\u7fa4\u6709\u65b0\u4fe1\u606f\u65f6\u6709\u8f93\u51fa\u4e14\u5207\u6362\u81f3 go-cqhttp \u6240\u5728\u7ec8\u7aef\u4e0d\u518d\u8f93\u51fa\u201c\u4e0a\u62a5\u9519\u8bef\u201d\uff0c\u5219\u8bf4\u660e Bot \u4e0e\u9a71\u52a8\u5668\u8fde\u63a5\u6210\u529f\u3002\u4f60\u53ef\u4ee5\u5728\u542f\u7528 Bot \u7684\u7fa4\u53d1\u9001 -test status \u547d\u4ee4\uff0c\u89c2\u5bdf Bot \u662f\u5426\u56de\u5e94\u4ee5\u8fdb\u4e00\u6b65\u6d4b\u8bd5\u3002","title":"\u542f\u52a8 Bot"},{"location":"get-start/installation/","text":"\u6b22\u8fce\u6765\u5230 Little-UNIkeEN-Bot \u7684\u5b89\u88c5\u5411\u5bfc\uff01 \u5b89\u88c5 Bot \u4f60\u53ef\u4ee5\u4ece Github \u4e0b\u8f7d Little-UNIkeEN-Bot \u9879\u76ee\u3002\u76f4\u63a5\u514b\u9686\u6211\u4eec\u7684 Git \u4ed3\u5e93\u5373\u53ef\u5b8c\u6210\u5b89\u88c5\uff1a git clone git@github.com:UNIkeEN/Little-UNIkeEN-Bot.git Python\u5305\u4f9d\u8d56 \u672c\u9879\u76ee\u7684Python\u5305\u4f9d\u8d56\u90fd\u5199\u5728\u4e86\u6839\u76ee\u5f55\u4e0b\u7684 requirements.txt \u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528\u65f6\u53ea\u9700\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u5b89\u88c5\u3002 pip install -r requirements.txt \u63a8\u8350\u90e8\u7f72\u73af\u5883\u4e0e\u8be6\u7ec6\u6559\u7a0b Linux (Ubuntu 20.04 LTS) python >= 3.7 mysql >= 8.0 Linux \u4f5c\u8005\u662f\u5728Linux\u5e73\u53f0\u90e8\u7f72\u5f00\u53d1\u7684\uff0c\u6709\u6781\u5c11\u90e8\u5206\u63d2\u4ef6\u7684\u547d\u4ee4\u662f shell \u683c\u5f0f\u3002\u7531\u4e8e\u65f6\u95f4\u7cbe\u529b\u6709\u9650\uff0c 1.0 \u7248\u672c\u5e76\u672a\u5728\u5176\u4ed6\u5e73\u53f0\u5f00\u53d1\u6d4b\u8bd5\uff0c\u56e0\u6b64\u63a8\u8350\u5728 Linux \u90e8\u7f72\u3002Windows \u5e73\u53f0\u4e0b\u4ea6\u53ef\u4ee5\u8fd0\u884c\u5927\u90e8\u5206\u63d2\u4ef6\u3002 \u4f5c\u8005\u9009\u7528\u7684\u662f\u817e\u8baf\u4e91\u65b0\u4eba\u4f18\u60e0\u670d\u52a1\u5668 ( 4\u6838/8G/10M/\u4e00\u5e74 )\uff0c\u7cfb\u7edf\u9009\u7528 ubuntu 20.04 LTS\u3002 \u62ff\u5230\u670d\u52a1\u5668\u9996\u5148\u8fdb\u884c\u6362\u6e90\uff0c\u7f51\u4e0a\u80fd\u641c\u5230\u5f88\u591a\u6559\u7a0b eg \u3002 \u7136\u540e\u5c31\u662f\u5e38\u89c1\u7f16\u8bd1\u5de5\u5177\u7684\u5b89\u88c5 (make/cmake) \uff0c\u6b64\u6b65\u9aa4\u53ef\u8df3\u8fc7\u3002 Python \u63a8\u8350\u4f7f\u7528 Miniconda \u4f5c\u4e3a Python \u73af\u5883 \u9996\u5148\uff0c\u6765\u5230\u6e05\u534e\u955c\u50cf\u7684 miniconda\u9875\u9762 \uff0c\u5728\u9875\u9762\u5185\u641c\u7d22\\\"latest\\\"\uff0c\u627e\u5230\\\"Miniconda3-latest-Linux-x86_64.sh\\\"\u7684\u4e0b\u8f7d\u94fe\u63a5\u3002\u63a5\u4e0b\u6765\u5728\u670d\u52a1\u5668\u547d\u4ee4\u884c\u65b0\u5efa ~/tmp \u8def\u5f84\u4f5c\u4e3a\u4e0b\u8f7d\u7f13\u5b58\u8def\u5f84\uff0c\u8fdb\u5165\u5e76\u4e0b\u8f7d\u4e4b\uff0c\u63a8\u8350\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/miniconda3 \uff0c\u5177\u4f53\u547d\u4ee4\u5982\u4e0b\uff1a mkdir ~/tmp cd ~/tmp wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-latest-Linux-x86_64.sh sudo bash Miniconda3-latest-Linux-x86_64.sh \u5b89\u88c5\u5b8cconda\u540e\u4e5f\u8981\u5bf9 conda/pip \u8fdb\u884c\u6362\u6e90\uff0c\u53ef\u4ee5\u53c2\u89c1\u7f51\u4e0a\u6559\u7a0b eg \u3002","title":"\u5b89\u88c5"},{"location":"get-start/installation/#bot","text":"\u4f60\u53ef\u4ee5\u4ece Github \u4e0b\u8f7d Little-UNIkeEN-Bot \u9879\u76ee\u3002\u76f4\u63a5\u514b\u9686\u6211\u4eec\u7684 Git \u4ed3\u5e93\u5373\u53ef\u5b8c\u6210\u5b89\u88c5\uff1a git clone git@github.com:UNIkeEN/Little-UNIkeEN-Bot.git","title":"\u5b89\u88c5 Bot"},{"location":"get-start/installation/#python","text":"\u672c\u9879\u76ee\u7684Python\u5305\u4f9d\u8d56\u90fd\u5199\u5728\u4e86\u6839\u76ee\u5f55\u4e0b\u7684 requirements.txt \u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528\u65f6\u53ea\u9700\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u5b89\u88c5\u3002 pip install -r requirements.txt","title":"Python\u5305\u4f9d\u8d56"},{"location":"get-start/installation/#_1","text":"Linux (Ubuntu 20.04 LTS) python >= 3.7 mysql >= 8.0","title":"\u63a8\u8350\u90e8\u7f72\u73af\u5883\u4e0e\u8be6\u7ec6\u6559\u7a0b"},{"location":"get-start/installation/#linux","text":"\u4f5c\u8005\u662f\u5728Linux\u5e73\u53f0\u90e8\u7f72\u5f00\u53d1\u7684\uff0c\u6709\u6781\u5c11\u90e8\u5206\u63d2\u4ef6\u7684\u547d\u4ee4\u662f shell \u683c\u5f0f\u3002\u7531\u4e8e\u65f6\u95f4\u7cbe\u529b\u6709\u9650\uff0c 1.0 \u7248\u672c\u5e76\u672a\u5728\u5176\u4ed6\u5e73\u53f0\u5f00\u53d1\u6d4b\u8bd5\uff0c\u56e0\u6b64\u63a8\u8350\u5728 Linux \u90e8\u7f72\u3002Windows \u5e73\u53f0\u4e0b\u4ea6\u53ef\u4ee5\u8fd0\u884c\u5927\u90e8\u5206\u63d2\u4ef6\u3002 \u4f5c\u8005\u9009\u7528\u7684\u662f\u817e\u8baf\u4e91\u65b0\u4eba\u4f18\u60e0\u670d\u52a1\u5668 ( 4\u6838/8G/10M/\u4e00\u5e74 )\uff0c\u7cfb\u7edf\u9009\u7528 ubuntu 20.04 LTS\u3002 \u62ff\u5230\u670d\u52a1\u5668\u9996\u5148\u8fdb\u884c\u6362\u6e90\uff0c\u7f51\u4e0a\u80fd\u641c\u5230\u5f88\u591a\u6559\u7a0b eg \u3002 \u7136\u540e\u5c31\u662f\u5e38\u89c1\u7f16\u8bd1\u5de5\u5177\u7684\u5b89\u88c5 (make/cmake) \uff0c\u6b64\u6b65\u9aa4\u53ef\u8df3\u8fc7\u3002","title":"Linux"},{"location":"get-start/installation/#python_1","text":"\u63a8\u8350\u4f7f\u7528 Miniconda \u4f5c\u4e3a Python \u73af\u5883 \u9996\u5148\uff0c\u6765\u5230\u6e05\u534e\u955c\u50cf\u7684 miniconda\u9875\u9762 \uff0c\u5728\u9875\u9762\u5185\u641c\u7d22\\\"latest\\\"\uff0c\u627e\u5230\\\"Miniconda3-latest-Linux-x86_64.sh\\\"\u7684\u4e0b\u8f7d\u94fe\u63a5\u3002\u63a5\u4e0b\u6765\u5728\u670d\u52a1\u5668\u547d\u4ee4\u884c\u65b0\u5efa ~/tmp \u8def\u5f84\u4f5c\u4e3a\u4e0b\u8f7d\u7f13\u5b58\u8def\u5f84\uff0c\u8fdb\u5165\u5e76\u4e0b\u8f7d\u4e4b\uff0c\u63a8\u8350\u5b89\u88c5\u8def\u5f84\u4e3a /usr/local/miniconda3 \uff0c\u5177\u4f53\u547d\u4ee4\u5982\u4e0b\uff1a mkdir ~/tmp cd ~/tmp wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/Miniconda3-latest-Linux-x86_64.sh sudo bash Miniconda3-latest-Linux-x86_64.sh \u5b89\u88c5\u5b8cconda\u540e\u4e5f\u8981\u5bf9 conda/pip \u8fdb\u884c\u6362\u6e90\uff0c\u53ef\u4ee5\u53c2\u89c1\u7f51\u4e0a\u6559\u7a0b eg \u3002","title":"Python"},{"location":"get-start/question/","text":"\u5982\u679c\u4f60\u5728\u90e8\u7f72\u4e0e\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\u6216\u6709\u6240\u5efa\u8bae\uff0c\u6b22\u8fce\u70b9\u51fb\u4e0b\u65b9\u94fe\u63a5\u5411\u6211\u4eec\u63d0\u51fa issue Github | Little-UNIkeEN-Bot \u95ee\u9898\u8bf7\u4f7f\u7528 Question \u6a21\u677f~","title":"\u9047\u5230\u95ee\u9898"},{"location":"get-start/set-driver/","text":"\u914d\u7f6e\u9a71\u52a8\u5668 Little-UNIkeEN-Bot \u662f QQ \u673a\u5668\u4eba\u524d\u7aef\uff0c\u53ea\u80fd\u5904\u7406\u4ea4\u4e92\u903b\u8f91\uff0c\u4e0d\u80fd\u76f4\u63a5\u5b9e\u73b0 QQ \u673a\u5668\u4eba\u7684\u6240\u6709\u529f\u80fd\u3002\u6211\u4eec\u9700\u8981\u989d\u5916\u5b89\u88c5\u9a71\u52a8\u5668\u6765\u5b9e\u73b0\u4e0eQQ\u670d\u52a1\u5668\u7684\u4fe1\u606f\u6536\u53d1\u4e0e\u4ea4\u4e92\u3002 \u5b89\u88c5 go-cqhttp \u672c Bot \u9ed8\u8ba4\u4f7f\u7528 go-cqhttp \u4f5c\u4e3a\u9a71\u52a8\u5668\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u65e0\u5934 QQ \u5ba2\u6237\u7aef\uff0c\u5173\u4e8e\u5176\u5b89\u88c5\u8bf7\u89c1 go-cqhttp\u5b98\u7f51 - \u5b89\u88c5 \u3002 \u914d\u7f6e go-cqhttp \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7b2c\u4e00\u6b21\u6253\u5f00 go-cqhttp \u65f6\u8bf7\u9009\u62e9\u201cHTTP\u901a\u4fe1\u201d\uff0c\u7136\u540e\u4fee\u6539\u751f\u6210\u7684 config.yml \u6587\u4ef6\u5982\u4e0b\uff1a account : uin : { YOUR_BOT_QQ } # \u4f5c\u4e3a\u673a\u5668\u4eba\u7684QQ\u8d26\u53f7 password : { YOUR_BOT_PASSWORD } # \u5bc6\u7801\u4e3a\u7a7a\u65f6\u4f7f\u7528\u626b\u7801\u767b\u5f55 encrypt : false # \u662f\u5426\u5f00\u542f\u5bc6\u7801\u52a0\u5bc6 ... servers : - http : # HTTP \u901a\u4fe1\u8bbe\u7f6e address : 127.0.0.1:5700 # HTTP\u76d1\u542c\u5730\u5740(\u7aef\u53e3\u53f7\u53ef\u53d8) timeout : 5 # \u53cd\u5411 HTTP \u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u79d2\uff0c<5 \u65f6\u5c06\u88ab\u5ffd\u7565 long-polling : # \u957f\u8f6e\u8be2\u62d3\u5c55 enabled : false # \u662f\u5426\u5f00\u542f max-queue-size : 2000 # \u6d88\u606f\u961f\u5217\u5927\u5c0f\uff0c0 \u8868\u793a\u4e0d\u9650\u5236\u961f\u5217\u5927\u5c0f\uff0c\u8c28\u614e\u4f7f\u7528 middlewares : << : *default # \u5f15\u7528\u9ed8\u8ba4\u4e2d\u95f4\u4ef6 post : # \u53cd\u5411HTTP POST\u5730\u5740\u5217\u8868 - url : http://127.0.0.1:5701/ # \u5730\u5740(\u7aef\u53e3\u53f7\u53ef\u53d8) secret : '' # \u5bc6\u94a5 max-retries : 2 # \u6700\u5927\u91cd\u8bd5\uff0c0 \u65f6\u7981\u7528 retries-interval : 1000 # \u91cd\u8bd5\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2\uff0c0 \u65f6\u7acb\u5373 \u8bf7\u8bb0\u4f4f\u4e24\u5904\u9ad8\u4eae\u5904\u60a8\u8bbe\u7f6e\u7684\u7aef\u53e3\u53f7\uff0c\u5728\"\u90e8\u7f72 Bot\"\u4e00\u8282\uff0c\u6211\u4eec\u5c06\u518d\u6b21\u7528\u5230\u3002 \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5176\u4f59\u90e8\u5206\uff08\u5982\u8d26\u53f7\u767b\u9646\u72b6\u6001\uff0c\u6d88\u606f\u53d1\u9001\u91cd\u8bd5\u6b21\u6570\u7b49\uff09\uff0c\u4f60\u5747\u53ef\u4ee5\u53c2\u8003\u6ce8\u91ca\uff0c\u6309\u9700\u66f4\u6539\u3002 \u542f\u52a8 go-cqhttp \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u60a8\u53ef\u4ee5\u542f\u52a8 go-cqhttp\u3002 Windows \u73af\u5883\u4e0b\u76f4\u63a5\u8fd0\u884c go-cqhttp.bat Linux \u73af\u5883\u4e0b\uff0c\u5728 go-cqhttp \u76ee\u5f55\u4e0b\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u8fd0\u884c ./go-cqhttp \u63d0\u793a\uff1a\u540e\u53f0\u8fd0\u884c\u4e0e\u591a\u7ec8\u7aef\u7ba1\u7406 Linux\u73af\u5883\u4e0b\uff0c\u63a8\u8350\u4f7f\u7528 tmux \u7ba1\u7406\u7ec8\u7aef\uff0c\u5e76\u5728 tmux \u4e2d\u65b0\u5efa\u4e00\u4e2a session \u4ee5\u540e\u53f0\u8fd0\u884c go-cqhttp \u767b\u5f55\u95ee\u9898 \u5728\u4f7f\u7528 go-cqhttp \u767b\u5f55\u4f60\u7684 Bot \u8d26\u53f7\u65f6\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u5b89\u5168\u9a8c\u8bc1\u3002 \u5982\u4f60\u5728\u672c\u673a\u8fd0\u884c\uff0c\u8bf7\u4f7f\u7528\u626b\u7801\u767b\u5f55\u3002 \u5982\u4f60\u5728\u670d\u52a1\u5668\u8fd0\u884c\uff0c\u7531\u4e8e\u626b\u7801\u624b\u673a\u4e0e\u670d\u52a1\u5668\u7aef\u901a\u5e38\u4e0d\u5728\u540c\u4e00\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u4f60\u53ef\u80fd\u4f1a\u9047\u5230\u626b\u7801\u5931\u8d25\u7684\u60c5\u51b5\u3002\u6b64\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u672c\u673a\u4f7f\u7528 go-cqhttp \u626b\u7801\u767b\u5f55\uff0c\u5e76\u5c06\u4ea7\u751f\u7684 device.json \u548c session.token \u6587\u4ef6\u590d\u5236\u5230\u670d\u52a1\u5668\u7684 go-cqhttp \u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8 go-cqhttp \u3002","title":"\u914d\u7f6e\u9a71\u52a8\u5668"},{"location":"get-start/set-driver/#_1","text":"Little-UNIkeEN-Bot \u662f QQ \u673a\u5668\u4eba\u524d\u7aef\uff0c\u53ea\u80fd\u5904\u7406\u4ea4\u4e92\u903b\u8f91\uff0c\u4e0d\u80fd\u76f4\u63a5\u5b9e\u73b0 QQ \u673a\u5668\u4eba\u7684\u6240\u6709\u529f\u80fd\u3002\u6211\u4eec\u9700\u8981\u989d\u5916\u5b89\u88c5\u9a71\u52a8\u5668\u6765\u5b9e\u73b0\u4e0eQQ\u670d\u52a1\u5668\u7684\u4fe1\u606f\u6536\u53d1\u4e0e\u4ea4\u4e92\u3002","title":"\u914d\u7f6e\u9a71\u52a8\u5668"},{"location":"get-start/set-driver/#go-cqhttp","text":"\u672c Bot \u9ed8\u8ba4\u4f7f\u7528 go-cqhttp \u4f5c\u4e3a\u9a71\u52a8\u5668\uff0c\u8fd9\u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u65e0\u5934 QQ \u5ba2\u6237\u7aef\uff0c\u5173\u4e8e\u5176\u5b89\u88c5\u8bf7\u89c1 go-cqhttp\u5b98\u7f51 - \u5b89\u88c5 \u3002","title":"\u5b89\u88c5 go-cqhttp"},{"location":"get-start/set-driver/#go-cqhttp_1","text":"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u7b2c\u4e00\u6b21\u6253\u5f00 go-cqhttp \u65f6\u8bf7\u9009\u62e9\u201cHTTP\u901a\u4fe1\u201d\uff0c\u7136\u540e\u4fee\u6539\u751f\u6210\u7684 config.yml \u6587\u4ef6\u5982\u4e0b\uff1a account : uin : { YOUR_BOT_QQ } # \u4f5c\u4e3a\u673a\u5668\u4eba\u7684QQ\u8d26\u53f7 password : { YOUR_BOT_PASSWORD } # \u5bc6\u7801\u4e3a\u7a7a\u65f6\u4f7f\u7528\u626b\u7801\u767b\u5f55 encrypt : false # \u662f\u5426\u5f00\u542f\u5bc6\u7801\u52a0\u5bc6 ... servers : - http : # HTTP \u901a\u4fe1\u8bbe\u7f6e address : 127.0.0.1:5700 # HTTP\u76d1\u542c\u5730\u5740(\u7aef\u53e3\u53f7\u53ef\u53d8) timeout : 5 # \u53cd\u5411 HTTP \u8d85\u65f6\u65f6\u95f4, \u5355\u4f4d\u79d2\uff0c<5 \u65f6\u5c06\u88ab\u5ffd\u7565 long-polling : # \u957f\u8f6e\u8be2\u62d3\u5c55 enabled : false # \u662f\u5426\u5f00\u542f max-queue-size : 2000 # \u6d88\u606f\u961f\u5217\u5927\u5c0f\uff0c0 \u8868\u793a\u4e0d\u9650\u5236\u961f\u5217\u5927\u5c0f\uff0c\u8c28\u614e\u4f7f\u7528 middlewares : << : *default # \u5f15\u7528\u9ed8\u8ba4\u4e2d\u95f4\u4ef6 post : # \u53cd\u5411HTTP POST\u5730\u5740\u5217\u8868 - url : http://127.0.0.1:5701/ # \u5730\u5740(\u7aef\u53e3\u53f7\u53ef\u53d8) secret : '' # \u5bc6\u94a5 max-retries : 2 # \u6700\u5927\u91cd\u8bd5\uff0c0 \u65f6\u7981\u7528 retries-interval : 1000 # \u91cd\u8bd5\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2\uff0c0 \u65f6\u7acb\u5373 \u8bf7\u8bb0\u4f4f\u4e24\u5904\u9ad8\u4eae\u5904\u60a8\u8bbe\u7f6e\u7684\u7aef\u53e3\u53f7\uff0c\u5728\"\u90e8\u7f72 Bot\"\u4e00\u8282\uff0c\u6211\u4eec\u5c06\u518d\u6b21\u7528\u5230\u3002 \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u5176\u4f59\u90e8\u5206\uff08\u5982\u8d26\u53f7\u767b\u9646\u72b6\u6001\uff0c\u6d88\u606f\u53d1\u9001\u91cd\u8bd5\u6b21\u6570\u7b49\uff09\uff0c\u4f60\u5747\u53ef\u4ee5\u53c2\u8003\u6ce8\u91ca\uff0c\u6309\u9700\u66f4\u6539\u3002","title":"\u914d\u7f6e go-cqhttp"},{"location":"get-start/set-driver/#go-cqhttp_2","text":"\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u60a8\u53ef\u4ee5\u542f\u52a8 go-cqhttp\u3002 Windows \u73af\u5883\u4e0b\u76f4\u63a5\u8fd0\u884c go-cqhttp.bat Linux \u73af\u5883\u4e0b\uff0c\u5728 go-cqhttp \u76ee\u5f55\u4e0b\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u8fd0\u884c ./go-cqhttp \u63d0\u793a\uff1a\u540e\u53f0\u8fd0\u884c\u4e0e\u591a\u7ec8\u7aef\u7ba1\u7406 Linux\u73af\u5883\u4e0b\uff0c\u63a8\u8350\u4f7f\u7528 tmux \u7ba1\u7406\u7ec8\u7aef\uff0c\u5e76\u5728 tmux \u4e2d\u65b0\u5efa\u4e00\u4e2a session \u4ee5\u540e\u53f0\u8fd0\u884c go-cqhttp","title":"\u542f\u52a8 go-cqhttp"},{"location":"get-start/set-driver/#_2","text":"\u5728\u4f7f\u7528 go-cqhttp \u767b\u5f55\u4f60\u7684 Bot \u8d26\u53f7\u65f6\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u5b89\u5168\u9a8c\u8bc1\u3002 \u5982\u4f60\u5728\u672c\u673a\u8fd0\u884c\uff0c\u8bf7\u4f7f\u7528\u626b\u7801\u767b\u5f55\u3002 \u5982\u4f60\u5728\u670d\u52a1\u5668\u8fd0\u884c\uff0c\u7531\u4e8e\u626b\u7801\u624b\u673a\u4e0e\u670d\u52a1\u5668\u7aef\u901a\u5e38\u4e0d\u5728\u540c\u4e00\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u4f60\u53ef\u80fd\u4f1a\u9047\u5230\u626b\u7801\u5931\u8d25\u7684\u60c5\u51b5\u3002\u6b64\u65f6\uff0c\u4f60\u53ef\u4ee5\u5728\u672c\u673a\u4f7f\u7528 go-cqhttp \u626b\u7801\u767b\u5f55\uff0c\u5e76\u5c06\u4ea7\u751f\u7684 device.json \u548c session.token \u6587\u4ef6\u590d\u5236\u5230\u670d\u52a1\u5668\u7684 go-cqhttp \u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u91cd\u65b0\u542f\u52a8 go-cqhttp \u3002","title":"\u767b\u5f55\u95ee\u9898"},{"location":"get-start/set-sql/","text":"\u914d\u7f6eSQL Little-UNIkeEN-Bot \u5173\u4e8e\u7528\u6237\u6570\u636e\u3001\u529f\u80fd\u914d\u7f6e\u7b49\u6570\u636e\u5b58\u50a8\u5747\u662f\u57fa\u4e8e MySQL \u5b9e\u73b0\u7684\u3002\u5728\u8fd0\u884c Bot \u4e4b\u524d\uff0c\u4f60\u9700\u8981\u4e3a\u670d\u52a1\u5668\u5b89\u88c5 MySQL \u73af\u5883\u3002 \u5173\u4e8e MySQL \u7684\u5b89\u88c5\uff0c\u53ef\u4ee5\u53c2\u89c1\u5982\u4e0b\u6559\u7a0b eg1 \uff0c eg2 \u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u9996\u5148\u5230 MySQL\u5b98\u7f51 \u4e0b\u8f7d\u5bf9\u5e94\u64cd\u4f5c\u7cfb\u7edf\u7684\u5305\uff0c\u641c\u7d22\u6761\u4ef6\u5982\u4e0b\uff08ProductVersion \u9009\u62e9\u6700\u65b0\uff0cOsVersion \u9009\u62e9\u76f8\u5e94\u7cfb\u7edf\u7248\u672c\uff09\uff1a \u590d\u5236\u4e0b\u8f7d\u94fe\u63a5\u5e76\u5728\u7ec8\u7aef\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a # stage 1: download cd ~/tmp wget ${ YOUR_COPIED_URL } sudo dpkg -i ${ DOWNLOADED_DEB } sudo apt update sudo apt install mysql-server # stage 2: init sudo chown -R mysql:mysql /var/lib/mysql/ mysqld --initialize systemctl start mysqld \u5b8c\u6210\u5b89\u88c5\u540e\uff0c\u4fee\u6539\u914d\u7f6e\u548c\u5bc6\u7801\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u4e0a\u8ff0\u7f51\u7ad9\u6559\u7a0b\u3002 \u76f4\u5230\u4f60\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u540e\u53ef\u4ee5\u663e\u793a MySQL \u547d\u4ee4\u884c\uff0c\u4f60\u7684 MySQL \u5b89\u88c5\u8fc7\u7a0b\u5c31\u7b97\u5927\u529f\u544a\u6210\u4e86\uff1a mysql -u root -p \u63d0\u793a\uff1a\u53ef\u89c6\u5316 \u5982\u679c\u4f60\u662f\u5728\u672c\u673a\u5b89\u88c5SQL\u7684\u8bdd\uff0c\u63a8\u8350 MySQL Workbench \u4f5c\u4e3a MySQL \u53ef\u89c6\u5316\u5de5\u5177\u3002 \u6ce8\u610f\uff1a\u65e7\u7684\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u4e00\u4e9b\u5185\u6d4b\u65f6\u671f\u7684\u65e7\u7248\u529f\u80fd\u63d2\u4ef6\u53ef\u80fd\u4f7f\u7528 JSON \u6587\u4ef6\u5b58\u50a8\u7528\u6237\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u4fee\u6539\u4e3a SQL \u5b58\u50a8\u3002\u51fa\u4e8e\u6027\u80fd\u4e0e\u7edf\u4e00\u5316\u8003\u91cf\uff0c\u6211\u4eec\u63a8\u8350\u60a8\u4f7f\u7528 SQL \u5b58\u50a8\u3002","title":"\u914d\u7f6e SQL"},{"location":"get-start/set-sql/#sql","text":"Little-UNIkeEN-Bot \u5173\u4e8e\u7528\u6237\u6570\u636e\u3001\u529f\u80fd\u914d\u7f6e\u7b49\u6570\u636e\u5b58\u50a8\u5747\u662f\u57fa\u4e8e MySQL \u5b9e\u73b0\u7684\u3002\u5728\u8fd0\u884c Bot \u4e4b\u524d\uff0c\u4f60\u9700\u8981\u4e3a\u670d\u52a1\u5668\u5b89\u88c5 MySQL \u73af\u5883\u3002 \u5173\u4e8e MySQL \u7684\u5b89\u88c5\uff0c\u53ef\u4ee5\u53c2\u89c1\u5982\u4e0b\u6559\u7a0b eg1 \uff0c eg2 \u3002 \u5177\u4f53\u6765\u8bf4\uff0c\u9996\u5148\u5230 MySQL\u5b98\u7f51 \u4e0b\u8f7d\u5bf9\u5e94\u64cd\u4f5c\u7cfb\u7edf\u7684\u5305\uff0c\u641c\u7d22\u6761\u4ef6\u5982\u4e0b\uff08ProductVersion \u9009\u62e9\u6700\u65b0\uff0cOsVersion \u9009\u62e9\u76f8\u5e94\u7cfb\u7edf\u7248\u672c\uff09\uff1a \u590d\u5236\u4e0b\u8f7d\u94fe\u63a5\u5e76\u5728\u7ec8\u7aef\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a # stage 1: download cd ~/tmp wget ${ YOUR_COPIED_URL } sudo dpkg -i ${ DOWNLOADED_DEB } sudo apt update sudo apt install mysql-server # stage 2: init sudo chown -R mysql:mysql /var/lib/mysql/ mysqld --initialize systemctl start mysqld \u5b8c\u6210\u5b89\u88c5\u540e\uff0c\u4fee\u6539\u914d\u7f6e\u548c\u5bc6\u7801\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u4e0a\u8ff0\u7f51\u7ad9\u6559\u7a0b\u3002 \u76f4\u5230\u4f60\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u540e\u53ef\u4ee5\u663e\u793a MySQL \u547d\u4ee4\u884c\uff0c\u4f60\u7684 MySQL \u5b89\u88c5\u8fc7\u7a0b\u5c31\u7b97\u5927\u529f\u544a\u6210\u4e86\uff1a mysql -u root -p \u63d0\u793a\uff1a\u53ef\u89c6\u5316 \u5982\u679c\u4f60\u662f\u5728\u672c\u673a\u5b89\u88c5SQL\u7684\u8bdd\uff0c\u63a8\u8350 MySQL Workbench \u4f5c\u4e3a MySQL \u53ef\u89c6\u5316\u5de5\u5177\u3002 \u6ce8\u610f\uff1a\u65e7\u7684\u6570\u636e\u5b58\u50a8\u683c\u5f0f \u4e00\u4e9b\u5185\u6d4b\u65f6\u671f\u7684\u65e7\u7248\u529f\u80fd\u63d2\u4ef6\u53ef\u80fd\u4f7f\u7528 JSON \u6587\u4ef6\u5b58\u50a8\u7528\u6237\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u4fee\u6539\u4e3a SQL \u5b58\u50a8\u3002\u51fa\u4e8e\u6027\u80fd\u4e0e\u7edf\u4e00\u5316\u8003\u91cf\uff0c\u6211\u4eec\u63a8\u8350\u60a8\u4f7f\u7528 SQL \u5b58\u50a8\u3002","title":"\u914d\u7f6eSQL"},{"location":"plugin/introduction/","text":"Little-UNIkeEN-Bot \u901a\u8fc7\u63d2\u4ef6\u673a\u5236\u5b9e\u73b0\u529f\u80fd\u7684\u5f00\u53d1\uff0c\u901a\u8fc7\u7ef4\u62a4\u63d2\u4ef6\u5217\u8868\u5b9e\u73b0\u529f\u80fd\u7684\u589e\u51cf\u3002 \u63d2\u4ef6\u903b\u8f91 \u6240\u6709\u63d2\u4ef6\u90fd\u5fc5\u987b\u7ee7\u627f\u4e8e StandardPlugin \u7c7b\uff0c\u5e76\u5b9e\u73b0\u4ee5\u4e0b\u4e09\u4e2a\u63a5\u53e3\u51fd\u6570\uff1a \u63a5\u53e3\u540d\u79f0 \u53c2\u6570 \u8fd4\u56de\u503c\u7c7b\u578b \u4f5c\u7528 judgeTrigger @msg : \u6d88\u606f\u6587\u672c\uff0c str \u7c7b\u578b @data : \u6d88\u606f\u6240\u5305\u62ec\u7684\u6240\u6709\u4fe1\u606f\uff0c dict \u7c7b\u578b bool \u5224\u65ad\u6b64\u63d2\u4ef6\u662f\u5426\u4f1a\u89e6\u53d1 executeEvent @msg : \u6d88\u606f\u6587\u672c\uff0c str \u7c7b\u578b @data : \u6d88\u606f\u6240\u5305\u62ec\u7684\u6240\u6709\u4fe1\u606f\uff0c dict \u7c7b\u578b str \u6216\u8005 None \u6267\u884c\u63d2\u4ef6\u903b\u8f91 getPluginInfo None dict \u8fd4\u56de\u63d2\u4ef6\u4fe1\u606f \u5f00\u53d1\u8005\u5728 main.py \u4e2d import \u529f\u80fd\u63d2\u4ef6\uff0c\u5e76\u7ef4\u62a4 main.py \u4e2d\u7684\u63d2\u4ef6\u5217\u8868\u4ee5\u589e\u51cf\u63d2\u4ef6\uff0c\u5173\u4e8e\u63d2\u4ef6\u7684\u5177\u4f53\u793a\u4f8b\u8bf7\u89c1\u4e0b\u4e00\u8282\u3002 Bot \u8fd0\u884c\u6536\u5230\u7fa4\u804a/\u79c1\u804a\u6d88\u606f\u65f6\uff0c\u5c06\u904d\u5386\u7fa4\u804a/\u79c1\u804a\u63d2\u4ef6\u5217\u8868\uff0c\u9010\u4e00\u8c03\u7528\u5404\u63d2\u4ef6\u7684 judgeTrigger() \u51fd\u6570\uff0c\u82e5\u8fd4\u56de\u503c\u4e3a\u771f\u5219\u89e6\u53d1\uff0c\u8c03\u7528\u8be5\u63d2\u4ef6\u7684 executeEvent() \u51fd\u6570\u8fdb\u884c\u54cd\u5e94\u3002\u63d2\u4ef6\u7684 getPluginInfo() \u51fd\u6570\u5219\u5728\u7528\u6237\u83b7\u53d6\u5e2e\u52a9\u4fe1\u606f\u65f6\u88ab\u9010\u4e00\u8c03\u7528\u3002 \u7279\u522b\u5f3a\u8c03\uff0c\u5173\u4e8e getPluginInfo() \u7684\u8fd4\u56de\u503c\u683c\u5f0f\uff0c\u8981\u6c42\u5982\u4e0b\uff1a { 'name' : 'Faq' , # require 'description' : '\u95ee\u7b54\u5e93' , # require 'commandDescription' : '\u95ee [title]' , # require 'usePlace' : [ 'group' , 'private' , ], # require 'showInHelp' : True , # suggest, default True 'pluginConfigTableNames' : [ 'Faq' ,], # suggest, must be unique among plugins 'version' : '1.0.0' , # suggest 'author' : 'Unicorn' , # suggest ... # any other information you want } \u540d\u79f0 \u7c7b\u578b \u4f5c\u7528 \u662f\u5426\u5fc5\u987b 'name' str \u63d0\u793a\u8fd9\u4e2a\u63d2\u4ef6\u7684class\u540d\u79f0 \u662f 'description' str \u7b80\u8981\u63cf\u8ff0\u8fd9\u4e2a\u63d2\u4ef6 \u662f 'commandDescription' str \u6982\u62ec\u89e6\u53d1\u8fd9\u4e2a\u63d2\u4ef6\u7684\u5173\u952e\u8bcd \u662f 'usePlace' list \u63cf\u8ff0\u8fd9\u4e2a\u63d2\u4ef6\u7684\u4f5c\u7528\u57df 'private': \u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u5728\u79c1\u804a\u5f00\u542f 'group': \u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u5728\u7fa4\u804a\u5f00\u542f \u662f 'showInHelp' bool \u662f\u5426\u5728help\u65f6\u5c55\u793a \u5426\uff0c\u9ed8\u8ba4 True 'pluginConfigTableNames' list \u8fd9\u4e2a\u63d2\u4ef6\u6240\u9700\u8981\u5360\u7528\u7684\u6570\u636e\u5e93\u8868\u540d\u3002\u6ce8\u610f\uff0c\u63d2\u4ef6\u5f00\u53d1\u8005\u521b\u5efa\u7684sql\u8868\u5c3d\u91cf\u6302\u5728 BOT_DATA \u8fd9\u4e2a\u5e93\u4e0b\u9762\uff0c\u56e0\u6b64\u9700\u8981\u907f\u514d\u8868\u91cd\u540d\u3002 \u5426 'version' str \u63d2\u4ef6\u7248\u672c \u5426 'author' str \u63d2\u4ef6\u4f5c\u8005 \u5426 \u63d2\u4ef6\u793a\u8303 \u4ee5\u4e0b\u7684\u4ee3\u7801\u53ef\u4ee5\u5b9e\u73b0\uff0c\u5728\u7fa4\u804a\u6216\u79c1\u804a\u4e2d\u6709\u4eba\u53d1\u9001\u5173\u952e\u8bcd\u201c\u653e\u4e2a\u70df\u82b1\u201d\u6216\u201c\u70df\u82b1\u201d\u65f6\uff0cBot \u56de\u590d\u8d85\u7ea7\u8868\u60c5\u201c\u70df\u82b1\u201d\u3002 plugins/superEmoji.py \u4e2d\u5b9e\u73b0\u63d2\u4ef6\u529f\u80fd\u4ee3\u7801\uff1a from typing import Union , Any from utils.basicEvent import * from utils.standardPlugin import StandardPlugin # \u5f15\u5165StandardPlugin class FireworksFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u653e\u4e2a\u70df\u82b1' , '\u70df\u82b1' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=333,type=sticker]\" , data [ 'message_type' ]) # \u53d1\u9001\u6d88\u606f return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FireworksFace' , 'description' : '\u70df\u82b1' , 'commandDescription' : '\u653e\u4e2a\u70df\u82b1/\u70df\u82b1' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } \u53d1\u9001\u6d88\u606f\u51fd\u6570 send() \u7684\u5177\u4f53\u53c2\u6570\u4e0e\u529f\u80fd\u8bf7\u89c1 API\u3002 \u5728 main.py \u7684\u63d2\u4ef6\u5217\u8868\u4e2d\u542f\u7528\u63d2\u4ef6\uff1a from plugins.superEmoji import * ... GroupPluginList = [ # \u7fa4\u63d2\u4ef6\u5217\u8868 ... , FireworksFace (), # \u5728\u6b64\u5904\u6dfb\u52a0\u63d2\u4ef6\u7c7b\u4ee5\u5728\u7fa4\u804a\u65f6\u542f\u7528 ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 ... , FireworksFace (), # \u5728\u6b64\u5904\u6dfb\u52a0\u63d2\u4ef6\u7c7b\u4ee5\u5728\u79c1\u804a\u65f6\u542f\u7528 ] \u63d0\u793a\uff1a\u4ee3\u7801\u7ed3\u6784 \u4e3a\u4fbf\u4e8e\u7ba1\u7406\uff0c\u6211\u4eec\u63a8\u8350\u5c06\u529f\u80fd\u63d2\u4ef6\u7684\u4ee3\u7801\u6587\u4ef6\u653e\u5728 plugins/ \u76ee\u5f55\u4e0b\uff0c\u5e76\u5728 main.py \u4e2d import \u3002\u5982\u679c\u6709\u9700\u8981\uff0c\u4f60\u53ef\u4ee5\u968f\u610f\u66f4\u6539\u6b64\u4ee3\u7801\u7ed3\u6784\u3002 \u6ce8\u610f\uff1a\u89e6\u53d1\u6761\u4ef6\u51b2\u7a81 Bot \u5728\u8bbe\u8ba1\u65f6\u9ed8\u8ba4\u4e00\u53e5\u6307\u4ee4\u53ea\u80fd\u8fdb\u884c\u4e00\u6b21\u54cd\u5e94\uff0c\u5f00\u53d1\u8005\u8bf7\u5c3d\u91cf\u786e\u4fdd\u89e6\u53d1\u6761\u4ef6\u4e0d\u51b2\u7a81\uff0c\u6216\u8003\u8651\u63d2\u4ef6\u5217\u8868\u4e2d\u5404\u63d2\u4ef6\u7684\u5148\u540e\u987a\u5e8f\u3002 \u5982\u67d0\u4e00\u63d2\u4ef6\u89e6\u53d1\u4f46\u4e0d\u63d0\u4f9b\u54cd\u5e94\uff0c\u53ef\u4ee5\u8fd4\u56de None \u4ee5\u7ee7\u7eed\u6267\u884c\u5217\u8868\u4e2d\u7684\u540e\u7eed\u63d2\u4ef6\u3002 \u4ee3\u7801\u5206\u6790 # parts of utils/standardPlugin.py from abc import ABC , abstractmethod from typing import Union , Tuple , Any , List class StandardPlugin ( ABC ): @abstractmethod def judgeTrigger ( self , msg : str , data : Any ) -> bool : \"\"\" @msg: message text @data: all the message data, including group_id or user_id @return: whether trigger this class \"\"\" raise NotImplementedError @abstractmethod def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: \"\"\" @msg: message text @data: all the message data, including group_id or user_id @return: if None, then continue tranversing following plugins if \"OK\", then stop tranversing \"\"\" raise NotImplementedError @abstractmethod def getPluginInfo ( self ) -> dict : \"\"\" @return: a dict object like: { 'name': 'Faq', # require 'description': '\u95ee\u7b54\u5e93', # require 'commandDescription': '\u95ee [title]', # require 'usePlace': ['group', 'private', ], # require 'showInHelp': True, # suggest, default True 'pluginConfigTableNames': ['Faq',], # suggest, must be unique among plugins 'version': '1.0.0', # suggest 'author': 'Unicorn', # suggest ... # any other information you want } \"\"\" raise NotImplementedError","title":"\u63d2\u4ef6\u5165\u95e8"},{"location":"plugin/introduction/#_1","text":"\u6240\u6709\u63d2\u4ef6\u90fd\u5fc5\u987b\u7ee7\u627f\u4e8e StandardPlugin \u7c7b\uff0c\u5e76\u5b9e\u73b0\u4ee5\u4e0b\u4e09\u4e2a\u63a5\u53e3\u51fd\u6570\uff1a \u63a5\u53e3\u540d\u79f0 \u53c2\u6570 \u8fd4\u56de\u503c\u7c7b\u578b \u4f5c\u7528 judgeTrigger @msg : \u6d88\u606f\u6587\u672c\uff0c str \u7c7b\u578b @data : \u6d88\u606f\u6240\u5305\u62ec\u7684\u6240\u6709\u4fe1\u606f\uff0c dict \u7c7b\u578b bool \u5224\u65ad\u6b64\u63d2\u4ef6\u662f\u5426\u4f1a\u89e6\u53d1 executeEvent @msg : \u6d88\u606f\u6587\u672c\uff0c str \u7c7b\u578b @data : \u6d88\u606f\u6240\u5305\u62ec\u7684\u6240\u6709\u4fe1\u606f\uff0c dict \u7c7b\u578b str \u6216\u8005 None \u6267\u884c\u63d2\u4ef6\u903b\u8f91 getPluginInfo None dict \u8fd4\u56de\u63d2\u4ef6\u4fe1\u606f \u5f00\u53d1\u8005\u5728 main.py \u4e2d import \u529f\u80fd\u63d2\u4ef6\uff0c\u5e76\u7ef4\u62a4 main.py \u4e2d\u7684\u63d2\u4ef6\u5217\u8868\u4ee5\u589e\u51cf\u63d2\u4ef6\uff0c\u5173\u4e8e\u63d2\u4ef6\u7684\u5177\u4f53\u793a\u4f8b\u8bf7\u89c1\u4e0b\u4e00\u8282\u3002 Bot \u8fd0\u884c\u6536\u5230\u7fa4\u804a/\u79c1\u804a\u6d88\u606f\u65f6\uff0c\u5c06\u904d\u5386\u7fa4\u804a/\u79c1\u804a\u63d2\u4ef6\u5217\u8868\uff0c\u9010\u4e00\u8c03\u7528\u5404\u63d2\u4ef6\u7684 judgeTrigger() \u51fd\u6570\uff0c\u82e5\u8fd4\u56de\u503c\u4e3a\u771f\u5219\u89e6\u53d1\uff0c\u8c03\u7528\u8be5\u63d2\u4ef6\u7684 executeEvent() \u51fd\u6570\u8fdb\u884c\u54cd\u5e94\u3002\u63d2\u4ef6\u7684 getPluginInfo() \u51fd\u6570\u5219\u5728\u7528\u6237\u83b7\u53d6\u5e2e\u52a9\u4fe1\u606f\u65f6\u88ab\u9010\u4e00\u8c03\u7528\u3002 \u7279\u522b\u5f3a\u8c03\uff0c\u5173\u4e8e getPluginInfo() \u7684\u8fd4\u56de\u503c\u683c\u5f0f\uff0c\u8981\u6c42\u5982\u4e0b\uff1a { 'name' : 'Faq' , # require 'description' : '\u95ee\u7b54\u5e93' , # require 'commandDescription' : '\u95ee [title]' , # require 'usePlace' : [ 'group' , 'private' , ], # require 'showInHelp' : True , # suggest, default True 'pluginConfigTableNames' : [ 'Faq' ,], # suggest, must be unique among plugins 'version' : '1.0.0' , # suggest 'author' : 'Unicorn' , # suggest ... # any other information you want } \u540d\u79f0 \u7c7b\u578b \u4f5c\u7528 \u662f\u5426\u5fc5\u987b 'name' str \u63d0\u793a\u8fd9\u4e2a\u63d2\u4ef6\u7684class\u540d\u79f0 \u662f 'description' str \u7b80\u8981\u63cf\u8ff0\u8fd9\u4e2a\u63d2\u4ef6 \u662f 'commandDescription' str \u6982\u62ec\u89e6\u53d1\u8fd9\u4e2a\u63d2\u4ef6\u7684\u5173\u952e\u8bcd \u662f 'usePlace' list \u63cf\u8ff0\u8fd9\u4e2a\u63d2\u4ef6\u7684\u4f5c\u7528\u57df 'private': \u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u5728\u79c1\u804a\u5f00\u542f 'group': \u8fd9\u4e2a\u63d2\u4ef6\u53ef\u4ee5\u5728\u7fa4\u804a\u5f00\u542f \u662f 'showInHelp' bool \u662f\u5426\u5728help\u65f6\u5c55\u793a \u5426\uff0c\u9ed8\u8ba4 True 'pluginConfigTableNames' list \u8fd9\u4e2a\u63d2\u4ef6\u6240\u9700\u8981\u5360\u7528\u7684\u6570\u636e\u5e93\u8868\u540d\u3002\u6ce8\u610f\uff0c\u63d2\u4ef6\u5f00\u53d1\u8005\u521b\u5efa\u7684sql\u8868\u5c3d\u91cf\u6302\u5728 BOT_DATA \u8fd9\u4e2a\u5e93\u4e0b\u9762\uff0c\u56e0\u6b64\u9700\u8981\u907f\u514d\u8868\u91cd\u540d\u3002 \u5426 'version' str \u63d2\u4ef6\u7248\u672c \u5426 'author' str \u63d2\u4ef6\u4f5c\u8005 \u5426","title":"\u63d2\u4ef6\u903b\u8f91"},{"location":"plugin/introduction/#_2","text":"\u4ee5\u4e0b\u7684\u4ee3\u7801\u53ef\u4ee5\u5b9e\u73b0\uff0c\u5728\u7fa4\u804a\u6216\u79c1\u804a\u4e2d\u6709\u4eba\u53d1\u9001\u5173\u952e\u8bcd\u201c\u653e\u4e2a\u70df\u82b1\u201d\u6216\u201c\u70df\u82b1\u201d\u65f6\uff0cBot \u56de\u590d\u8d85\u7ea7\u8868\u60c5\u201c\u70df\u82b1\u201d\u3002 plugins/superEmoji.py \u4e2d\u5b9e\u73b0\u63d2\u4ef6\u529f\u80fd\u4ee3\u7801\uff1a from typing import Union , Any from utils.basicEvent import * from utils.standardPlugin import StandardPlugin # \u5f15\u5165StandardPlugin class FireworksFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u653e\u4e2a\u70df\u82b1' , '\u70df\u82b1' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=333,type=sticker]\" , data [ 'message_type' ]) # \u53d1\u9001\u6d88\u606f return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FireworksFace' , 'description' : '\u70df\u82b1' , 'commandDescription' : '\u653e\u4e2a\u70df\u82b1/\u70df\u82b1' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } \u53d1\u9001\u6d88\u606f\u51fd\u6570 send() \u7684\u5177\u4f53\u53c2\u6570\u4e0e\u529f\u80fd\u8bf7\u89c1 API\u3002 \u5728 main.py \u7684\u63d2\u4ef6\u5217\u8868\u4e2d\u542f\u7528\u63d2\u4ef6\uff1a from plugins.superEmoji import * ... GroupPluginList = [ # \u7fa4\u63d2\u4ef6\u5217\u8868 ... , FireworksFace (), # \u5728\u6b64\u5904\u6dfb\u52a0\u63d2\u4ef6\u7c7b\u4ee5\u5728\u7fa4\u804a\u65f6\u542f\u7528 ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 ... , FireworksFace (), # \u5728\u6b64\u5904\u6dfb\u52a0\u63d2\u4ef6\u7c7b\u4ee5\u5728\u79c1\u804a\u65f6\u542f\u7528 ] \u63d0\u793a\uff1a\u4ee3\u7801\u7ed3\u6784 \u4e3a\u4fbf\u4e8e\u7ba1\u7406\uff0c\u6211\u4eec\u63a8\u8350\u5c06\u529f\u80fd\u63d2\u4ef6\u7684\u4ee3\u7801\u6587\u4ef6\u653e\u5728 plugins/ \u76ee\u5f55\u4e0b\uff0c\u5e76\u5728 main.py \u4e2d import \u3002\u5982\u679c\u6709\u9700\u8981\uff0c\u4f60\u53ef\u4ee5\u968f\u610f\u66f4\u6539\u6b64\u4ee3\u7801\u7ed3\u6784\u3002 \u6ce8\u610f\uff1a\u89e6\u53d1\u6761\u4ef6\u51b2\u7a81 Bot \u5728\u8bbe\u8ba1\u65f6\u9ed8\u8ba4\u4e00\u53e5\u6307\u4ee4\u53ea\u80fd\u8fdb\u884c\u4e00\u6b21\u54cd\u5e94\uff0c\u5f00\u53d1\u8005\u8bf7\u5c3d\u91cf\u786e\u4fdd\u89e6\u53d1\u6761\u4ef6\u4e0d\u51b2\u7a81\uff0c\u6216\u8003\u8651\u63d2\u4ef6\u5217\u8868\u4e2d\u5404\u63d2\u4ef6\u7684\u5148\u540e\u987a\u5e8f\u3002 \u5982\u67d0\u4e00\u63d2\u4ef6\u89e6\u53d1\u4f46\u4e0d\u63d0\u4f9b\u54cd\u5e94\uff0c\u53ef\u4ee5\u8fd4\u56de None \u4ee5\u7ee7\u7eed\u6267\u884c\u5217\u8868\u4e2d\u7684\u540e\u7eed\u63d2\u4ef6\u3002","title":"\u63d2\u4ef6\u793a\u8303"},{"location":"plugin/introduction/#_3","text":"# parts of utils/standardPlugin.py from abc import ABC , abstractmethod from typing import Union , Tuple , Any , List class StandardPlugin ( ABC ): @abstractmethod def judgeTrigger ( self , msg : str , data : Any ) -> bool : \"\"\" @msg: message text @data: all the message data, including group_id or user_id @return: whether trigger this class \"\"\" raise NotImplementedError @abstractmethod def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: \"\"\" @msg: message text @data: all the message data, including group_id or user_id @return: if None, then continue tranversing following plugins if \"OK\", then stop tranversing \"\"\" raise NotImplementedError @abstractmethod def getPluginInfo ( self ) -> dict : \"\"\" @return: a dict object like: { 'name': 'Faq', # require 'description': '\u95ee\u7b54\u5e93', # require 'commandDescription': '\u95ee [title]', # require 'usePlace': ['group', 'private', ], # require 'showInHelp': True, # suggest, default True 'pluginConfigTableNames': ['Faq',], # suggest, must be unique among plugins 'version': '1.0.0', # suggest 'author': 'Unicorn', # suggest ... # any other information you want } \"\"\" raise NotImplementedError","title":"\u4ee3\u7801\u5206\u6790"},{"location":"plugin/pluginWithSql/","text":"\u63d2\u4ef6\u7a0b\u5e8f\u5458\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u4e0emysql\u4ea4\u4e92\uff1a \u901a\u8fc7\u73b0\u6709 API \u95f4\u63a5\u4ea4\u4e92\uff0c\u4f8b\u5982 group config \u81ea\u5df1 import mysql.connector \u76f4\u63a5\u4ea4\u4e92 \u7b2c\u4e00\u79cd\u65b9\u5f0f\u6bd4\u8f83\u7b80\u5355\uff0c\u4f46\u662f\u5b9e\u73b0\u7684\u529f\u80fd\u6709\u9650\u3002\u5728 utils.basicEvent \u4e2d\u6709 readGlobalConfig \u7b49\u51fd\u6570\uff0c\u5b83\u4eec\u80fd\u591f\u8bfb\u5199 BOT_DATA.globalConfig \u8868\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u53ea\u80fd\u8bfb\u53d6\u63d2\u4ef6\u662f\u5426\u5728\u67d0\u7fa4\u4e2d\u5f00\u542f\u3001\u67d0\u7fa4\u7684 bot\u7ba1\u7406\u5458 \u6709\u54ea\u51e0\u4e2a\uff0c\u65e0\u6cd5\u8fdb\u884c\u66f4\u591a\u6570\u636e\u7684\u5b58\u53d6\u3002 \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u80fd\u591f\u81ea\u5b9a\u4e49\u8fdb\u884csql\u4ea4\u4e92\uff0c\u5b9e\u73b0\u66f4\u52a0\u4e30\u5bcc\u7684\u529f\u80fd\u3002\u4f8b\u5982 \u6ce8\u610f\uff1a\u6570\u636e\u5e93\u4ea4\u4e92\u5fc5\u987b\u9632\u6b62\u5916\u90e8\u6570\u636e\u6ce8\u5165 sql \u9632\u6ce8\u5165\u662f\u5f00\u53d1\u8005\u5fc5\u987b\u9075\u5b88\u7684\u5b89\u5168\u51c6\u5219\uff0c\u63d2\u4ef6\u7a0b\u5e8f\u5458\u53ef\u4ee5\u901a\u8fc7\u5b57\u7b26\u4e32\u8f6c\u4e49\uff08\u4f8b\u5982 escape_string \uff09\u6216\u6b63\u5219\u5b57\u7b26\u4e32\u5339\u914d\uff08\u4f8b\u5982 re.match \uff09\u6765\u89c4\u907f\u6570\u636e\u5e93\u6ce8\u5165\u98ce\u9669\u3002\u4efb\u4f55\u6765\u81ea\u5916\u90e8\u7684\u6570\u636e\u90fd\u5fc5\u987b\u505a\u5230\u9632\u6ce8\u5165\uff0c\u6bd4\u5982\u6635\u79f0\u3001\u804a\u5929\u8bb0\u5f55\u3001\u5934\u50cf url \u7b49\u3002 \u5173\u4e8e mysql \u4ea4\u4e92\u63d2\u4ef6\u7f16\u5199\u7684\u6837\u4f8b\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a PluginGroupManager \u63d2\u4ef6 \uff08\u8bfb\u5199\u7fa4bot\u7ba1\u7406\u5458\u3001\u63d2\u4ef6\u5f00\u542f\u4fe1\u606f\uff09 SJTU canvas \u63d2\u4ef6 \uff08ics url\u7684\u5b58\u53d6\uff09 \u804a\u5929\u8bb0\u5f55\u5b58\u6863\u63d2\u4ef6 \uff08\u804a\u5929\u8bb0\u5f55\u7684\u5b58\u50a8\uff09 accountOperation API \u91d1\u5e01\u7cfb\u7edf","title":"\u63d2\u4ef6\u4e0e\u6570\u636e\u5e93"},{"location":"plugin/pluginWithTimer/","text":"","title":"\u5b9a\u65f6\u4efb\u52a1"},{"location":"plugin/plugins/2cyPicPlugin/","text":"","title":"\u4e8c\u6b21\u5143\u56fe"},{"location":"plugin/plugins/canvasIcsPlugin/","text":"1. \u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 CanvasiCalBind StandardPlugin '-ics bind ${url}' None \u7ed1\u5b9acanvas ics\u94fe\u63a5 CanvasiCalUnbind StandardPlugin '-ics unbind' None \u89e3\u7ed1canvas ics\u94fe\u63a5 GetCanvas StandardPlugin '-ddl' / '-canvas' None \u83b7\u53d6canvas\u65e5\u5386\u9988\u9001 2. \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ GetCanvas (), CanvasiCalBind (), CanvasiCalUnbind ()], 'canvas' ), # \u65e5\u5386\u9988\u9001 # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... GetCanvas (), CanvasiCalBind (), CanvasiCalUnbind () # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00canvas 333 > -ddl # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00canvas 111 > -grpcfg enable canvas bot> OK # \u6b64\u65f6\u7528\u6237C\u5c1a\u672a\u7ed1\u5b9aics url 333 > -ddl bot> \u67e5\u8be2\u5931\u8d25 \u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind ${ url } \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 ${ url } \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6 # \u7528\u6237C\u7ed1\u5b9acanvas 333 > -ics bind ${ \u7528\u6237C\u7684icsUrl } bot> OK 333 > -ddl bot> ${ 333\u7684canvas\u65e5\u5386\u56fe\u7247 } # \u7528\u6237C\u89e3\u7ed1\u540e\u67e5\u8be2 333 > -ics unbind bot> OK 333 > -ddl bot> \u67e5\u8be2\u5931\u8d25 \u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind ${ url } \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 ${ url } \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6 \u56fe\u7247\u5c55\u793a\uff1a 3. \u4ee3\u7801\u5206\u6790 \u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0ccanvasIcsPlugin\u7684\u7ed8\u56fe\u51fd\u6570\u6ca1\u6709\u8c03\u7528LittleUnicorn\u7684\u63a8\u8350\u7ed8\u56feAPI\u3002 from utils.standardPlugin import StandardPlugin , Any , Union import requests from utils.basicEvent import * from utils.basicConfigs import * from pathlib import Path import json from icalendar import Calendar from datetime import datetime , timedelta import re import mysql.connector class CanvasiCalUnbind ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . strip () == '-ics unbind' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if unbind_ics ( data [ 'user_id' ]): send ( target , \"\u89e3\u7ed1\u6210\u529f\" , data [ 'message_type' ]) else : send ( target , \"\u89e3\u7ed1\u5931\u8d25\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'CanvasiCalUnbind' , 'description' : 'canvas\u65e5\u5386\u89e3\u7ed1' , 'commandDescription' : '-ics unbind' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class CanvasiCalBind ( StandardPlugin ): def __init__ ( self ) -> None : # \u5916\u90e8\u670d\u52a1\uff0c\u9632\u6b62sql\u6ce8\u5165\u3001url\u6ce8\u5165 self . urlRegex = re . compile ( r 'https://(oc.sjtu.edu.cn|jicanvas.com)/feeds/calendars/user_[a-zA-Z0-9] {40} .ics' ) # \u68c0\u67e5sql\u662f\u5426\u5f00\u4e86BOT_DATA.canvasIcs try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"\"\"create table if not exists `BOT_DATA`.`canvasIcs` ( `qq` bigint not null, `icsUrl` char(128) not null, primary key (`qq`) );\"\"\" ) except BaseException as e : warning ( 'canvas ics \u65e0\u6cd5\u8fde\u63a5\u81f3\u6570\u636e\u5e93, error: {} ' . format ( e )) def judgeTrigger ( self , msg : str , data : Any ) -> bool : return startswith_in ( msg , [ '-ics bind ' ]) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: msg = msg . replace ( '-ics bind' , '' , 1 ) . strip () target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if self . urlRegex . match ( msg ) == None or len ( msg ) > 110 : send ( target , '\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5ics\u94fe\u63a5\u7b26\u5408\u683c\u5f0f: \\n ' + r 're.compile(r\"https://(oc.sjtu.edu.cn|jicanvas.com)/feeds/calendars/user_[a-zA-Z0-9] {40} .ics\")' + \" \\n \u3010\u5df2\u505a\u9632\u6ce8\u5165\u5904\u7406\u3011\" , data [ 'message_type' ]) else : if edit_bind_ics ( data [ 'user_id' ], msg ): send ( target , \"\u7ed1\u5b9a\u6210\u529f\" , data [ 'message_type' ]) else : send ( target , \"\u7ed1\u5b9a\u5931\u8d25\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'CanvasiCalBind' , 'description' : 'canvas\u65e5\u5386\u7ed1\u5b9a' , 'commandDescription' : '-ics bind [url]' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class GetCanvas ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . strip () in [ '-ddl' , '-canvas' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: ret = getCanvas ( data [ 'user_id' ]) target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if not ret [ 0 ]: send ( target , ret [ 1 ], data [ 'message_type' ]) else : canvasPicPath = os . path . join ( ROOT_PATH , ret [ 1 ]) send ( target , f '[CQ:image,file=files:// { canvasPicPath } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetCanvas' , 'description' : 'canvas\u6d3b\u52a8\u67e5\u8be2' , 'commandDescription' : '-ddl/-canvas' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [ 'canvasIcs' ], 'version' : '1.0.0' , 'author' : 'Unicorn' , } def unbind_ics ( qq_id : Union [ int , str ]) -> bool : if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"delete from `BOT_DATA`.`canvasIcs` where qq= %d \" % ( qq_id )) mydb . commit () return True except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) return False def edit_bind_ics ( qq_id : Union [ int , str ], ics_url : str ) -> bool : if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"replace into `BOT_DATA`.`canvasIcs` values ( %d , ' %s ')\" % ( qq_id , escape_string ( ics_url ))) mydb . commit () return True except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) return False FAIL_REASON_1 = \"\u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind $ {url} \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 \\n $ {url} \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6\" FAIL_REASON_2 = \"\u65e0\u6cd5\u83b7\u53d6\u6216\u89e3\u6790\u65e5\u5386\u6587\u4ef6\" def getCanvas ( qq_id ) -> Tuple [ bool , str ]: if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"select icsUrl from `BOT_DATA`.`canvasIcs` where qq= %d \" % ( qq_id )) urls = list ( mycursor ) if len ( urls ) == 0 : return False , f \"\u67e5\u8be2\u5931\u8d25 \\n { FAIL_REASON_1 } \" else : url = urls [ 0 ][ 0 ] except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) qq_id = str ( qq_id ) try : ret = requests . get ( url = url ) data = ret . content gcal = Calendar . from_ical ( data ) event_list = [] for component in gcal . walk (): if component . name == \"VEVENT\" : now = time . localtime () ddl_time = component . get ( 'dtend' ) . dt if not isinstance ( ddl_time , datetime ): tmp = datetime . strftime ( ddl_time , \"%Y-%m- %d \" ) + \" 23:59:59\" ddl_time = datetime . strptime ( tmp , \"%Y-%m- %d %H:%M:%S\" ) else : ddl_time += timedelta ( hours = 8 ) tmp = datetime . strftime ( ddl_time , \"%Y-%m- %d %H:%M:%S\" ) if time . mktime ( time . strptime ( tmp , \"%Y-%m- %d %H:%M:%S\" )) < time . mktime ( now ): continue ddl_time = datetime . strftime ( ddl_time , \"%Y-%m- %d %H:%M\" ) event_list . append ([ component . get ( 'summary' ), component . get ( 'description' ), ddl_time ]) return True , DrawEventListPic ( event_list , qq_id ) except Exception as e : print ( e ) return False , f \"\u67e5\u8be2\u5931\u8d25 \\n { FAIL_REASON_2 } \" def DrawEventListPic ( event_list , qq_id ): proceed_list = [] width = 880 h_title , h_des = 0 , 0 for summary , description , deadline in event_list [: 10 ]: # print(description.replace('\\n','-sep-')) if description == None : description = '' h_block = 0 #\u5757\u5185\u52a8\u6001\u9ad8\u5ea6 txt_line = \"\" title_parse = [] summary = summary . replace ( '[\u672c-' , ' \\n [\u672c-' ) for word in summary : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d title_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_24 . getsize ( txt_line )[ 0 ] > width - 180 : title_parse . append ( txt_line ) txt_line = \"\" if word == ' \\n ' : title_parse . append ( txt_line ) txt_line = \"\" continue if txt_line != \"\" : title_parse . append ( txt_line ) h_title += len ( title_parse ) * 33 txt_line = \"\" description_parse = [] description_re = re . sub ( ' \\n +' , ' \\n ' , description ) description_re = description_re . replace ( ' \\xa0 ' , '' ) for word in description_re : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d description_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_18 . getsize ( txt_line )[ 0 ] > width - 180 : description_parse . append ( txt_line ) txt_line = \"\" if word == ' \\n ' : description_parse . append ( txt_line ) txt_line = \"\" continue if txt_line != \"\" : description_parse . append ( txt_line ) h_des += len ( description_parse ) * 27 # print(description_parse) h_block += ( len ( title_parse ) * 33 + len ( description_parse ) * 27 ) if len ( description_parse ) == 0 : h_des -= 15 h_block -= 15 proceed_list . append ([ title_parse , description_parse , deadline , h_block ]) height = len ( event_list [: 10 ]) * 150 + 190 + ( 240 if len ( event_list ) == 0 else 0 ) + h_title + h_des + ( 40 if len ( event_list ) > 10 else 0 ) img , draw , h = init_image_template ( 'Canvas \u65e5\u5386\u9988\u9001' , width , height , ( 0 , 142 , 226 , 255 )) h += 130 for title , description , deadline , h_block in proceed_list : img = draw_rounded_rectangle ( img , x1 = 60 , y1 = h , x2 = width - 60 , y2 = h + 120 + h_block , fill = ( 255 , 255 , 255 , 255 )) l = 90 t = h + 30 # \u8ddd \u5757\u9876 \u5750\u6807 for line in title : draw . text (( l , t ), line , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_24 ) t += 33 t += 17 draw . text (( l , t ), '\u7ed3\u675f\u65f6\u95f4\uff1a' + deadline , fill = ( 0 , 142 , 226 , 255 ), font = font_syhtmed_24 ) t += 50 for line in description : draw . text (( l , t ), line , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) t += 27 h += ( 140 + h_block ) if len ( event_list ) == 0 : img = draw_rounded_rectangle ( img , x1 = 60 , y1 = h , x2 = width - 60 , y2 = h + 210 , fill = ( 255 , 255 , 255 , 255 )) txt_size = draw . textsize ( '\u606d\u559c\u4f60\uff0c\u6ca1\u6709\u5373\u5c06\u5230\u671f\u7684ddl~' , font = font_syhtmed_32 ) draw . text ((( width - txt_size [ 0 ]) / 2 + 5 , h + 80 ), '\u606d\u559c\u4f60\uff0c\u6ca1\u6709\u5373\u5c06\u5230\u671f\u7684ddl~' , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_32 ) if len ( event_list ) > 10 : txt_size = draw . textsize ( '\u65e5\u5386\u9879\u592a\u591a\u5566\uff0c\u53ea\u663e\u793a\u4e86\u524d10\u6761qwq' , font = font_syhtmed_18 ) draw . text (( width / 2 - txt_size [ 0 ] / 2 , height - 85 ), '\u65e5\u5386\u9879\u592a\u591a\u5566\uff0c\u53ea\u663e\u793a\u4e86\u524d10\u6761qwq' , fill = ( 115 , 115 , 115 , 255 ) , font = font_syhtmed_18 ) save_path = os . path . join ( SAVE_TMP_PATH , f ' { qq_id } _canvas.png' ) img . save ( save_path ) return save_path","title":"SJTU canvas\u65e5\u5386"},{"location":"plugin/plugins/canvasIcsPlugin/#1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 CanvasiCalBind StandardPlugin '-ics bind ${url}' None \u7ed1\u5b9acanvas ics\u94fe\u63a5 CanvasiCalUnbind StandardPlugin '-ics unbind' None \u89e3\u7ed1canvas ics\u94fe\u63a5 GetCanvas StandardPlugin '-ddl' / '-canvas' None \u83b7\u53d6canvas\u65e5\u5386\u9988\u9001","title":"1. \u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/canvasIcsPlugin/#2","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ GetCanvas (), CanvasiCalBind (), CanvasiCalUnbind ()], 'canvas' ), # \u65e5\u5386\u9988\u9001 # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... GetCanvas (), CanvasiCalBind (), CanvasiCalUnbind () # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00canvas 333 > -ddl # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00canvas 111 > -grpcfg enable canvas bot> OK # \u6b64\u65f6\u7528\u6237C\u5c1a\u672a\u7ed1\u5b9aics url 333 > -ddl bot> \u67e5\u8be2\u5931\u8d25 \u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind ${ url } \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 ${ url } \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6 # \u7528\u6237C\u7ed1\u5b9acanvas 333 > -ics bind ${ \u7528\u6237C\u7684icsUrl } bot> OK 333 > -ddl bot> ${ 333\u7684canvas\u65e5\u5386\u56fe\u7247 } # \u7528\u6237C\u89e3\u7ed1\u540e\u67e5\u8be2 333 > -ics unbind bot> OK 333 > -ddl bot> \u67e5\u8be2\u5931\u8d25 \u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind ${ url } \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 ${ url } \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6 \u56fe\u7247\u5c55\u793a\uff1a","title":"2. \u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/canvasIcsPlugin/#3","text":"\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0ccanvasIcsPlugin\u7684\u7ed8\u56fe\u51fd\u6570\u6ca1\u6709\u8c03\u7528LittleUnicorn\u7684\u63a8\u8350\u7ed8\u56feAPI\u3002 from utils.standardPlugin import StandardPlugin , Any , Union import requests from utils.basicEvent import * from utils.basicConfigs import * from pathlib import Path import json from icalendar import Calendar from datetime import datetime , timedelta import re import mysql.connector class CanvasiCalUnbind ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . strip () == '-ics unbind' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if unbind_ics ( data [ 'user_id' ]): send ( target , \"\u89e3\u7ed1\u6210\u529f\" , data [ 'message_type' ]) else : send ( target , \"\u89e3\u7ed1\u5931\u8d25\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'CanvasiCalUnbind' , 'description' : 'canvas\u65e5\u5386\u89e3\u7ed1' , 'commandDescription' : '-ics unbind' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class CanvasiCalBind ( StandardPlugin ): def __init__ ( self ) -> None : # \u5916\u90e8\u670d\u52a1\uff0c\u9632\u6b62sql\u6ce8\u5165\u3001url\u6ce8\u5165 self . urlRegex = re . compile ( r 'https://(oc.sjtu.edu.cn|jicanvas.com)/feeds/calendars/user_[a-zA-Z0-9] {40} .ics' ) # \u68c0\u67e5sql\u662f\u5426\u5f00\u4e86BOT_DATA.canvasIcs try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"\"\"create table if not exists `BOT_DATA`.`canvasIcs` ( `qq` bigint not null, `icsUrl` char(128) not null, primary key (`qq`) );\"\"\" ) except BaseException as e : warning ( 'canvas ics \u65e0\u6cd5\u8fde\u63a5\u81f3\u6570\u636e\u5e93, error: {} ' . format ( e )) def judgeTrigger ( self , msg : str , data : Any ) -> bool : return startswith_in ( msg , [ '-ics bind ' ]) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: msg = msg . replace ( '-ics bind' , '' , 1 ) . strip () target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if self . urlRegex . match ( msg ) == None or len ( msg ) > 110 : send ( target , '\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5ics\u94fe\u63a5\u7b26\u5408\u683c\u5f0f: \\n ' + r 're.compile(r\"https://(oc.sjtu.edu.cn|jicanvas.com)/feeds/calendars/user_[a-zA-Z0-9] {40} .ics\")' + \" \\n \u3010\u5df2\u505a\u9632\u6ce8\u5165\u5904\u7406\u3011\" , data [ 'message_type' ]) else : if edit_bind_ics ( data [ 'user_id' ], msg ): send ( target , \"\u7ed1\u5b9a\u6210\u529f\" , data [ 'message_type' ]) else : send ( target , \"\u7ed1\u5b9a\u5931\u8d25\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'CanvasiCalBind' , 'description' : 'canvas\u65e5\u5386\u7ed1\u5b9a' , 'commandDescription' : '-ics bind [url]' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class GetCanvas ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . strip () in [ '-ddl' , '-canvas' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: ret = getCanvas ( data [ 'user_id' ]) target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if not ret [ 0 ]: send ( target , ret [ 1 ], data [ 'message_type' ]) else : canvasPicPath = os . path . join ( ROOT_PATH , ret [ 1 ]) send ( target , f '[CQ:image,file=files:// { canvasPicPath } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetCanvas' , 'description' : 'canvas\u6d3b\u52a8\u67e5\u8be2' , 'commandDescription' : '-ddl/-canvas' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [ 'canvasIcs' ], 'version' : '1.0.0' , 'author' : 'Unicorn' , } def unbind_ics ( qq_id : Union [ int , str ]) -> bool : if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"delete from `BOT_DATA`.`canvasIcs` where qq= %d \" % ( qq_id )) mydb . commit () return True except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) return False def edit_bind_ics ( qq_id : Union [ int , str ], ics_url : str ) -> bool : if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"replace into `BOT_DATA`.`canvasIcs` values ( %d , ' %s ')\" % ( qq_id , escape_string ( ics_url ))) mydb . commit () return True except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) return False FAIL_REASON_1 = \"\u8bf7\u7fa4\u804a\u6216\u79c1\u804a\u4f7f\u7528-ics bind $ {url} \u7ed1\u5b9a\u60a8\u7684Canvas iCal\u9988\u9001\u94fe\u63a5 \\n $ {url} \u53ef\u5728 canvas - \u65e5\u5386\ud83d\udcc5 - \u65e5\u5386\u9988\u9001 \u4e2d\u83b7\u53d6\" FAIL_REASON_2 = \"\u65e0\u6cd5\u83b7\u53d6\u6216\u89e3\u6790\u65e5\u5386\u6587\u4ef6\" def getCanvas ( qq_id ) -> Tuple [ bool , str ]: if isinstance ( qq_id , str ): qq_id = int ( qq_id ) try : mydb = mysql . connector . connect ( ** sqlConfig ) mycursor = mydb . cursor () mycursor . execute ( \"select icsUrl from `BOT_DATA`.`canvasIcs` where qq= %d \" % ( qq_id )) urls = list ( mycursor ) if len ( urls ) == 0 : return False , f \"\u67e5\u8be2\u5931\u8d25 \\n { FAIL_REASON_1 } \" else : url = urls [ 0 ][ 0 ] except BaseException as e : warning ( \"error in canvasSync, error: {} \" . format ( e )) qq_id = str ( qq_id ) try : ret = requests . get ( url = url ) data = ret . content gcal = Calendar . from_ical ( data ) event_list = [] for component in gcal . walk (): if component . name == \"VEVENT\" : now = time . localtime () ddl_time = component . get ( 'dtend' ) . dt if not isinstance ( ddl_time , datetime ): tmp = datetime . strftime ( ddl_time , \"%Y-%m- %d \" ) + \" 23:59:59\" ddl_time = datetime . strptime ( tmp , \"%Y-%m- %d %H:%M:%S\" ) else : ddl_time += timedelta ( hours = 8 ) tmp = datetime . strftime ( ddl_time , \"%Y-%m- %d %H:%M:%S\" ) if time . mktime ( time . strptime ( tmp , \"%Y-%m- %d %H:%M:%S\" )) < time . mktime ( now ): continue ddl_time = datetime . strftime ( ddl_time , \"%Y-%m- %d %H:%M\" ) event_list . append ([ component . get ( 'summary' ), component . get ( 'description' ), ddl_time ]) return True , DrawEventListPic ( event_list , qq_id ) except Exception as e : print ( e ) return False , f \"\u67e5\u8be2\u5931\u8d25 \\n { FAIL_REASON_2 } \" def DrawEventListPic ( event_list , qq_id ): proceed_list = [] width = 880 h_title , h_des = 0 , 0 for summary , description , deadline in event_list [: 10 ]: # print(description.replace('\\n','-sep-')) if description == None : description = '' h_block = 0 #\u5757\u5185\u52a8\u6001\u9ad8\u5ea6 txt_line = \"\" title_parse = [] summary = summary . replace ( '[\u672c-' , ' \\n [\u672c-' ) for word in summary : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d title_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_24 . getsize ( txt_line )[ 0 ] > width - 180 : title_parse . append ( txt_line ) txt_line = \"\" if word == ' \\n ' : title_parse . append ( txt_line ) txt_line = \"\" continue if txt_line != \"\" : title_parse . append ( txt_line ) h_title += len ( title_parse ) * 33 txt_line = \"\" description_parse = [] description_re = re . sub ( ' \\n +' , ' \\n ' , description ) description_re = description_re . replace ( ' \\xa0 ' , '' ) for word in description_re : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d description_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_18 . getsize ( txt_line )[ 0 ] > width - 180 : description_parse . append ( txt_line ) txt_line = \"\" if word == ' \\n ' : description_parse . append ( txt_line ) txt_line = \"\" continue if txt_line != \"\" : description_parse . append ( txt_line ) h_des += len ( description_parse ) * 27 # print(description_parse) h_block += ( len ( title_parse ) * 33 + len ( description_parse ) * 27 ) if len ( description_parse ) == 0 : h_des -= 15 h_block -= 15 proceed_list . append ([ title_parse , description_parse , deadline , h_block ]) height = len ( event_list [: 10 ]) * 150 + 190 + ( 240 if len ( event_list ) == 0 else 0 ) + h_title + h_des + ( 40 if len ( event_list ) > 10 else 0 ) img , draw , h = init_image_template ( 'Canvas \u65e5\u5386\u9988\u9001' , width , height , ( 0 , 142 , 226 , 255 )) h += 130 for title , description , deadline , h_block in proceed_list : img = draw_rounded_rectangle ( img , x1 = 60 , y1 = h , x2 = width - 60 , y2 = h + 120 + h_block , fill = ( 255 , 255 , 255 , 255 )) l = 90 t = h + 30 # \u8ddd \u5757\u9876 \u5750\u6807 for line in title : draw . text (( l , t ), line , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_24 ) t += 33 t += 17 draw . text (( l , t ), '\u7ed3\u675f\u65f6\u95f4\uff1a' + deadline , fill = ( 0 , 142 , 226 , 255 ), font = font_syhtmed_24 ) t += 50 for line in description : draw . text (( l , t ), line , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) t += 27 h += ( 140 + h_block ) if len ( event_list ) == 0 : img = draw_rounded_rectangle ( img , x1 = 60 , y1 = h , x2 = width - 60 , y2 = h + 210 , fill = ( 255 , 255 , 255 , 255 )) txt_size = draw . textsize ( '\u606d\u559c\u4f60\uff0c\u6ca1\u6709\u5373\u5c06\u5230\u671f\u7684ddl~' , font = font_syhtmed_32 ) draw . text ((( width - txt_size [ 0 ]) / 2 + 5 , h + 80 ), '\u606d\u559c\u4f60\uff0c\u6ca1\u6709\u5373\u5c06\u5230\u671f\u7684ddl~' , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_32 ) if len ( event_list ) > 10 : txt_size = draw . textsize ( '\u65e5\u5386\u9879\u592a\u591a\u5566\uff0c\u53ea\u663e\u793a\u4e86\u524d10\u6761qwq' , font = font_syhtmed_18 ) draw . text (( width / 2 - txt_size [ 0 ] / 2 , height - 85 ), '\u65e5\u5386\u9879\u592a\u591a\u5566\uff0c\u53ea\u663e\u793a\u4e86\u524d10\u6761qwq' , fill = ( 115 , 115 , 115 , 255 ) , font = font_syhtmed_18 ) save_path = os . path . join ( SAVE_TMP_PATH , f ' { qq_id } _canvas.png' ) img . save ( save_path ) return save_path","title":"3. \u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/chatWithAnswerBookPlugin/","text":"","title":"\u7b54\u6848\u4e4b\u4e66"},{"location":"plugin/plugins/faqPlugin/","text":"","title":"\u95ee\u7b54\u5e93"},{"location":"plugin/plugins/getPermissionPlugin/","text":"\u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 GetPermission StandardPlugin '-sudo' ROOT_ADMIN_ID \u628a\u672c\u4ebaid\u6dfb\u52a0\u5230\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 AddPermission StandardPlugin '-addadmin @{\u67d0\u4eba} ' ROOT_ADMIN_ID \u628a @{\u67d0\u4eba} \u6dfb\u52a0\u5230\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 DelPermission StandardPlugin '-deladmin @{\u67d0\u4eba} ' ROOT_ADMIN_ID \u628a @{\u67d0\u4eba} \u79fb\u51fa\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 ShowPermission StandardPlugin '-showadmin' / 'getAdmin' None \u67e5\u770b\u7fa4bot\u7ba1\u7406\u5458\u6743\u9650\u540d\u5355 \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D \u7fa4\u804a\u90e8\u5206\uff1a 333 >>> -showadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 ] # 111\u81ea\u8eab\u83b7\u53d6\u6743\u9650 111 >>> -sudo bot>>> OK 777 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 , 111 ] 111 >>> -sudo bot>>> \u7528\u6237\u3010111\u3011\u5df2\u5728\u7ba1\u7406\u5458\u5217\u8868 # CQ\u7801\u6ce8\u5165\u65e0\u6548 111 >>> -deladmin [ CQ:at,qq = 444 ] 777 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 , 111 ] # 111\u5220\u9664444\u6743\u9650 111 >>> -deladmin @\u7528\u6237D bot>>> OK 444 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 111 , 222 ] # 444\u5220\u9664111\u6743\u9650 444 >>> -deladmin @\u7528\u6237A bot>>> OK 111 >>> -showadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 ] \u4ee3\u7801\u5206\u6790 \u4ee3\u7801\u4f4d\u4e8e plugins/getPermission.py TBD","title":"\u7fa4\u6743\u9650\u83b7\u53d6"},{"location":"plugin/plugins/getPermissionPlugin/#_1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 GetPermission StandardPlugin '-sudo' ROOT_ADMIN_ID \u628a\u672c\u4ebaid\u6dfb\u52a0\u5230\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 AddPermission StandardPlugin '-addadmin @{\u67d0\u4eba} ' ROOT_ADMIN_ID \u628a @{\u67d0\u4eba} \u6dfb\u52a0\u5230\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 DelPermission StandardPlugin '-deladmin @{\u67d0\u4eba} ' ROOT_ADMIN_ID \u628a @{\u67d0\u4eba} \u79fb\u51fa\u7fa4bot\u7ba1\u7406\u6743\u9650\u540d\u5355 ShowPermission StandardPlugin '-showadmin' / 'getAdmin' None \u67e5\u770b\u7fa4bot\u7ba1\u7406\u5458\u6743\u9650\u540d\u5355","title":"\u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/getPermissionPlugin/#_2","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D \u7fa4\u804a\u90e8\u5206\uff1a 333 >>> -showadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 ] # 111\u81ea\u8eab\u83b7\u53d6\u6743\u9650 111 >>> -sudo bot>>> OK 777 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 , 111 ] 111 >>> -sudo bot>>> \u7528\u6237\u3010111\u3011\u5df2\u5728\u7ba1\u7406\u5458\u5217\u8868 # CQ\u7801\u6ce8\u5165\u65e0\u6548 111 >>> -deladmin [ CQ:at,qq = 444 ] 777 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 , 444 , 111 ] # 111\u5220\u9664444\u6743\u9650 111 >>> -deladmin @\u7528\u6237D bot>>> OK 444 >>> -getadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 111 , 222 ] # 444\u5220\u9664111\u6743\u9650 444 >>> -deladmin @\u7528\u6237A bot>>> OK 111 >>> -showadmin bot>>> \u672c\u7fa4\u7ba1\u7406\u5458\u5217\u8868 [ 222 ]","title":"\u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/getPermissionPlugin/#_3","text":"\u4ee3\u7801\u4f4d\u4e8e plugins/getPermission.py TBD","title":"\u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/gobangPlugin/","text":"","title":"\u4e94\u5b50\u68cb"},{"location":"plugin/plugins/greetingsPlugin/","text":"1. \u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 MorningGreet StandardPlugin '\u65e9\u5b89' None \u83b7\u53d6bot\u7684\u65e9\u4e0a\u95ee\u597d NightGreet StandardPlugin '\u665a\u5b89' None \u83b7\u53d6bot\u7684\u665a\u4e0a\u95ee\u597d 2. \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ MorningGreet (), NightGreet ()], 'greeting' ), # \u65e9\u5b89\u665a\u5b89 # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... MorningGreet (), NightGreet (), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00greeting 333 > \u65e9\u5b89 333 > \u665a\u5b89 # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00greeting 111 > -grpcfg enable greeting bot> OK 222 > \u65e9\u5b89\u7fa4\u53cb bot> \u4e00\u4e07\u4e2a\u7f8e\u4e3d\u7684\u672a\u6765\uff0c\u62b5\u4e0d\u4e0a\u4e00\u4e2a\u6e29\u6696\u7684\u73b0\u5728\u3002\u65e9\u5b89\uff01 666 > \u665a\u5b89 bot> \u6211\u7684\u5c0f\u8111\u888b\u5df2\u7ecf\u5fd9\u4e86\u4e00\u5929\u4e86\uff0c\u597d\u7d2f\u554a\uff0c\u4e5f\u8be5\u4f11\u606f\u4e86\u3002\u665a\u5b89\uff01 3. \u4ee3\u7801\u5206\u6790 from abc import ABC , abstractmethod from typing import Union , Any import random from utils.basicEvent import * from utils.standardPlugin import StandardPlugin GOODMORNING_LIST = [ \"\u65f6\u95f4\u6700\u4f1a\u9a97\u4eba\uff0c\u4f46\u4e5f\u80fd\u8ba9\u4f60\u660e\u767d\uff0c\u8fd9\u4e2a\u4e16\u754c\u6ca1\u6709\u4ec0\u4e48\u4e0d\u80fd\u5931\u53bb\u7684\uff0c\u79bb\u53bb\u7684\u90fd\u662f\u98ce\u666f\uff0c\u7559\u4e0b\u7684\u624d\u662f\u4eba\u751f\uff0c\u8d70\u5230\u6700\u540e\u7684\uff0c\u5c31\u662f\u5bf9\u7684\u4eba\u3002\u65e9\u5b89\uff01\" , \"\u5584\u826f\u548c\u7231\u90fd\u662f\u514d\u8d39\u7684\uff0c\u4f46\u4e0d\u662f\u5ec9\u4ef7\u7684\uff0c\u4f60\u7684\u5584\u826f\uff0c\u9700\u8981\u5e26\u70b9\u950b\u8292\uff0c\u4f60\u7684\u7231\uff0c\u9700\u8981\u5e26\u4e9b\u7406\u667a\uff0c\u5e26\u773c\u8bc6\u4eba\uff0c\u6bd5\u7adf\u4e0d\u662f\u6240\u6709\u4eba\u90fd\u914d\u62e5\u6709\u5b83\u4eec\u3002\u65e9\u5b89\uff01\" , \"\u4eba\u751f\u6700\u597d\u7684\u72b6\u6001\uff0c\u662f\u6bcf\u5929\u9192\u6765\uff0c\u9762\u671d\u9633\u5149\uff0c\u5634\u89d2\u4e0a\u626c\u3002\u4e0d\u7fa1\u6155\u8c01\uff0c\u4e0d\u8ba8\u597d\u8c01\uff0c\u9ed8\u9ed8\u52aa\u529b\uff0c\u6d3b\u6210\u81ea\u5df1\u60f3\u8981\u7684\u6a21\u6837\u3002\u65e9\u5b89\uff01\" , \"\u5343\u4e07\u4e0d\u8981\u5bf9\u4efb\u4f55\u4e8b\u611f\u5230\u540e\u6094\uff0c\u56e0\u4e3a\u5b83\u66fe\u7ecf\u4e00\u5ea6\u5c31\u662f\u4f60\u60f3\u8981\u7684\u3002\u540e\u6094\u6ca1\u7528\uff0c\u8981\u4e48\u5fd8\u8bb0\uff0c\u8981\u4e48\u52aa\u529b\u3002\u65e9\u5b89\uff01\" , \"\u6709\u65f6\u5019\uff0c\u52aa\u529b\u4e00\u70b9\uff0c\u662f\u4e3a\u8ba9\u81ea\u5df1\u6709\u8d44\u683c\uff0c\u4e0d\u53bb\u505a\u4e0d\u559c\u6b22\u7684\u4e8b\uff1b\u662f\u4e3a\u4e86\u80fd\u8ba9\u81ea\u5df1\uff0c\u9047\u89c1\u4e00\u4e2a\u559c\u6b22\u7684\u4eba\u65f6\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u81ea\u5df1\u4e0d\u591f\u597d\u800c\u6ca1\u80fd\u7559\u4f4f\u5bf9\u65b9\u3002\u65e9\u5b89\uff01\" , \"\u8be5\u6765\u7684\u90fd\u4f1a\u6765\uff0c\u8be5\u8d70\u7684\u5168\u4f1a\u8d70\uff0c\u522b\u6297\u62d2\uff0c\u522b\u633d\u7559\uff0c\u522b\u8d2a\u604b\u3002\u5b66\u7740\u770b\u6de1\u4e00\u4e9b\u4e8b\u60c5\u3002\u4eb2\u7231\u7684\uff0c\u613f\u4f60\u50cf\u5411\u65e5\u8475\u4e00\u6837\uff0c\u6bcf\u5929\u90fd\u5145\u6ee1\u6b63\u80fd\u91cf\uff0c\u5f00\u59cb\u5143\u6c14\u6ee1\u6ee1\u7684\u4e00\u5929\u3002\" , \"\u4e16\u754c\u4e0a\u6839\u672c\u5c31\u4e0d\u5b58\u5728\u5b8c\u7f8e\u7684\u4e8b\u7269\uff0c\u6211\u4eec\u6ca1\u5fc5\u8981\u6d6a\u8d39\u5927\u91cf\u7684\u7cbe\u529b\u53bb\u5bfb\u627e\u4e0d\u5b58\u5728\u7684\u4e1c\u897f\u3002\u4e0e\u5176\u7528\u4e00\u751f\u7684\u65f6\u95f4\u53bb\u6267\u7740\u5730\u8ffd\u6c42\u865a\u65e0\u7f25\u7f08\u7684\u4e1c\u897f\uff0c\u4e0d\u5982\u73cd\u60dc\u548c\u628a\u63e1\u73b0\u5728\u7f8e\u597d\u7684\u751f\u6d3b\u3002\" , \"\u6bcf\u4e2a\u4eba\u7684\u4eba\u751f\u91cc\u90fd\u4f1a\u9047\u5230\u4e00\u573a\u63aa\u624b\u4e0d\u53ca\u7684\u5927\u96e8\uff0c\u82e5\u4f60\u8eab\u9677\u96e8\u4e2d\uff0c\u613f\u6709\u4eba\u4e3a\u4f60\u6491\u4f1e\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u4e5f\u613f\u4f60\u6709\u542c\u96e8\u7684\u5fc3\u60c5\u3002\u65e9\u5b89\uff01\" , \"\u7f8e\u597d\u7684\u4e8b\u60c5\u603b\u4f1a\u5230\u6765\uff0c\u4f60\u8981\u7b80\u5355\u5e72\u51c0\u806a\u660e\u5355\u7eaf\uff0c\u5c31\u4f1a\u53d1\u73b0\u5947\u8ff9\u4e0d\u662f\u964d\u4e34\uff0c\u5b83\u662f\u56e0\u4f60\u800c\u6765\u3002\" , \"\u4eba\u8fd9\u8f88\u5b50\uff0c\u6709\u4eba\u7fa1\u6155\u4f60\uff0c\u6709\u4eba\u8ba8\u538c\u4f60\uff0c\u6709\u4eba\u5ac9\u5992\u4f60\uff0c\u6709\u4eba\u770b\u4e0d\u8d77\u4f60\uff0c\u6ca1\u5173\u7cfb\uff0c\u4ed6\u4eec\u90fd\u662f\u5916\u4eba\uff1b\u751f\u6d3b\u5c31\u662f\u8fd9\u6837\uff0c\u4f60\u6240\u505a\u7684\u4e00\u5207\u4e0d\u80fd\u8ba9\u6bcf\u4e2a\u4eba\u90fd\u6ee1\u610f\u3002\u4e0d\u8981\u4e3a\u4e86\u8ba8\u597d\u522b\u4eba\uff0c\u800c\u4e1f\u5931\u81ea\u5df1\u7684\u672c\u6027\u3002\u65e9\u5b89\uff01\" , \"\u4e00\u4e2a\u4eba\u81f3\u5c11\u5e94\u8be5\u62e5\u6709\u4e00\u4e2a\u68a6\u60f3\uff0c\u6709\u4e00\u4e2a\u7406\u7531\u53bb\u575a\u5f3a\uff0c\u5fc3\u82e5\u6ca1\u6709\u6816\u606f\u7684\u5730\u65b9\uff0c\u5728\u54ea\u91cc\u90fd\u662f\u6d41\u6d6a\u3002\u65e9\u5b89\uff01\" , \"\u4e00\u4e07\u4e2a\u7f8e\u4e3d\u7684\u672a\u6765\uff0c\u62b5\u4e0d\u4e0a\u4e00\u4e2a\u6e29\u6696\u7684\u73b0\u5728\u3002\u65e9\u5b89\uff01\" , \"\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u559c\u6b22\u7684\u6837\u5b50\uff0c\u4e0d\u62b1\u6028\uff0c\u4e0d\u5c06\u5c31\uff0c\u6709\u91ce\u5fc3\uff0c\u6709\u5149\u8292\uff01\u65e9\u5b89\uff01\" , \"\u65e0\u8bba\u751f\u6d3b\u600e\u6837\uff0c\u90fd\u4e0d\u8981\u5fd8\u8bb0\u5fae\u7b11\uff0c\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u7684\u592a\u9633\uff0c\u65e0\u9700\u51ed\u501f\u8c01\u7684\u5149~\" , \"\u4e0d\u7ba1\u6628\u5929\u6709\u591a\u7cdf\u7cd5\uff0c\u4e0d\u8981\u8ba9\u5b83\u5f71\u54cd\u4f60\u7684\u73b0\u5728\u548c\u672a\u6765\uff0c\u6d3b\u5f97\u50cf\u5411\u65e5\u8475\u4e00\u6837\u707f\u70c2\u3002\u65e9\u4e0a\u597d\uff01\" , \"\u5929\u662f\u51b7\u7684\uff0c\u5fc3\u662f\u6696\u7684\uff0c\u5bf9\u4f60\u7684\u795d\u798f\u662f\u6c38\u8fdc\u7684\uff01\u4eba\u662f\u8fdc\u7684\uff0c\u5fc3\u662f\u8fd1\u7684\uff0c\u5bf9\u4f60\u7684\u601d\u5ff5\u662f\u4e0d\u53d8\u7684\uff01\u613f\u4f60\u6bcf\u4e00\u5929\u90fd\u9633\u5149\u707f\u70c2\u3001\u7b11\u53e3\u5e38\u5f00\uff0c\u65e9\u5b89\uff01\" , \"\u62b1\u6700\u5927\u5e0c\u671b\uff0c\u5c3d\u6700\u5927\u52aa\u529b\uff0c\u505a\u6700\u574f\u6253\u7b97\uff0c\u6301\u6700\u597d\u5fc3\u6001\u3002\u8bb0\u4f4f\u8be5\u8bb0\u4f4f\u7684\uff0c\u5fd8\u8bb0\u8be5\u5fd8\u8bb0\u7684\uff0c\u6539\u53d8\u80fd\u6539\u53d8\u7684\uff0c\u63a5\u53d7\u6210\u4e8b\u5b9e\u7684\u3002\u592a\u9633\u603b\u662f\u65b0\u7684\uff0c\u6bcf\u5929\u90fd\u662f\u7f8e\u597d\u7684\u65e5\u5b50\u3002\u65e9\u5b89\uff01\" , \"\u6bcf\u5929\u6e05\u6668\u7684\u7b2c\u4e00\u9053\u66d9\u5149\uff0c\u53ef\u4ee5\u795e\u5947\u5730\u6cbb\u6108\u6628\u65e5\u7684\u4f24\u75db\u3002\" , \"\u5e26\u7740\u9633\u5149\u51fa\u53d1\uff0c\u53bb\u9047\u89c1\u6e29\u6696\uff1b\u5e26\u7740\u5fae\u7b11\u524d\u884c\uff0c\u53bb\u9047\u89c1\u5e78\u798f\uff0c\u6240\u6709\u7f8e\u597d\u7684\u4e0d\u671f\u800c\u9047\uff0c\u90fd\u5728\u8def\u4e0a\u3002\u65b0\u7684\u4e00\u5929\uff0c\u65e9\u5b89\uff01\" , ] GOODNIGHT_LIST = [ \"\u4eca\u591c\u6211\u8981\u53bb\u5f81\u62ef\u6551\u5730\u7403\uff0c\u6709\u4e8b\u8bf7\u7559\u8a00\u3002\u665a\u5b89\uff01\" , \"\u9ed1\u591c\u4e0d\u4f1a\u4e8f\u5f85\u665a\u7761\u7684\u4eba\uff0c\u5b83\u4f1a\u8ba9\u4f60\u8131\u53d1\u3002\u665a\u5b89\uff01\" , \"\u6211\u7684\u5c0f\u8111\u888b\u5df2\u7ecf\u5fd9\u4e86\u4e00\u5929\u4e86\uff0c\u597d\u7d2f\u554a\uff0c\u4e5f\u8be5\u4f11\u606f\u4e86\u3002\u665a\u5b89\uff01\" , \"\u628a\u6240\u6709\u7684\u70e6\u607c\u90fd\u629b\u6389\uff0c\u62c9\u4e0a\u7a97\u5e18\uff0c\u6302\u4e0a\u6708\u4eae\uff0c\u597d\u597d\u7761\u4e00\u89c9\u3002\u665a\u5b89\uff01\" , \"\u4f60\u60f3\u4e00\u591c\u66b4\u5bcc\u5417\uff1f\u90a3\u5c31\u8ddf\u6211\u4e00\u8d77\u5173\u706f\u7761\u89c9\u5427\u3002\u665a\u5b89\uff01\u4f60\u60f3\u4e00\u591c\u66b4\u5bcc\u5417\uff1f\u90a3\u5c31\u8ddf\u6211\u4e00\u8d77\u5173\u706f\u7761\u89c9\u5427\u3002\u665a\u5b89\uff01\" , \"\u6211\u5df2\u7ecf\u76d6\u597d\u4e86\u88ab\u5b50\uff0c\u95ed\u597d\u4e00\u53ea\u773c\uff0c\u5c31\u7b49\u4f60\u8bf4\u665a\u5b89\u4e86\uff0c\u8bf4\u5b8c\u6211\u5c31\u95ed\u53e6\u4e00\u53ea\u4e86\u3002\" , \"\u8981\u5f00\u5fc3\uff0c\u8981\u52aa\u529b\uff0c\u8981\u50cf\u661f\u661f\u4e00\u6837\u53d1\u5149\u53d1\u4eae\u3002\u665a\u5b89\uff01\" , \"\u628a\u661f\u661f\u71ac\u6210\u7cd6\u6d46\uff0c\u8638\u4e00\u8638\u4f60\u8bf4\u8fc7\u7684\u665a\u5b89\uff0c\u7136\u540e\u5927\u53e3\u5927\u53e3\u7684\u5403\u6389\u3002\u665a\u5b89\uff01\" , \"\u6211\u8981\u4e54\u88c5\u6210\u4e00\u9897\u5c0f\u5976\u7cd6\uff0c\u591c\u6df1\u4e86\u63d0\u7740\u661f\u661f\u706f\u5feb\u5feb\u6e9c\u5230\u4f60\u7684\u68a6\u91cc\uff0c\u563b\u563b\uff0c\u665a\u5b89\uff01\" , \"\u4f60\u77e5\u9053\u4e3a\u4ec0\u4e48\u6211\u5728\u591c\u91cc\u603b\u662f\u4e0d\u7761\u89c9\u5417\uff1f\u56e0\u4e3a\u9ed1\u591c\u9700\u8981\u6211\u8fd9\u9897\u95ea\u4eae\u7684\u661f\u3002\u665a\u5b89\uff01\" , \"\u65e9\u70b9\u7761\u5427\uff0c\u4eca\u665a\u6211\u4f1a\u8dd1\u5230\u4f60\u7684\u68a6\u91cc\u624b\u821e\u8db3\u8e48\u3002\u665a\u5b89\uff01\" , \"\u8981\u4e0d\u8981\u4e00\u8d77\u53bb\u68a6\u4e2d\u770b\u6708\u4eae\uff0c\u4e00\u5b9a\u8d85\u7ea7\u5927\uff0c\u8d85\u7ea7\u7f8e\u3002\u665a\u5b89\uff01\" , \"\u6708\u4eae\u4e0d\u7761\u89c9\uff0c\u6211\u4e5f\u4e0d\u7761\u89c9\uff0c\u6211\u662f\u8fd9\u4e2a\u4e16\u754c\u4e0a\u7684\u4e00\u4e2a\u5c0f\u7f8e\u5473\u3002\" , \"\u75b2\u60eb\u7684\u751f\u6d3b\u9700\u8981\u4e00\u4e2a\u6e29\u67d4\u7684\u68a6\u548c\u4e00\u4e2a\u5f88\u7231\u7684\u4eba\u3002\u665a\u5b89\uff01\" , \"\u8fd9\u4e2a\u4e16\u754c\u592a\u5371\u9669\uff0c\u65f6\u95f4\u5c31\u8be5\u6d6a\u8d39\u5728\u7f8e\u597d\u7684\u4e8b\u7269\u4e0a\u3002\u665a\u5b89\uff01\" , \"\u4e16\u4e8b\u5343\u5e06\u8fc7\uff0c\u524d\u65b9\u7ec8\u4f1a\u662f\u6e29\u67d4\u548c\u6708\u5149\u3002\u665a\u5b89\uff01\" , \"\u5f53\u4f60\u5728\u591c\u665a\u5b64\u519b\u594b\u6218\u65f6\uff0c\u6f2b\u5929\u661f\u5149\u56e0\u4e3a\u4f60\u800c\u95ea\u70c1\u3002\u665a\u5b89\uff01\" , \"\u4f60\u5c31\u662f\u5929\u8d50\u7684\u793c\u7269\uff0c\u6211\u8fdf\u6765\u7684\u6551\u8d4e\uff1b\u4f60\u662f\u4e0d\u706d\u7684\u661f\u5149\uff0c\u65e5\u590d\u4e00\u65e5\u7684\u7f8e\u68a6\u3002\u665a\u5b89\uff01\" , \".\u6211\u5728\u4eba\u95f4\u8d29\u5356\u9ec4\u660f\uff0c\u53ea\u4e3a\u6536\u96c6\u4e16\u95f4\u6e29\u67d4\u53bb\u89c1\u4f60\uff0c\u665a\u5b89\uff01\" , \"\u4eca\u5929\u7684\u4e16\u754c\u5df2\u7ecf\u6253\u70ca\u4e86\uff0c\u5df2\u7ecf\u4e0d\u5bf9\u5916\u8425\u4e1a\u4e86\uff0c\u665a\u5b89\uff01\" , \"\u613f\u4f60\u4ece\u6b64\u4e0d\u5bf9\u65b0\u4e8b\u754f\u60e7\uff0c\u4e0d\u4f1a\u91cd\u8e48\u8986\u8f99\uff0c\u518d\u4e5f\u4e0d\u4e3a\u611f\u60c5\u6c89\u6ca6\uff0c\u4e0d\u4e3a\u71ac\u591c\u540e\u6094\uff0c\u76f8\u4fe1\u6709\u4eba\u4f1a\u966a\u4f60\u98a0\u6c9b\u6d41\u79bb\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u7684\u592a\u9633\u3002\u665a\u5b89\uff0c\u597d\u68a6\uff01\" , \"\u9519\u8fc7\u843d\u65e5\u4f59\u6656\uff0c\u8fd8\u4f1a\u6709\u6ee1\u5929\u661f\u8fb0\uff0c\u53ea\u8981\u4e0d\u653e\u5f03\uff0c\u6700\u5dee\u5c31\u662f\u5927\u5668\u665a\u6210\u3002\u613f\u4f60\u5168\u529b\u4ee5\u8d74\uff0c\u4e14\u6ee1\u8f7d\u800c\u5f52\uff01\u665a\u5b89\uff01\" , \"\u6700\u597d\u7684\u5e74\u9f84\u662f\uff0c\u90a3\u4e00\u5929\uff0c\u4f60\u7ec8\u4e8e\u77e5\u9053\u5e76\u4e14\u575a\u4fe1\u81ea\u5df1\u6709\u591a\u597d\uff0c\u4e0d\u662f\u865a\u5f20\uff0c\u4e0d\u662f\u5938\u6d6e\uff0c\u4e0d\u662f\u4f17\u4eba\u6367\uff0c\u662f\u5185\u5fc3\u660e\u660e\u6f88\u6f88\u77e5\u9053\uff1a\u662f\u7684\uff0c\u6211\u5c31\u662f\u8fd9\u4e48\u597d\u3002\u665a\u5b89~\" , \"\u591c\u6df1\u4eba\u9759\u4e86\u5c31\u628a\u5fc3\u638f\u51fa\u6765\u81ea\u5df1\u7f1d\u7f1d\u8865\u8865\uff0c\u5b8c\u4e8b\u4e86\u518d\u585e\u56de\u53bb\uff0c\u7761\u4e00\u89c9\u9192\u6765\u53c8\u662f\u4fe1\u5fc3\u767e\u500d\u3002\u665a\u5b89\uff01\" , \"\u6240\u6709\u7684\u6545\u4e8b\uff0c\u90fd\u6709\u4e00\u4e2a\u7ed3\u5c40\u3002\u4f46\u5e78\u8fd0\u7684\u662f\uff0c\u5728\u751f\u6d3b\u4e2d\uff0c\u6bcf\u4e2a\u7ed3\u5c40\u90fd\u4f1a\u53d8\u6210\u4e00\u4e2a\u65b0\u7684\u5f00\u59cb\u3002\u665a\u5b89!\" , \"\u96be\u8fc7\u7684\u65f6\u5019\uff0c\u5c31\u628a\u81ea\u5df1\u5f53\u6210\u53e6\u4e00\u4e2a\u4eba\uff0c\u5f53\u521d\u600e\u4e48\u5b89\u6170\u522b\u4eba\uff0c\u73b0\u5728\u5c31\u600e\u4e48\u5b89\u6170\u81ea\u5df1\u3002\u665a\u5b89\uff01\" , \"\u665a\u662f\u4e16\u754c\u7684\u665a\uff0c\u5b89\u662f\u6709\u4f60\u7684\u5b89\u3002\u665a\u5b89\uff01\" , \"\u5e0c\u671b\u751f\u6d3b\u6709\u60ca\u559c\uff0c\u5e0c\u671b\u559c\u6b22\u88ab\u56de\u5e94\uff0c\u613f\u4f60\u597d\u68a6\uff0c\u665a\u5b89\uff01\" , \"\u539f\u6765\u4ee5\u4e3a\uff0c\u62e5\u6709\u7684\u4e1c\u897f\u8d8a\u591a\uff0c\u624d\u4f1a\u8d8a\u5e78\u798f\uff0c\u540e\u6765\u624d\u53d1\u73b0\uff0c\u751f\u6d3b\u8d8a\u7b80\u5355\uff0c\u624d\u4f1a\u66f4\u8f7b\u677e\u3002\u665a\u5b89\u597d\u68a6\u3002\" , \"\u661f\u661f\u4f1a\u4e0d\u4f1a\u8d81\u7740\u4eba\u95f4\u7684\u70df\u706b\u5760\u843d\u65f6\uff0c\u5077\u5077\u6e9c\u4e0b\u6765\u89c1\u60f3\u89c1\u7684\u4eba\u3002\u665a\u5b89\uff01\" , \"\u4eca\u591c\u592a\u665a\u4e86\uff0c\u660e\u5929\u7ee7\u7eed\u60f3\u4f60\uff0c\u7b49\u661f\u661f\u90fd\u7761\u7740\u4e86\uff0c\u518d\u8bf4\u60f3\u4f60\u3002\" , \"\"\"\u6211\u5bf9\u4e16\u754c\u8bf4\u665a\u5b89\uff0c\u552f\u72ec\u5bf9\u4f60\u8bf4\u559c\u6b22\uff01\u7231\u4f60\uff08\u3065\uffe33\uffe3\uff09\u3065\u256d\u2764\uff5e\"\"\" , \"\u597d\u60f3\u62b1\u62b1\u4f60\u5440~\u53ea\u662f\u56e0\u4e3a\u5fc3\u75bc\u4f60\uff0c\u89c9\u5f97\u4f60\u8be5\u4f11\u606f\u4e86\uff0c\u7136\u540e\u5728\u4f60\u63aa\u4e0d\u53ca\u9632\u7684\u65f6\u5019\u62e5\u4f60\u5165\u6000\uff0c\u63c9\u63c9\u4f60\u7684\u5934\u53d1\u544a\u8bc9\u4f60\uff1a\u5df2\u7ecf\u591f\u4e86\uff0c\u4f60\u5f88\u52aa\u529b\u4e86\u53ef\u4ee5\u597d\u597d\u4f11\u606f\u4e86\" , \"\u665a\u5b89\uff0c\u6362\u4e2a\u4e16\u754c\u60f3\u4f60\uff0c\u4e00\u4f1a\u513f\u89c1\u3002\" , \"\u4eca\u5929\u6708\u4eae\u4e0d\u8425\u4e1a\uff0c\u6240\u4ee5\u7531\u6211\u6765\u8bf4\u665a\u5b89\u3002\" , \"\u8d81\u7740\u661f\u661f\u548c\u6708\u4eae\u90fd\u5728\uff0c\u6084\u6084\u8bf4\u58f0\uff0c\u4f60\u771f\u53ef\u7231\uff0c\u665a\u5b89\u3002\" , \"\u60f3\u5bf9\u5168\u4e16\u754c\u8bf4\u665a\u5b89\uff0c\u6070\u597d\u4f60\u5c31\u662f\u5168\u4e16\u754c\u3002\" , \"\u60f3\u8981\u52ab\u6301\u4e00\u9897\u661f\u661f\uff0c\u5728\u6708\u8272\u6726\u80e7\u7684\u591c\u665a\u964d\u843d\u5230\u4f60\u7684\u68a6\u91cc\" , \"\u665a\u5b89\u5514\u897f\u8fea\u897f\uff0c\u665a\u5b89\u739b\u5361\u5df4\u5361\uff0c\u665a\u5b89\u4f9d\u53e4\u6bd4\u53e4\uff0c\u665a\u5b89\u6c64\u59c6\u5e03\u5229\u6ce2\uff0c\u665a\u5b89\u5c0f\u70b9\u70b9\uff0c\u665a\u5b89\u53ee\u53ee\u8f66\uff0c\u665a\u5b89\u54c8\u547c\u547c\u665a\u5b89\u98de\u98de\u9c7c\uff0c\u665a\u5b89\u6211\u7684\u670b\u53cb\u4eec\u3002\" , \"\u7761\u89c9\u5427\uff0c\u4f60\u7684\u5934\u53d1\u4e0d\u5141\u8bb8\u4f60\u778e\u60f3w\" , \"\u4eca\u665a\u6765\u6211\u7684\u68a6\u91cc\u5417\uff1f\u8c08\u604b\u7231\u7684\u90a3\u79cd\u3002\" , \"\u4f60\u77e5\u9053\u5417\uff1f\u6211\u6709\u4e00\u4e2a\u5fc3\u613f\uff0c\u90a3\u5c31\u662f\u4ee5\u540e\u80fd\u591f\u4ece\u4f60\u7684\u623f\u95f4\u8ddf\u4f60\u4e00\u8d77\u770b\u661f\u661f\u3002\" , \"\u60f3\u505a\u4f60\u5e8a\u8fb9\u7684\u5c0f\u718a\uff0c\u4e3a\u4f60\u6253\u8d25\u68a6\u91cc\u7684\u6076\u9f99\u3002\" , \"\u4eca\u5929\u8fd9\u768e\u6d01\u7684\u6708\u5149\u548c\u6ee1\u5929\u7684\u661f\u8fb0\u90fd\u5f52\u4f60\uff0c\u800c\u6211\u4e5f\u5f52\u4f60\u3002\" , \"\u665a\u5b89\uff0c\u6211\u5e26\u7740\u6211\u7684\u53ef\u7231\u4e00\u8d77\u6253\u70ca\u4e86\uff0c\u5e2e\u6211\u5173\u4e00\u4e0b\u6708\u4eae\" , ] class MorningGreet ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . startswith ( '\u65e9\u5b89' ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , random . choice ( GOODMORNING_LIST ), data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'MorningGreet' , 'description' : '\u65e9\u5b89' , 'commandDescription' : '\u65e9\u5b89' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class NightGreet ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . startswith ( '\u665a\u5b89' ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , random . choice ( GOODNIGHT_LIST ), data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'NightGreet' , 'description' : '\u665a\u5b89' , 'commandDescription' : '\u665a\u5b89' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"\u65e9\u5b89\u665a\u5b89"},{"location":"plugin/plugins/greetingsPlugin/#1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 MorningGreet StandardPlugin '\u65e9\u5b89' None \u83b7\u53d6bot\u7684\u65e9\u4e0a\u95ee\u597d NightGreet StandardPlugin '\u665a\u5b89' None \u83b7\u53d6bot\u7684\u665a\u4e0a\u95ee\u597d","title":"1. \u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/greetingsPlugin/#2","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ MorningGreet (), NightGreet ()], 'greeting' ), # \u65e9\u5b89\u665a\u5b89 # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... MorningGreet (), NightGreet (), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00greeting 333 > \u65e9\u5b89 333 > \u665a\u5b89 # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00greeting 111 > -grpcfg enable greeting bot> OK 222 > \u65e9\u5b89\u7fa4\u53cb bot> \u4e00\u4e07\u4e2a\u7f8e\u4e3d\u7684\u672a\u6765\uff0c\u62b5\u4e0d\u4e0a\u4e00\u4e2a\u6e29\u6696\u7684\u73b0\u5728\u3002\u65e9\u5b89\uff01 666 > \u665a\u5b89 bot> \u6211\u7684\u5c0f\u8111\u888b\u5df2\u7ecf\u5fd9\u4e86\u4e00\u5929\u4e86\uff0c\u597d\u7d2f\u554a\uff0c\u4e5f\u8be5\u4f11\u606f\u4e86\u3002\u665a\u5b89\uff01","title":"2. \u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/greetingsPlugin/#3","text":"from abc import ABC , abstractmethod from typing import Union , Any import random from utils.basicEvent import * from utils.standardPlugin import StandardPlugin GOODMORNING_LIST = [ \"\u65f6\u95f4\u6700\u4f1a\u9a97\u4eba\uff0c\u4f46\u4e5f\u80fd\u8ba9\u4f60\u660e\u767d\uff0c\u8fd9\u4e2a\u4e16\u754c\u6ca1\u6709\u4ec0\u4e48\u4e0d\u80fd\u5931\u53bb\u7684\uff0c\u79bb\u53bb\u7684\u90fd\u662f\u98ce\u666f\uff0c\u7559\u4e0b\u7684\u624d\u662f\u4eba\u751f\uff0c\u8d70\u5230\u6700\u540e\u7684\uff0c\u5c31\u662f\u5bf9\u7684\u4eba\u3002\u65e9\u5b89\uff01\" , \"\u5584\u826f\u548c\u7231\u90fd\u662f\u514d\u8d39\u7684\uff0c\u4f46\u4e0d\u662f\u5ec9\u4ef7\u7684\uff0c\u4f60\u7684\u5584\u826f\uff0c\u9700\u8981\u5e26\u70b9\u950b\u8292\uff0c\u4f60\u7684\u7231\uff0c\u9700\u8981\u5e26\u4e9b\u7406\u667a\uff0c\u5e26\u773c\u8bc6\u4eba\uff0c\u6bd5\u7adf\u4e0d\u662f\u6240\u6709\u4eba\u90fd\u914d\u62e5\u6709\u5b83\u4eec\u3002\u65e9\u5b89\uff01\" , \"\u4eba\u751f\u6700\u597d\u7684\u72b6\u6001\uff0c\u662f\u6bcf\u5929\u9192\u6765\uff0c\u9762\u671d\u9633\u5149\uff0c\u5634\u89d2\u4e0a\u626c\u3002\u4e0d\u7fa1\u6155\u8c01\uff0c\u4e0d\u8ba8\u597d\u8c01\uff0c\u9ed8\u9ed8\u52aa\u529b\uff0c\u6d3b\u6210\u81ea\u5df1\u60f3\u8981\u7684\u6a21\u6837\u3002\u65e9\u5b89\uff01\" , \"\u5343\u4e07\u4e0d\u8981\u5bf9\u4efb\u4f55\u4e8b\u611f\u5230\u540e\u6094\uff0c\u56e0\u4e3a\u5b83\u66fe\u7ecf\u4e00\u5ea6\u5c31\u662f\u4f60\u60f3\u8981\u7684\u3002\u540e\u6094\u6ca1\u7528\uff0c\u8981\u4e48\u5fd8\u8bb0\uff0c\u8981\u4e48\u52aa\u529b\u3002\u65e9\u5b89\uff01\" , \"\u6709\u65f6\u5019\uff0c\u52aa\u529b\u4e00\u70b9\uff0c\u662f\u4e3a\u8ba9\u81ea\u5df1\u6709\u8d44\u683c\uff0c\u4e0d\u53bb\u505a\u4e0d\u559c\u6b22\u7684\u4e8b\uff1b\u662f\u4e3a\u4e86\u80fd\u8ba9\u81ea\u5df1\uff0c\u9047\u89c1\u4e00\u4e2a\u559c\u6b22\u7684\u4eba\u65f6\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u81ea\u5df1\u4e0d\u591f\u597d\u800c\u6ca1\u80fd\u7559\u4f4f\u5bf9\u65b9\u3002\u65e9\u5b89\uff01\" , \"\u8be5\u6765\u7684\u90fd\u4f1a\u6765\uff0c\u8be5\u8d70\u7684\u5168\u4f1a\u8d70\uff0c\u522b\u6297\u62d2\uff0c\u522b\u633d\u7559\uff0c\u522b\u8d2a\u604b\u3002\u5b66\u7740\u770b\u6de1\u4e00\u4e9b\u4e8b\u60c5\u3002\u4eb2\u7231\u7684\uff0c\u613f\u4f60\u50cf\u5411\u65e5\u8475\u4e00\u6837\uff0c\u6bcf\u5929\u90fd\u5145\u6ee1\u6b63\u80fd\u91cf\uff0c\u5f00\u59cb\u5143\u6c14\u6ee1\u6ee1\u7684\u4e00\u5929\u3002\" , \"\u4e16\u754c\u4e0a\u6839\u672c\u5c31\u4e0d\u5b58\u5728\u5b8c\u7f8e\u7684\u4e8b\u7269\uff0c\u6211\u4eec\u6ca1\u5fc5\u8981\u6d6a\u8d39\u5927\u91cf\u7684\u7cbe\u529b\u53bb\u5bfb\u627e\u4e0d\u5b58\u5728\u7684\u4e1c\u897f\u3002\u4e0e\u5176\u7528\u4e00\u751f\u7684\u65f6\u95f4\u53bb\u6267\u7740\u5730\u8ffd\u6c42\u865a\u65e0\u7f25\u7f08\u7684\u4e1c\u897f\uff0c\u4e0d\u5982\u73cd\u60dc\u548c\u628a\u63e1\u73b0\u5728\u7f8e\u597d\u7684\u751f\u6d3b\u3002\" , \"\u6bcf\u4e2a\u4eba\u7684\u4eba\u751f\u91cc\u90fd\u4f1a\u9047\u5230\u4e00\u573a\u63aa\u624b\u4e0d\u53ca\u7684\u5927\u96e8\uff0c\u82e5\u4f60\u8eab\u9677\u96e8\u4e2d\uff0c\u613f\u6709\u4eba\u4e3a\u4f60\u6491\u4f1e\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u4e5f\u613f\u4f60\u6709\u542c\u96e8\u7684\u5fc3\u60c5\u3002\u65e9\u5b89\uff01\" , \"\u7f8e\u597d\u7684\u4e8b\u60c5\u603b\u4f1a\u5230\u6765\uff0c\u4f60\u8981\u7b80\u5355\u5e72\u51c0\u806a\u660e\u5355\u7eaf\uff0c\u5c31\u4f1a\u53d1\u73b0\u5947\u8ff9\u4e0d\u662f\u964d\u4e34\uff0c\u5b83\u662f\u56e0\u4f60\u800c\u6765\u3002\" , \"\u4eba\u8fd9\u8f88\u5b50\uff0c\u6709\u4eba\u7fa1\u6155\u4f60\uff0c\u6709\u4eba\u8ba8\u538c\u4f60\uff0c\u6709\u4eba\u5ac9\u5992\u4f60\uff0c\u6709\u4eba\u770b\u4e0d\u8d77\u4f60\uff0c\u6ca1\u5173\u7cfb\uff0c\u4ed6\u4eec\u90fd\u662f\u5916\u4eba\uff1b\u751f\u6d3b\u5c31\u662f\u8fd9\u6837\uff0c\u4f60\u6240\u505a\u7684\u4e00\u5207\u4e0d\u80fd\u8ba9\u6bcf\u4e2a\u4eba\u90fd\u6ee1\u610f\u3002\u4e0d\u8981\u4e3a\u4e86\u8ba8\u597d\u522b\u4eba\uff0c\u800c\u4e1f\u5931\u81ea\u5df1\u7684\u672c\u6027\u3002\u65e9\u5b89\uff01\" , \"\u4e00\u4e2a\u4eba\u81f3\u5c11\u5e94\u8be5\u62e5\u6709\u4e00\u4e2a\u68a6\u60f3\uff0c\u6709\u4e00\u4e2a\u7406\u7531\u53bb\u575a\u5f3a\uff0c\u5fc3\u82e5\u6ca1\u6709\u6816\u606f\u7684\u5730\u65b9\uff0c\u5728\u54ea\u91cc\u90fd\u662f\u6d41\u6d6a\u3002\u65e9\u5b89\uff01\" , \"\u4e00\u4e07\u4e2a\u7f8e\u4e3d\u7684\u672a\u6765\uff0c\u62b5\u4e0d\u4e0a\u4e00\u4e2a\u6e29\u6696\u7684\u73b0\u5728\u3002\u65e9\u5b89\uff01\" , \"\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u559c\u6b22\u7684\u6837\u5b50\uff0c\u4e0d\u62b1\u6028\uff0c\u4e0d\u5c06\u5c31\uff0c\u6709\u91ce\u5fc3\uff0c\u6709\u5149\u8292\uff01\u65e9\u5b89\uff01\" , \"\u65e0\u8bba\u751f\u6d3b\u600e\u6837\uff0c\u90fd\u4e0d\u8981\u5fd8\u8bb0\u5fae\u7b11\uff0c\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u7684\u592a\u9633\uff0c\u65e0\u9700\u51ed\u501f\u8c01\u7684\u5149~\" , \"\u4e0d\u7ba1\u6628\u5929\u6709\u591a\u7cdf\u7cd5\uff0c\u4e0d\u8981\u8ba9\u5b83\u5f71\u54cd\u4f60\u7684\u73b0\u5728\u548c\u672a\u6765\uff0c\u6d3b\u5f97\u50cf\u5411\u65e5\u8475\u4e00\u6837\u707f\u70c2\u3002\u65e9\u4e0a\u597d\uff01\" , \"\u5929\u662f\u51b7\u7684\uff0c\u5fc3\u662f\u6696\u7684\uff0c\u5bf9\u4f60\u7684\u795d\u798f\u662f\u6c38\u8fdc\u7684\uff01\u4eba\u662f\u8fdc\u7684\uff0c\u5fc3\u662f\u8fd1\u7684\uff0c\u5bf9\u4f60\u7684\u601d\u5ff5\u662f\u4e0d\u53d8\u7684\uff01\u613f\u4f60\u6bcf\u4e00\u5929\u90fd\u9633\u5149\u707f\u70c2\u3001\u7b11\u53e3\u5e38\u5f00\uff0c\u65e9\u5b89\uff01\" , \"\u62b1\u6700\u5927\u5e0c\u671b\uff0c\u5c3d\u6700\u5927\u52aa\u529b\uff0c\u505a\u6700\u574f\u6253\u7b97\uff0c\u6301\u6700\u597d\u5fc3\u6001\u3002\u8bb0\u4f4f\u8be5\u8bb0\u4f4f\u7684\uff0c\u5fd8\u8bb0\u8be5\u5fd8\u8bb0\u7684\uff0c\u6539\u53d8\u80fd\u6539\u53d8\u7684\uff0c\u63a5\u53d7\u6210\u4e8b\u5b9e\u7684\u3002\u592a\u9633\u603b\u662f\u65b0\u7684\uff0c\u6bcf\u5929\u90fd\u662f\u7f8e\u597d\u7684\u65e5\u5b50\u3002\u65e9\u5b89\uff01\" , \"\u6bcf\u5929\u6e05\u6668\u7684\u7b2c\u4e00\u9053\u66d9\u5149\uff0c\u53ef\u4ee5\u795e\u5947\u5730\u6cbb\u6108\u6628\u65e5\u7684\u4f24\u75db\u3002\" , \"\u5e26\u7740\u9633\u5149\u51fa\u53d1\uff0c\u53bb\u9047\u89c1\u6e29\u6696\uff1b\u5e26\u7740\u5fae\u7b11\u524d\u884c\uff0c\u53bb\u9047\u89c1\u5e78\u798f\uff0c\u6240\u6709\u7f8e\u597d\u7684\u4e0d\u671f\u800c\u9047\uff0c\u90fd\u5728\u8def\u4e0a\u3002\u65b0\u7684\u4e00\u5929\uff0c\u65e9\u5b89\uff01\" , ] GOODNIGHT_LIST = [ \"\u4eca\u591c\u6211\u8981\u53bb\u5f81\u62ef\u6551\u5730\u7403\uff0c\u6709\u4e8b\u8bf7\u7559\u8a00\u3002\u665a\u5b89\uff01\" , \"\u9ed1\u591c\u4e0d\u4f1a\u4e8f\u5f85\u665a\u7761\u7684\u4eba\uff0c\u5b83\u4f1a\u8ba9\u4f60\u8131\u53d1\u3002\u665a\u5b89\uff01\" , \"\u6211\u7684\u5c0f\u8111\u888b\u5df2\u7ecf\u5fd9\u4e86\u4e00\u5929\u4e86\uff0c\u597d\u7d2f\u554a\uff0c\u4e5f\u8be5\u4f11\u606f\u4e86\u3002\u665a\u5b89\uff01\" , \"\u628a\u6240\u6709\u7684\u70e6\u607c\u90fd\u629b\u6389\uff0c\u62c9\u4e0a\u7a97\u5e18\uff0c\u6302\u4e0a\u6708\u4eae\uff0c\u597d\u597d\u7761\u4e00\u89c9\u3002\u665a\u5b89\uff01\" , \"\u4f60\u60f3\u4e00\u591c\u66b4\u5bcc\u5417\uff1f\u90a3\u5c31\u8ddf\u6211\u4e00\u8d77\u5173\u706f\u7761\u89c9\u5427\u3002\u665a\u5b89\uff01\u4f60\u60f3\u4e00\u591c\u66b4\u5bcc\u5417\uff1f\u90a3\u5c31\u8ddf\u6211\u4e00\u8d77\u5173\u706f\u7761\u89c9\u5427\u3002\u665a\u5b89\uff01\" , \"\u6211\u5df2\u7ecf\u76d6\u597d\u4e86\u88ab\u5b50\uff0c\u95ed\u597d\u4e00\u53ea\u773c\uff0c\u5c31\u7b49\u4f60\u8bf4\u665a\u5b89\u4e86\uff0c\u8bf4\u5b8c\u6211\u5c31\u95ed\u53e6\u4e00\u53ea\u4e86\u3002\" , \"\u8981\u5f00\u5fc3\uff0c\u8981\u52aa\u529b\uff0c\u8981\u50cf\u661f\u661f\u4e00\u6837\u53d1\u5149\u53d1\u4eae\u3002\u665a\u5b89\uff01\" , \"\u628a\u661f\u661f\u71ac\u6210\u7cd6\u6d46\uff0c\u8638\u4e00\u8638\u4f60\u8bf4\u8fc7\u7684\u665a\u5b89\uff0c\u7136\u540e\u5927\u53e3\u5927\u53e3\u7684\u5403\u6389\u3002\u665a\u5b89\uff01\" , \"\u6211\u8981\u4e54\u88c5\u6210\u4e00\u9897\u5c0f\u5976\u7cd6\uff0c\u591c\u6df1\u4e86\u63d0\u7740\u661f\u661f\u706f\u5feb\u5feb\u6e9c\u5230\u4f60\u7684\u68a6\u91cc\uff0c\u563b\u563b\uff0c\u665a\u5b89\uff01\" , \"\u4f60\u77e5\u9053\u4e3a\u4ec0\u4e48\u6211\u5728\u591c\u91cc\u603b\u662f\u4e0d\u7761\u89c9\u5417\uff1f\u56e0\u4e3a\u9ed1\u591c\u9700\u8981\u6211\u8fd9\u9897\u95ea\u4eae\u7684\u661f\u3002\u665a\u5b89\uff01\" , \"\u65e9\u70b9\u7761\u5427\uff0c\u4eca\u665a\u6211\u4f1a\u8dd1\u5230\u4f60\u7684\u68a6\u91cc\u624b\u821e\u8db3\u8e48\u3002\u665a\u5b89\uff01\" , \"\u8981\u4e0d\u8981\u4e00\u8d77\u53bb\u68a6\u4e2d\u770b\u6708\u4eae\uff0c\u4e00\u5b9a\u8d85\u7ea7\u5927\uff0c\u8d85\u7ea7\u7f8e\u3002\u665a\u5b89\uff01\" , \"\u6708\u4eae\u4e0d\u7761\u89c9\uff0c\u6211\u4e5f\u4e0d\u7761\u89c9\uff0c\u6211\u662f\u8fd9\u4e2a\u4e16\u754c\u4e0a\u7684\u4e00\u4e2a\u5c0f\u7f8e\u5473\u3002\" , \"\u75b2\u60eb\u7684\u751f\u6d3b\u9700\u8981\u4e00\u4e2a\u6e29\u67d4\u7684\u68a6\u548c\u4e00\u4e2a\u5f88\u7231\u7684\u4eba\u3002\u665a\u5b89\uff01\" , \"\u8fd9\u4e2a\u4e16\u754c\u592a\u5371\u9669\uff0c\u65f6\u95f4\u5c31\u8be5\u6d6a\u8d39\u5728\u7f8e\u597d\u7684\u4e8b\u7269\u4e0a\u3002\u665a\u5b89\uff01\" , \"\u4e16\u4e8b\u5343\u5e06\u8fc7\uff0c\u524d\u65b9\u7ec8\u4f1a\u662f\u6e29\u67d4\u548c\u6708\u5149\u3002\u665a\u5b89\uff01\" , \"\u5f53\u4f60\u5728\u591c\u665a\u5b64\u519b\u594b\u6218\u65f6\uff0c\u6f2b\u5929\u661f\u5149\u56e0\u4e3a\u4f60\u800c\u95ea\u70c1\u3002\u665a\u5b89\uff01\" , \"\u4f60\u5c31\u662f\u5929\u8d50\u7684\u793c\u7269\uff0c\u6211\u8fdf\u6765\u7684\u6551\u8d4e\uff1b\u4f60\u662f\u4e0d\u706d\u7684\u661f\u5149\uff0c\u65e5\u590d\u4e00\u65e5\u7684\u7f8e\u68a6\u3002\u665a\u5b89\uff01\" , \".\u6211\u5728\u4eba\u95f4\u8d29\u5356\u9ec4\u660f\uff0c\u53ea\u4e3a\u6536\u96c6\u4e16\u95f4\u6e29\u67d4\u53bb\u89c1\u4f60\uff0c\u665a\u5b89\uff01\" , \"\u4eca\u5929\u7684\u4e16\u754c\u5df2\u7ecf\u6253\u70ca\u4e86\uff0c\u5df2\u7ecf\u4e0d\u5bf9\u5916\u8425\u4e1a\u4e86\uff0c\u665a\u5b89\uff01\" , \"\u613f\u4f60\u4ece\u6b64\u4e0d\u5bf9\u65b0\u4e8b\u754f\u60e7\uff0c\u4e0d\u4f1a\u91cd\u8e48\u8986\u8f99\uff0c\u518d\u4e5f\u4e0d\u4e3a\u611f\u60c5\u6c89\u6ca6\uff0c\u4e0d\u4e3a\u71ac\u591c\u540e\u6094\uff0c\u76f8\u4fe1\u6709\u4eba\u4f1a\u966a\u4f60\u98a0\u6c9b\u6d41\u79bb\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u613f\u4f60\u6210\u4e3a\u81ea\u5df1\u7684\u592a\u9633\u3002\u665a\u5b89\uff0c\u597d\u68a6\uff01\" , \"\u9519\u8fc7\u843d\u65e5\u4f59\u6656\uff0c\u8fd8\u4f1a\u6709\u6ee1\u5929\u661f\u8fb0\uff0c\u53ea\u8981\u4e0d\u653e\u5f03\uff0c\u6700\u5dee\u5c31\u662f\u5927\u5668\u665a\u6210\u3002\u613f\u4f60\u5168\u529b\u4ee5\u8d74\uff0c\u4e14\u6ee1\u8f7d\u800c\u5f52\uff01\u665a\u5b89\uff01\" , \"\u6700\u597d\u7684\u5e74\u9f84\u662f\uff0c\u90a3\u4e00\u5929\uff0c\u4f60\u7ec8\u4e8e\u77e5\u9053\u5e76\u4e14\u575a\u4fe1\u81ea\u5df1\u6709\u591a\u597d\uff0c\u4e0d\u662f\u865a\u5f20\uff0c\u4e0d\u662f\u5938\u6d6e\uff0c\u4e0d\u662f\u4f17\u4eba\u6367\uff0c\u662f\u5185\u5fc3\u660e\u660e\u6f88\u6f88\u77e5\u9053\uff1a\u662f\u7684\uff0c\u6211\u5c31\u662f\u8fd9\u4e48\u597d\u3002\u665a\u5b89~\" , \"\u591c\u6df1\u4eba\u9759\u4e86\u5c31\u628a\u5fc3\u638f\u51fa\u6765\u81ea\u5df1\u7f1d\u7f1d\u8865\u8865\uff0c\u5b8c\u4e8b\u4e86\u518d\u585e\u56de\u53bb\uff0c\u7761\u4e00\u89c9\u9192\u6765\u53c8\u662f\u4fe1\u5fc3\u767e\u500d\u3002\u665a\u5b89\uff01\" , \"\u6240\u6709\u7684\u6545\u4e8b\uff0c\u90fd\u6709\u4e00\u4e2a\u7ed3\u5c40\u3002\u4f46\u5e78\u8fd0\u7684\u662f\uff0c\u5728\u751f\u6d3b\u4e2d\uff0c\u6bcf\u4e2a\u7ed3\u5c40\u90fd\u4f1a\u53d8\u6210\u4e00\u4e2a\u65b0\u7684\u5f00\u59cb\u3002\u665a\u5b89!\" , \"\u96be\u8fc7\u7684\u65f6\u5019\uff0c\u5c31\u628a\u81ea\u5df1\u5f53\u6210\u53e6\u4e00\u4e2a\u4eba\uff0c\u5f53\u521d\u600e\u4e48\u5b89\u6170\u522b\u4eba\uff0c\u73b0\u5728\u5c31\u600e\u4e48\u5b89\u6170\u81ea\u5df1\u3002\u665a\u5b89\uff01\" , \"\u665a\u662f\u4e16\u754c\u7684\u665a\uff0c\u5b89\u662f\u6709\u4f60\u7684\u5b89\u3002\u665a\u5b89\uff01\" , \"\u5e0c\u671b\u751f\u6d3b\u6709\u60ca\u559c\uff0c\u5e0c\u671b\u559c\u6b22\u88ab\u56de\u5e94\uff0c\u613f\u4f60\u597d\u68a6\uff0c\u665a\u5b89\uff01\" , \"\u539f\u6765\u4ee5\u4e3a\uff0c\u62e5\u6709\u7684\u4e1c\u897f\u8d8a\u591a\uff0c\u624d\u4f1a\u8d8a\u5e78\u798f\uff0c\u540e\u6765\u624d\u53d1\u73b0\uff0c\u751f\u6d3b\u8d8a\u7b80\u5355\uff0c\u624d\u4f1a\u66f4\u8f7b\u677e\u3002\u665a\u5b89\u597d\u68a6\u3002\" , \"\u661f\u661f\u4f1a\u4e0d\u4f1a\u8d81\u7740\u4eba\u95f4\u7684\u70df\u706b\u5760\u843d\u65f6\uff0c\u5077\u5077\u6e9c\u4e0b\u6765\u89c1\u60f3\u89c1\u7684\u4eba\u3002\u665a\u5b89\uff01\" , \"\u4eca\u591c\u592a\u665a\u4e86\uff0c\u660e\u5929\u7ee7\u7eed\u60f3\u4f60\uff0c\u7b49\u661f\u661f\u90fd\u7761\u7740\u4e86\uff0c\u518d\u8bf4\u60f3\u4f60\u3002\" , \"\"\"\u6211\u5bf9\u4e16\u754c\u8bf4\u665a\u5b89\uff0c\u552f\u72ec\u5bf9\u4f60\u8bf4\u559c\u6b22\uff01\u7231\u4f60\uff08\u3065\uffe33\uffe3\uff09\u3065\u256d\u2764\uff5e\"\"\" , \"\u597d\u60f3\u62b1\u62b1\u4f60\u5440~\u53ea\u662f\u56e0\u4e3a\u5fc3\u75bc\u4f60\uff0c\u89c9\u5f97\u4f60\u8be5\u4f11\u606f\u4e86\uff0c\u7136\u540e\u5728\u4f60\u63aa\u4e0d\u53ca\u9632\u7684\u65f6\u5019\u62e5\u4f60\u5165\u6000\uff0c\u63c9\u63c9\u4f60\u7684\u5934\u53d1\u544a\u8bc9\u4f60\uff1a\u5df2\u7ecf\u591f\u4e86\uff0c\u4f60\u5f88\u52aa\u529b\u4e86\u53ef\u4ee5\u597d\u597d\u4f11\u606f\u4e86\" , \"\u665a\u5b89\uff0c\u6362\u4e2a\u4e16\u754c\u60f3\u4f60\uff0c\u4e00\u4f1a\u513f\u89c1\u3002\" , \"\u4eca\u5929\u6708\u4eae\u4e0d\u8425\u4e1a\uff0c\u6240\u4ee5\u7531\u6211\u6765\u8bf4\u665a\u5b89\u3002\" , \"\u8d81\u7740\u661f\u661f\u548c\u6708\u4eae\u90fd\u5728\uff0c\u6084\u6084\u8bf4\u58f0\uff0c\u4f60\u771f\u53ef\u7231\uff0c\u665a\u5b89\u3002\" , \"\u60f3\u5bf9\u5168\u4e16\u754c\u8bf4\u665a\u5b89\uff0c\u6070\u597d\u4f60\u5c31\u662f\u5168\u4e16\u754c\u3002\" , \"\u60f3\u8981\u52ab\u6301\u4e00\u9897\u661f\u661f\uff0c\u5728\u6708\u8272\u6726\u80e7\u7684\u591c\u665a\u964d\u843d\u5230\u4f60\u7684\u68a6\u91cc\" , \"\u665a\u5b89\u5514\u897f\u8fea\u897f\uff0c\u665a\u5b89\u739b\u5361\u5df4\u5361\uff0c\u665a\u5b89\u4f9d\u53e4\u6bd4\u53e4\uff0c\u665a\u5b89\u6c64\u59c6\u5e03\u5229\u6ce2\uff0c\u665a\u5b89\u5c0f\u70b9\u70b9\uff0c\u665a\u5b89\u53ee\u53ee\u8f66\uff0c\u665a\u5b89\u54c8\u547c\u547c\u665a\u5b89\u98de\u98de\u9c7c\uff0c\u665a\u5b89\u6211\u7684\u670b\u53cb\u4eec\u3002\" , \"\u7761\u89c9\u5427\uff0c\u4f60\u7684\u5934\u53d1\u4e0d\u5141\u8bb8\u4f60\u778e\u60f3w\" , \"\u4eca\u665a\u6765\u6211\u7684\u68a6\u91cc\u5417\uff1f\u8c08\u604b\u7231\u7684\u90a3\u79cd\u3002\" , \"\u4f60\u77e5\u9053\u5417\uff1f\u6211\u6709\u4e00\u4e2a\u5fc3\u613f\uff0c\u90a3\u5c31\u662f\u4ee5\u540e\u80fd\u591f\u4ece\u4f60\u7684\u623f\u95f4\u8ddf\u4f60\u4e00\u8d77\u770b\u661f\u661f\u3002\" , \"\u60f3\u505a\u4f60\u5e8a\u8fb9\u7684\u5c0f\u718a\uff0c\u4e3a\u4f60\u6253\u8d25\u68a6\u91cc\u7684\u6076\u9f99\u3002\" , \"\u4eca\u5929\u8fd9\u768e\u6d01\u7684\u6708\u5149\u548c\u6ee1\u5929\u7684\u661f\u8fb0\u90fd\u5f52\u4f60\uff0c\u800c\u6211\u4e5f\u5f52\u4f60\u3002\" , \"\u665a\u5b89\uff0c\u6211\u5e26\u7740\u6211\u7684\u53ef\u7231\u4e00\u8d77\u6253\u70ca\u4e86\uff0c\u5e2e\u6211\u5173\u4e00\u4e0b\u6708\u4eae\" , ] class MorningGreet ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . startswith ( '\u65e9\u5b89' ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , random . choice ( GOODMORNING_LIST ), data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'MorningGreet' , 'description' : '\u65e9\u5b89' , 'commandDescription' : '\u65e9\u5b89' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class NightGreet ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg . startswith ( '\u665a\u5b89' ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , random . choice ( GOODNIGHT_LIST ), data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'NightGreet' , 'description' : '\u665a\u5b89' , 'commandDescription' : '\u665a\u5b89' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"3. \u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/groupManagerPlugin/","text":"\u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 PluginGroupManager StandardPlugin ... ... ... \u5177\u4f53\u4ecb\u7ecd PluginGroupManager\u5177\u6709\u4e24\u4e2a\u529f\u80fd\uff1a \u4f5c\u4e3a\u63d2\u4ef6\u7ba1\u7406\u8005\uff0c\u63a5\u6536 re.compile('-grpcfg (enable|disable) %s'%groupName) \u578b\u53c2\u6570\uff0c\u4f5c\u4e3a\u5f00\u542f\u6216\u5173\u95ed\u63d2\u4ef6\u7ec4\u7684\u6307\u4ee4\uff0c\u6b64\u529f\u80fd\u9700\u8981\u7fa4bot\u7ba1\u7406\u6743\u9650 \u4f5c\u4e3a\u4e2d\u95f4\u5e73\u53f0\uff0c\u63a5\u6536\u8f93\u5165\u4f20\u7ed9\u88ab\u7ba1\u7406\u5bf9\u8c61\uff0c\u68c0\u6d4b\u88ab\u7ba1\u7406\u5bf9\u8c61\u662f\u5426\u80fd\u63a5\u6536\u53c2\u6570\u5e76\u8fd0\u884c \u60a8\u53ef\u4ee5\u628a\u6570\u4e2a\u63d2\u4ef6\u7c7b\u5bf9\u8c61\u653e\u8fdb\u5217\u8868\uff0c\u7136\u540e\u4f20\u7ed9PluginGroupManager\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cgroupName\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u7ed9\u6784\u9020\u51fd\u6570\uff0c\u5982\u4e0b\u9762\u793a\u8303\u6837\u4f8b \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D from plugins.superEmoji import FireworksFace , FirecrackersFace , BasketballFace , HotFace GroupPluginList = [ # ..... PluginGroupManager ([ FireworksFace (), FirecrackersFace (), BasketballFace (), HotFace ()], 'superemoji' ), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u5f00\u542fsuper emoji\u529f\u80fd 111 > \u70ed\u6b7b\u4e86 # bot\u4e0d\u4e88\u7406\u4f1a # 111\u5f00\u542f\u7fa4super emoji\u529f\u80fd 111 > -sudo bot> OK 111 > -grpcfg enable superemoji bot> OK # \u5f00\u59cb\u4e92\u52a8 222 > \u7bee\u7403 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403\u3011 # 111\u5173\u95ed\u7fa4super emoji\u529f\u80fd 111 > -grpcfg disable superemoji bot> OK # 444\u5c1d\u8bd5\u4e92\u52a8 444 > \u7bee\u7403 # bot\u4e0d\u4e88\u7406\u4f1a \u4ee3\u7801\u5206\u6790 \u4ee3\u7801\u4f4d\u4e8e utils/standardPlugin.py from utils.basicEvent import send , warning , readGlobalConfig , writeGlobalConfig , getGroupAdmins class PluginGroupManager ( StandardPlugin ): def __init__ ( self , plugins : List [ StandardPlugin ], groupName : str ) -> None : self . plugins = plugins self . groupName = groupName self . readyPlugin = None self . enabledDict = readGlobalConfig ( None , groupName + '.enable' ) self . defaultEnabled = False def judgeTrigger ( self , msg : str , data : Any ) -> bool : userId = data [ 'user_id' ] groupId = data [ 'group_id' ] if msg == '-grpcfg enable %s ' % self . groupName and userId in getGroupAdmins ( groupId ): self . readyPlugin = 'enable' return True if msg == '-grpcfg disable %s ' % self . groupName and userId in getGroupAdmins ( groupId ): self . readyPlugin = 'disable' return True if not self . queryEnabled ( groupId ): return False for plugin in self . plugins : if plugin . judgeTrigger ( msg , data ): self . readyPlugin = plugin return True return False def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: if self . readyPlugin == None : warning ( \"logic error in PluginGroupManager: executeEvent self.readyPlugin == None\" ) return None if self . readyPlugin in [ 'enable' , 'disable' ]: enabled = self . readyPlugin == 'enable' self . readyPlugin = None groupId = data [ \"group_id\" ] if self . queryEnabled ( groupId ) != enabled : writeGlobalConfig ( groupId , self . groupName + '.enable' , enabled ) self . enabledDict [ groupId ] = enabled send ( data [ 'group_id' ], \"OK\" ) return \"OK\" else : try : result = self . readyPlugin . executeEvent ( msg , data ) self . readyPlugin = None return result except Exception as e : warning ( \"logic error in PluginGroupManager: {} \" . format ( e )) return None def queryEnabled ( self , groupId : int ) -> bool : if groupId not in self . enabledDict . keys (): writeGlobalConfig ( groupId , self . groupName , { 'name' : self . groupName , 'enable' : self . defaultEnabled }) self . enabledDict [ groupId ] = self . defaultEnabled return self . enabledDict [ groupId ]","title":"\u63d2\u4ef6\u7ec4\u7ba1\u7406"},{"location":"plugin/plugins/groupManagerPlugin/#_1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 PluginGroupManager StandardPlugin ... ... ...","title":"\u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/groupManagerPlugin/#_2","text":"PluginGroupManager\u5177\u6709\u4e24\u4e2a\u529f\u80fd\uff1a \u4f5c\u4e3a\u63d2\u4ef6\u7ba1\u7406\u8005\uff0c\u63a5\u6536 re.compile('-grpcfg (enable|disable) %s'%groupName) \u578b\u53c2\u6570\uff0c\u4f5c\u4e3a\u5f00\u542f\u6216\u5173\u95ed\u63d2\u4ef6\u7ec4\u7684\u6307\u4ee4\uff0c\u6b64\u529f\u80fd\u9700\u8981\u7fa4bot\u7ba1\u7406\u6743\u9650 \u4f5c\u4e3a\u4e2d\u95f4\u5e73\u53f0\uff0c\u63a5\u6536\u8f93\u5165\u4f20\u7ed9\u88ab\u7ba1\u7406\u5bf9\u8c61\uff0c\u68c0\u6d4b\u88ab\u7ba1\u7406\u5bf9\u8c61\u662f\u5426\u80fd\u63a5\u6536\u53c2\u6570\u5e76\u8fd0\u884c \u60a8\u53ef\u4ee5\u628a\u6570\u4e2a\u63d2\u4ef6\u7c7b\u5bf9\u8c61\u653e\u8fdb\u5217\u8868\uff0c\u7136\u540e\u4f20\u7ed9PluginGroupManager\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cgroupName\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u7ed9\u6784\u9020\u51fd\u6570\uff0c\u5982\u4e0b\u9762\u793a\u8303\u6837\u4f8b","title":"\u5177\u4f53\u4ecb\u7ecd"},{"location":"plugin/plugins/groupManagerPlugin/#_3","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D from plugins.superEmoji import FireworksFace , FirecrackersFace , BasketballFace , HotFace GroupPluginList = [ # ..... PluginGroupManager ([ FireworksFace (), FirecrackersFace (), BasketballFace (), HotFace ()], 'superemoji' ), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u5f00\u542fsuper emoji\u529f\u80fd 111 > \u70ed\u6b7b\u4e86 # bot\u4e0d\u4e88\u7406\u4f1a # 111\u5f00\u542f\u7fa4super emoji\u529f\u80fd 111 > -sudo bot> OK 111 > -grpcfg enable superemoji bot> OK # \u5f00\u59cb\u4e92\u52a8 222 > \u7bee\u7403 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403\u3011 # 111\u5173\u95ed\u7fa4super emoji\u529f\u80fd 111 > -grpcfg disable superemoji bot> OK # 444\u5c1d\u8bd5\u4e92\u52a8 444 > \u7bee\u7403 # bot\u4e0d\u4e88\u7406\u4f1a","title":"\u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/groupManagerPlugin/#_4","text":"\u4ee3\u7801\u4f4d\u4e8e utils/standardPlugin.py from utils.basicEvent import send , warning , readGlobalConfig , writeGlobalConfig , getGroupAdmins class PluginGroupManager ( StandardPlugin ): def __init__ ( self , plugins : List [ StandardPlugin ], groupName : str ) -> None : self . plugins = plugins self . groupName = groupName self . readyPlugin = None self . enabledDict = readGlobalConfig ( None , groupName + '.enable' ) self . defaultEnabled = False def judgeTrigger ( self , msg : str , data : Any ) -> bool : userId = data [ 'user_id' ] groupId = data [ 'group_id' ] if msg == '-grpcfg enable %s ' % self . groupName and userId in getGroupAdmins ( groupId ): self . readyPlugin = 'enable' return True if msg == '-grpcfg disable %s ' % self . groupName and userId in getGroupAdmins ( groupId ): self . readyPlugin = 'disable' return True if not self . queryEnabled ( groupId ): return False for plugin in self . plugins : if plugin . judgeTrigger ( msg , data ): self . readyPlugin = plugin return True return False def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: if self . readyPlugin == None : warning ( \"logic error in PluginGroupManager: executeEvent self.readyPlugin == None\" ) return None if self . readyPlugin in [ 'enable' , 'disable' ]: enabled = self . readyPlugin == 'enable' self . readyPlugin = None groupId = data [ \"group_id\" ] if self . queryEnabled ( groupId ) != enabled : writeGlobalConfig ( groupId , self . groupName + '.enable' , enabled ) self . enabledDict [ groupId ] = enabled send ( data [ 'group_id' ], \"OK\" ) return \"OK\" else : try : result = self . readyPlugin . executeEvent ( msg , data ) self . readyPlugin = None return result except Exception as e : warning ( \"logic error in PluginGroupManager: {} \" . format ( e )) return None def queryEnabled ( self , groupId : int ) -> bool : if groupId not in self . enabledDict . keys (): writeGlobalConfig ( groupId , self . groupName , { 'name' : self . groupName , 'enable' : self . defaultEnabled }) self . enabledDict [ groupId ] = self . defaultEnabled return self . enabledDict [ groupId ]","title":"\u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/helpPlugin/","text":"","title":"\u5e2e\u52a9\u63d2\u4ef6"},{"location":"plugin/plugins/jilePlugin/","text":"\u63d2\u4ef6\u7b80\u4ecb \u8fd9\u4e2a\u63d2\u4ef6\u662f\u7279\u522b\u9488\u5bf9\u4f5c\u8005\u7684\u4e24\u4e2a\u597d\u670b\u53cb \u2014\u2014 \u67f4\u795e\u548c\u5143\u795e\u6240\u5f00\u53d1\u7684\uff0c\u4ee5\u7eaa\u5ff5\u4ed6\u4eec\u5bf9\u5356\u5f31\u4e8b\u4e1a\u6240\u4f5c\u51fa\u7684\u8d21\u732e\u3002 \u4ee3\u7801\u5206\u6790 \u6b64\u4ee3\u7801\u4f4d\u4e8e jile.py class Chai_Jile ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : \u67f4\u7684QQ\u53f7 = None return ( '\u6211\u5bc4' in msg or '\u5bc4\u4e86' in msg ) and ( data [ 'user_id' ] == \u67f4\u7684QQ\u53f7 ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: send ( data [ 'group_id' ], 'patpat\u67f4[CQ:face,id=49], \u4e0d\u8981\u4f24\u5fc3\ud83d\ude18' ) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'Chai_Jile' , 'description' : '\u67f4\u5bc4\u4e86' , 'commandDescription' : '\u5bc4\u4e86' , 'usePlace' : [ 'group' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class Yuan_Jile ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : \u5143\u7684QQ\u53f7 = None \u5e94\u7528QQ\u7fa4 = None return ( '\u771f\u5f31' in msg or '\u5bc4\u4e86' in msg or '\u597d\u83dc' in msg ) and ( data [ 'user_id' ] == \u5143\u7684QQ\u53f7 ) and ( data [ 'group_id' ] == \u5e94\u7528QQ\u7fa4 ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: send ( data [ 'group_id' ], '\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05' ) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'Yuan_Jile' , 'description' : '\u5143\u5bc4\u4e86' , 'commandDescription' : '\u5bc4\u4e86' , 'usePlace' : [ 'group' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"\u5bc4\u4e86\u68c0\u6d4b"},{"location":"plugin/plugins/jilePlugin/#_1","text":"\u8fd9\u4e2a\u63d2\u4ef6\u662f\u7279\u522b\u9488\u5bf9\u4f5c\u8005\u7684\u4e24\u4e2a\u597d\u670b\u53cb \u2014\u2014 \u67f4\u795e\u548c\u5143\u795e\u6240\u5f00\u53d1\u7684\uff0c\u4ee5\u7eaa\u5ff5\u4ed6\u4eec\u5bf9\u5356\u5f31\u4e8b\u4e1a\u6240\u4f5c\u51fa\u7684\u8d21\u732e\u3002","title":"\u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/jilePlugin/#_2","text":"\u6b64\u4ee3\u7801\u4f4d\u4e8e jile.py class Chai_Jile ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : \u67f4\u7684QQ\u53f7 = None return ( '\u6211\u5bc4' in msg or '\u5bc4\u4e86' in msg ) and ( data [ 'user_id' ] == \u67f4\u7684QQ\u53f7 ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: send ( data [ 'group_id' ], 'patpat\u67f4[CQ:face,id=49], \u4e0d\u8981\u4f24\u5fc3\ud83d\ude18' ) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'Chai_Jile' , 'description' : '\u67f4\u5bc4\u4e86' , 'commandDescription' : '\u5bc4\u4e86' , 'usePlace' : [ 'group' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class Yuan_Jile ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : \u5143\u7684QQ\u53f7 = None \u5e94\u7528QQ\u7fa4 = None return ( '\u771f\u5f31' in msg or '\u5bc4\u4e86' in msg or '\u597d\u83dc' in msg ) and ( data [ 'user_id' ] == \u5143\u7684QQ\u53f7 ) and ( data [ 'group_id' ] == \u5e94\u7528QQ\u7fa4 ) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: send ( data [ 'group_id' ], '\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05\ud83d\ude05' ) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'Yuan_Jile' , 'description' : '\u5143\u5bc4\u4e86' , 'commandDescription' : '\u5bc4\u4e86' , 'usePlace' : [ 'group' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"\u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/lotteryPlugin/","text":"","title":"\u4e70\u5f69\u7968"},{"location":"plugin/plugins/messageRecorderPlugin/","text":"\u63d2\u4ef6\u7b80\u4ecb \u7fa4\u6d88\u606f\u8bb0\u5f55\u63d2\u4ef6\u80fd\u628a\u7fa4\u6d88\u606f\u8bb0\u5f55\u5230 sql \u91cc\uff0c \u4ee3\u7801\u5206\u6790 \u7fa4\u540d\u79f0\u548c\u804a\u5929\u8bb0\u5f55\u7684\u63a5\u53e3 \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e utils.basicEvent.py \u4e2d\uff0c\u4e3b\u8981\u7528\u4e8e\u5bf9\u63a5 QQ \u673a\u5668\u4eba\u540e\u7aef\uff0c\u5177\u4f53\u7ec6\u8282\u53ef\u53c2\u8003 go-cqhttp\u6587\u6863 \u3002 from utils.basicConfigs import HTTP_URL def get_group_list () -> list : \"\"\"\u83b7\u53d6\u7fa4\u804a\u5217\u8868 @return: [ { 'group_create_time': int, 'group_id': int, 'group_name': str, 'group_level': int, 'max_member_count': int, 'member_count': int, }, .... ] \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%88%97%E8%A1%A8 \"\"\" url = HTTP_URL + \"/get_group_list\" try : groupList = json . loads ( requests . get ( url ) . text ) if groupList [ 'status' ] != 'ok' : warning ( \"get_group_list requests not return ok\" ) return [] return groupList [ 'data' ] except BaseException as e : warning ( \"error in get_group_list, error: {} \" . format ( e )) return [] def get_group_msg_history ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u7fa4\u6d88\u606f\u5386\u53f2\u8bb0\u5f55 @message_seq: \u8d77\u59cb\u6d88\u606f\u5e8f\u53f7, \u53ef\u901a\u8fc7 get_msg \u83b7\u5f97 \u5982\u679c\u662fNone\u5c06\u9ed8\u8ba4\u83b7\u53d6\u6700\u65b0\u7684\u6d88\u606f @group_id: \u7fa4\u53f7 @return: \u4ece\u8d77\u59cb\u5e8f\u53f7\u5f00\u59cb\u7684\u524d19\u6761\u6d88\u606f \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%B6%88%E6%81%AF%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95 \"\"\" url = HTTP_URL + \"/get_group_msg_history\" try : params = { \"group_id\" : group_id } if message_seq != None : params [ \"message_seq\" ] = message_seq messageHistory = json . loads ( requests . get ( url , params = params ) . text ) if messageHistory [ 'status' ] != 'ok' : if messageHistory [ 'msg' ] == 'MESSAGES_API_ERROR' : print ( \"group {} meet message API error\" . format ( group_id )) else : warning ( \"get_group_msg_history requests not return ok \\n messages = {} \\n group_id= {} \\n message_seq= {} \" . format ( messageHistory , group_id , message_seq )) return [] return messageHistory [ 'data' ][ 'messages' ] except BaseException as e : warning ( 'error in get_group_msg_history, error: [}' . format ( e )) return [] \u8bb0\u5f55\u7fa4\u804a\u6d88\u606f \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e messageRecorder.py \u4e2d\uff0c\u4e3b\u8981\u7528\u6765\u8bb0\u5f55\u7fa4\u804a\u6d88\u606f class GroupMessageRecorder ( StandardPlugin ): def __init__ ( self ) -> None : # \u9996\u5148\u83b7\u53d6\u7fa4\u804a\u5217\u8868\uff0c\u770b\u770b\u6570\u636e\u5e93\u662f\u5426\u5f00\u4e86\u8fd9\u4e9b\u8868 self . mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) self . mydb . autocommit = True self . mycursor = self . mydb . cursor () self . mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`messageRecord`( `message_id` int not null, `message_seq` bigint not null, `time` timestamp not null, `user_id` bigint not null, `message` varchar(6000) not null, `group_id` bigint not null, `nickname` varchar(50) not null, `card` varchar(50) not null, `recall` bool not null default false, primary key (`group_id`, `message_seq`) )charset=utf8mb4, collate=utf8mb4_unicode_ci;\"\"\" ) # \u591a\u7ebf\u7a0b\u83b7\u53d6\u79bb\u7ebf\u671f\u95f4\u7684\u804a\u5929\u8bb0\u5f55 latestResultSeq = getLatestRecordSeq () self . _getGroupMessageThread = threading . Thread ( target = getGroupMessageThread , args = ( latestResultSeq ,)) self . _getGroupMessageThread . start () def recallMessage ( self , data ): print ( data ) try : self . mycursor . execute ( \"\"\" update `BOT_DATA`.`messageRecord` set recall=true where group_id = %d and message_id = %d \"\"\" % ( data [ 'group_id' ], data [ 'message_id' ] )) except KeyError as e : warning ( \"key error in recall message: {} \" . format ( e )) except mysql . connector . Error as e : warning ( \"mysql error in recall message: {} \" . format ( e )) except BaseException as e : warning ( \"exception in recall message: {} \" . format ( e )) def judgeTrigger ( self , msg : str , data : Any ) -> bool : return data [ 'message_type' ] == 'group' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: try : self . mycursor . execute ( \"\"\" insert into `BOT_DATA`.`messageRecord` (`message_id`, `message_seq`, `time`, `user_id`, `message`, `group_id`, `nickname`, `card`) values ( %d , %d , from_unixtime( %d ), %d , ' %s ', %d , ' %s ', ' %s ')\"\"\" % ( data [ 'message_id' ], data [ 'message_seq' ], data [ 'time' ], data [ 'user_id' ], escape_string ( data [ 'message' ]), data [ 'group_id' ], escape_string ( data [ 'sender' ][ 'nickname' ]), escape_string ( data [ 'sender' ][ 'card' ]) ) ) except mysql . connector . Error as e : warning ( \"mysql error in MessageRecorder: {} \" . format ( e )) except KeyError as e : warning ( \"key error in MessageRecorder: {} \" . format ( e )) except BaseException as e : warning ( \"exception in MessageRecorder: {} \" . format ( e )) return None def getPluginInfo ( self ) -> dict : return { 'name' : 'GroupMessageRecorder' , 'description' : '\u8bb0\u5f55\u7fa4\u804a\u6d88\u606f' , 'commandDescription' : '' , 'usePlace' : [ 'group' , 'group_recall' ], 'showInHelp' : False , 'pluginConfigTableNames' : [ 'messageRecord' , ], 'version' : '1.0.0' , 'author' : 'Unicorn' , } \u83b7\u53d6 bot \u79bb\u7ebf\u65f6\u7684\u804a\u5929\u8bb0\u5f55 \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e messageRecorder.py \u4e2d\uff0c\u4e3b\u8981\u7528\u6765\u83b7\u53d6\u548c\u5b58\u50a8bot \u79bb\u7ebf\u65f6\u7684\u804a\u5929\u8bb0\u5f55 def getLatestRecordSeq (): groupList = [ group [ 'group_id' ] for group in get_group_list ()] mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) mycursor = mydb . cursor () result = [] for group_id in groupList : if not isinstance ( group_id , int ): continue mycursor . execute ( \"\"\" select max(message_seq) from `BOT_DATA`.`messageRecord` where group_id = %d \"\"\" % group_id ) latestSeq = list ( mycursor ) if len ( latestSeq ) == 0 : latestSeq = None else : latestSeq = latestSeq [ 0 ][ 0 ] result . append (( group_id , latestSeq )) return result def getGroupMessageHistory ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u804a\u5929\u8bb0\u5f55 @group_id: \u7fa4\u53f7 @message_seq: if None: \u83b7\u53d6\u6700\u65b019\u6761\u6d88\u606f\u8bb0\u5f55 else: \u83b7\u53d6\u5305\u542b\u5de6\u5f00\u53f3\u95ed\u533a\u95f4(message_seq, latest_seq]\u7684\u6d88\u606f\u8bb0\u5f55\u5217\u8868 @return: \u6d88\u606f\u8bb0\u5f55\u5217\u8868 \"\"\" time . sleep ( 1 ) messages = get_group_msg_history ( group_id ) if message_seq == None or len ( messages ) == 0 : return messages for seq in range ( message_seq , messages [ - 1 ][ 'message_seq' ], 19 ): messages . append ( get_group_msg_history ( group_id , seq )) time . sleep ( 1 ) return messages def getGroupMessageThread ( latestResultSeq ): def flatten ( messages ): result = [] for data in messages : if isinstance ( data , list ): result . extend ( flatten ( data )) else : result . append ( data ) return result mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () for group_id , latest_seq in latestResultSeq : messages = getGroupMessageHistory ( group_id , latest_seq ) print ( \"get {} messages from group {} \" . format ( len ( messages ), group_id )) for data in flatten ( messages ): try : mycursor . execute ( \"\"\" insert ignore into `BOT_DATA`.`messageRecord` (`message_id`, `message_seq`, `time`, `user_id`, `message`, `group_id`, `nickname`, `card`) values ( %d , %d , from_unixtime( %d ), %d , ' %s ', %d , ' %s ', ' %s ')\"\"\" % ( data [ 'message_id' ], data [ 'message_seq' ], data [ 'time' ], data [ 'user_id' ], escape_string ( data [ 'message' ]), data [ 'group_id' ], escape_string ( data [ 'sender' ][ 'nickname' ]), escape_string ( data [ 'sender' ][ 'card' ]) ) ) except mysql . connector . Error as e : print ( data ) warning ( \"mysql error in getGroupMessageThread: {} \" . format ( e )) except KeyError as e : print ( data ) warning ( \"key error in getGroupMessageThread: {} \" . format ( e )) except BaseException as e : print ( data ) warning ( \"exception in getGroupMessageThread: {} \" . format ( e )) # with open(\"getGroupMessageThreadData.json\", 'w') as f: # json.dump(data, f)","title":"\u7fa4\u6d88\u606f\u8bb0\u5f55"},{"location":"plugin/plugins/messageRecorderPlugin/#_1","text":"\u7fa4\u6d88\u606f\u8bb0\u5f55\u63d2\u4ef6\u80fd\u628a\u7fa4\u6d88\u606f\u8bb0\u5f55\u5230 sql \u91cc\uff0c","title":"\u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/messageRecorderPlugin/#_2","text":"\u7fa4\u540d\u79f0\u548c\u804a\u5929\u8bb0\u5f55\u7684\u63a5\u53e3 \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e utils.basicEvent.py \u4e2d\uff0c\u4e3b\u8981\u7528\u4e8e\u5bf9\u63a5 QQ \u673a\u5668\u4eba\u540e\u7aef\uff0c\u5177\u4f53\u7ec6\u8282\u53ef\u53c2\u8003 go-cqhttp\u6587\u6863 \u3002 from utils.basicConfigs import HTTP_URL def get_group_list () -> list : \"\"\"\u83b7\u53d6\u7fa4\u804a\u5217\u8868 @return: [ { 'group_create_time': int, 'group_id': int, 'group_name': str, 'group_level': int, 'max_member_count': int, 'member_count': int, }, .... ] \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%88%97%E8%A1%A8 \"\"\" url = HTTP_URL + \"/get_group_list\" try : groupList = json . loads ( requests . get ( url ) . text ) if groupList [ 'status' ] != 'ok' : warning ( \"get_group_list requests not return ok\" ) return [] return groupList [ 'data' ] except BaseException as e : warning ( \"error in get_group_list, error: {} \" . format ( e )) return [] def get_group_msg_history ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u7fa4\u6d88\u606f\u5386\u53f2\u8bb0\u5f55 @message_seq: \u8d77\u59cb\u6d88\u606f\u5e8f\u53f7, \u53ef\u901a\u8fc7 get_msg \u83b7\u5f97 \u5982\u679c\u662fNone\u5c06\u9ed8\u8ba4\u83b7\u53d6\u6700\u65b0\u7684\u6d88\u606f @group_id: \u7fa4\u53f7 @return: \u4ece\u8d77\u59cb\u5e8f\u53f7\u5f00\u59cb\u7684\u524d19\u6761\u6d88\u606f \u53c2\u8003\u94fe\u63a5\uff1a https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%B6%88%E6%81%AF%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95 \"\"\" url = HTTP_URL + \"/get_group_msg_history\" try : params = { \"group_id\" : group_id } if message_seq != None : params [ \"message_seq\" ] = message_seq messageHistory = json . loads ( requests . get ( url , params = params ) . text ) if messageHistory [ 'status' ] != 'ok' : if messageHistory [ 'msg' ] == 'MESSAGES_API_ERROR' : print ( \"group {} meet message API error\" . format ( group_id )) else : warning ( \"get_group_msg_history requests not return ok \\n messages = {} \\n group_id= {} \\n message_seq= {} \" . format ( messageHistory , group_id , message_seq )) return [] return messageHistory [ 'data' ][ 'messages' ] except BaseException as e : warning ( 'error in get_group_msg_history, error: [}' . format ( e )) return [] \u8bb0\u5f55\u7fa4\u804a\u6d88\u606f \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e messageRecorder.py \u4e2d\uff0c\u4e3b\u8981\u7528\u6765\u8bb0\u5f55\u7fa4\u804a\u6d88\u606f class GroupMessageRecorder ( StandardPlugin ): def __init__ ( self ) -> None : # \u9996\u5148\u83b7\u53d6\u7fa4\u804a\u5217\u8868\uff0c\u770b\u770b\u6570\u636e\u5e93\u662f\u5426\u5f00\u4e86\u8fd9\u4e9b\u8868 self . mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) self . mydb . autocommit = True self . mycursor = self . mydb . cursor () self . mycursor . execute ( \"\"\" create table if not exists `BOT_DATA`.`messageRecord`( `message_id` int not null, `message_seq` bigint not null, `time` timestamp not null, `user_id` bigint not null, `message` varchar(6000) not null, `group_id` bigint not null, `nickname` varchar(50) not null, `card` varchar(50) not null, `recall` bool not null default false, primary key (`group_id`, `message_seq`) )charset=utf8mb4, collate=utf8mb4_unicode_ci;\"\"\" ) # \u591a\u7ebf\u7a0b\u83b7\u53d6\u79bb\u7ebf\u671f\u95f4\u7684\u804a\u5929\u8bb0\u5f55 latestResultSeq = getLatestRecordSeq () self . _getGroupMessageThread = threading . Thread ( target = getGroupMessageThread , args = ( latestResultSeq ,)) self . _getGroupMessageThread . start () def recallMessage ( self , data ): print ( data ) try : self . mycursor . execute ( \"\"\" update `BOT_DATA`.`messageRecord` set recall=true where group_id = %d and message_id = %d \"\"\" % ( data [ 'group_id' ], data [ 'message_id' ] )) except KeyError as e : warning ( \"key error in recall message: {} \" . format ( e )) except mysql . connector . Error as e : warning ( \"mysql error in recall message: {} \" . format ( e )) except BaseException as e : warning ( \"exception in recall message: {} \" . format ( e )) def judgeTrigger ( self , msg : str , data : Any ) -> bool : return data [ 'message_type' ] == 'group' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: try : self . mycursor . execute ( \"\"\" insert into `BOT_DATA`.`messageRecord` (`message_id`, `message_seq`, `time`, `user_id`, `message`, `group_id`, `nickname`, `card`) values ( %d , %d , from_unixtime( %d ), %d , ' %s ', %d , ' %s ', ' %s ')\"\"\" % ( data [ 'message_id' ], data [ 'message_seq' ], data [ 'time' ], data [ 'user_id' ], escape_string ( data [ 'message' ]), data [ 'group_id' ], escape_string ( data [ 'sender' ][ 'nickname' ]), escape_string ( data [ 'sender' ][ 'card' ]) ) ) except mysql . connector . Error as e : warning ( \"mysql error in MessageRecorder: {} \" . format ( e )) except KeyError as e : warning ( \"key error in MessageRecorder: {} \" . format ( e )) except BaseException as e : warning ( \"exception in MessageRecorder: {} \" . format ( e )) return None def getPluginInfo ( self ) -> dict : return { 'name' : 'GroupMessageRecorder' , 'description' : '\u8bb0\u5f55\u7fa4\u804a\u6d88\u606f' , 'commandDescription' : '' , 'usePlace' : [ 'group' , 'group_recall' ], 'showInHelp' : False , 'pluginConfigTableNames' : [ 'messageRecord' , ], 'version' : '1.0.0' , 'author' : 'Unicorn' , } \u83b7\u53d6 bot \u79bb\u7ebf\u65f6\u7684\u804a\u5929\u8bb0\u5f55 \u8fd9\u90e8\u5206\u4ee3\u7801\u4f4d\u4e8e messageRecorder.py \u4e2d\uff0c\u4e3b\u8981\u7528\u6765\u83b7\u53d6\u548c\u5b58\u50a8bot \u79bb\u7ebf\u65f6\u7684\u804a\u5929\u8bb0\u5f55 def getLatestRecordSeq (): groupList = [ group [ 'group_id' ] for group in get_group_list ()] mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) mycursor = mydb . cursor () result = [] for group_id in groupList : if not isinstance ( group_id , int ): continue mycursor . execute ( \"\"\" select max(message_seq) from `BOT_DATA`.`messageRecord` where group_id = %d \"\"\" % group_id ) latestSeq = list ( mycursor ) if len ( latestSeq ) == 0 : latestSeq = None else : latestSeq = latestSeq [ 0 ][ 0 ] result . append (( group_id , latestSeq )) return result def getGroupMessageHistory ( group_id : int , message_seq : Union [ int , None ] = None ) -> list : \"\"\"\u83b7\u53d6\u804a\u5929\u8bb0\u5f55 @group_id: \u7fa4\u53f7 @message_seq: if None: \u83b7\u53d6\u6700\u65b019\u6761\u6d88\u606f\u8bb0\u5f55 else: \u83b7\u53d6\u5305\u542b\u5de6\u5f00\u53f3\u95ed\u533a\u95f4(message_seq, latest_seq]\u7684\u6d88\u606f\u8bb0\u5f55\u5217\u8868 @return: \u6d88\u606f\u8bb0\u5f55\u5217\u8868 \"\"\" time . sleep ( 1 ) messages = get_group_msg_history ( group_id ) if message_seq == None or len ( messages ) == 0 : return messages for seq in range ( message_seq , messages [ - 1 ][ 'message_seq' ], 19 ): messages . append ( get_group_msg_history ( group_id , seq )) time . sleep ( 1 ) return messages def getGroupMessageThread ( latestResultSeq ): def flatten ( messages ): result = [] for data in messages : if isinstance ( data , list ): result . extend ( flatten ( data )) else : result . append ( data ) return result mydb = mysql . connector . connect ( charset = 'utf8mb4' , ** sqlConfig ) mydb . autocommit = True mycursor = mydb . cursor () for group_id , latest_seq in latestResultSeq : messages = getGroupMessageHistory ( group_id , latest_seq ) print ( \"get {} messages from group {} \" . format ( len ( messages ), group_id )) for data in flatten ( messages ): try : mycursor . execute ( \"\"\" insert ignore into `BOT_DATA`.`messageRecord` (`message_id`, `message_seq`, `time`, `user_id`, `message`, `group_id`, `nickname`, `card`) values ( %d , %d , from_unixtime( %d ), %d , ' %s ', %d , ' %s ', ' %s ')\"\"\" % ( data [ 'message_id' ], data [ 'message_seq' ], data [ 'time' ], data [ 'user_id' ], escape_string ( data [ 'message' ]), data [ 'group_id' ], escape_string ( data [ 'sender' ][ 'nickname' ]), escape_string ( data [ 'sender' ][ 'card' ]) ) ) except mysql . connector . Error as e : print ( data ) warning ( \"mysql error in getGroupMessageThread: {} \" . format ( e )) except KeyError as e : print ( data ) warning ( \"key error in getGroupMessageThread: {} \" . format ( e )) except BaseException as e : print ( data ) warning ( \"exception in getGroupMessageThread: {} \" . format ( e )) # with open(\"getGroupMessageThreadData.json\", 'w') as f: # json.dump(data, f)","title":"\u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/newsPlugin/","text":"1. \u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 ShowNews StandardPlugin '\u65b0\u95fb' None \u83b7\u53d6\u5f53\u65e5\u65b0\u95fb 2. \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ ShowNews ()], 'news' ), # \u65b0\u95fb # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... ShowNews (), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00news 111 > \u65b0\u95fb # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00news 111 > -grpcfg enable news bot> OK 111 > \u65b0\u95fb bot> ${ \u65b0\u95fb\u56fe\u7247 } \u56fe\u7247\u5c55\u793a\uff1a 3. \u4ee3\u7801\u5206\u6790 import requests from lxml import etree from PIL import Image , ImageDraw , ImageFont import datetime from pathlib import Path import re from typing import Union , Any from utils.basicEvent import * from utils.basicConfigs import * from utils.standardPlugin import StandardPlugin TXT_ONELINE_SIZE = 745 class ShowNews ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return ( msg in [ '\u6bcf\u65e5\u65b0\u95fb' , '\u65b0\u95fb' ]) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: ret = get_news () target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if ret == \"err 0\" : send ( target , \"\u83b7\u53d6\u5931\u8d25 \\n \u65b0\u95fb\u6e90\u5c1a\u672a\u66f4\u65b0\u672c\u65e5\u65b0\u95fb\" , data [ 'message_type' ]) else : newsPicPath = os . path . join ( ROOT_PATH , ret ) send ( target , f '[CQ:image,file=files:// { newsPicPath } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'ShowNews' , 'description' : '\u65b0\u95fb' , 'commandDescription' : '\u6bcf\u65e5\u65b0\u95fb/\u65b0\u95fb' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : '\u5317\u6781\u3065\u839c\u84dd' , } def get_news (): #\u5efa\u8bae\u662f\u751f\u6210\u56fe\u7247\u5bbd\u5ea6-\u4e24\u4fa7\u8fb9\u8ddd-\u6296\u52a8 today_str = str ( datetime . date . today ()) newsPicPath = os . path . join ( SAVE_TMP_PATH , f ' { today_str } _news.png' ) if Path ( newsPicPath ) . is_file (): #\u4eca\u65e5\u5df2\u66f4\u65b0\u5219\u8fd4\u56de return newsPicPath headers = { 'User-Agent' : 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36' } url = 'https://www.liulinblog.com/kuaixun' page_text = requests . get ( url = url , headers = headers ) . text tree = etree . HTML ( page_text ) img_url = tree . xpath ( '//div[@class=\"col-lg-12\"]//a[@target=\"_blank\"]/@href' )[ 0 ] detail_page_text = requests . get ( url = img_url , headers = headers ) . text newtree = etree . HTML ( detail_page_text ) title = newtree . xpath ( '//h1[@class=\"entry-title\"]/text()' )[ 0 ] # \u5224\u65ad\u662f\u5426\u5f53\u65e5\u66f4\u65b0 news_day = int (( re . findall ( \"\u6708(.*?)\u65e5\" , title ))[ 0 ]) if news_day != int ( datetime . date . today () . day ): return \"err 0\" news = newtree . xpath ( '//div[@class=\"entry-content u-text-format u-clearfix\"]//p/text()' ) #news[0] = title total = title for new in news [: - 1 ]: total = total + new . strip () total = total + ' \\n ' total = total . replace ( 'https://www.liulinblog.com/' , '' , 1 ) total = total . replace ( '\uff0c\u5728\u8fd9\u91cc\u6bcf\u592960\u79d2\u8bfb\u61c2\u4e16\u754c\uff01' , ' \\n ' , 1 ) return draw_news_card ( total ) def draw_news_card ( text ): today_str = str ( datetime . date . today ()) txt_line = \"\" txt_parse = [] for word in text : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d txt_parse [ - 1 ] += word continue txt_line += word if word == ' \\n ' : if txt_line != ' \\n ' : txt_parse . append ( txt_line ) txt_parse . append ( \"-sep line-\" ) txt_line = \"\" continue if font_hywh_85w_ms . getsize ( txt_line )[ 0 ] > TXT_ONELINE_SIZE : txt_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : txt_parse . append ( txt_line ) width = 880 i , j = 0 , 0 for one_line in txt_parse : if one_line == \"-sep line-\" : j += 1 continue i += 1 height = 250 + i * 45 + j * 20 img = Image . new ( 'RGBA' , ( width , height ), ( 46 , 192 , 189 , 255 )) draw = ImageDraw . Draw ( img ) draw . rectangle (( 0 , 120 , width , height ), fill = ( 255 , 255 , 255 , 255 )) draw . text (( width - 300 , 40 ), \"\u6bcf\u65e5\u65b0\u95fb\" , fill = ( 255 , 255 , 255 , 255 ), font = font_hywh_85w ) draw . text (( width - 120 , 44 ), \"LITTLE \\n UNIkeEN\" , fill = ( 255 , 255 , 255 , 255 ), font = font_syht_m ) i , j = 0 , 0 for one_line in txt_parse : if one_line == \"-sep line-\" : j += 1 continue draw . text (( 60 , 150 + i * 45 + j * 20 ), one_line , fill = ( 0 , 0 , 0 , 255 ), font = font_hywh_85w_ms ) i += 1 draw . text (( 30 , height - 78 ), '\u6765\u6e90:\u6f8e\u6e43\u3001\u4eba\u6c11\u65e5\u62a5\u3001\u817e\u8baf\u65b0\u95fb\u3001\u7f51\u6613\u65b0\u95fb\u3001\u65b0\u534e\u7f51\u3001\u4e2d\u56fd\u65b0\u95fb\u7f51' , fill = ( 175 , 175 , 175 , 255 ), font = font_syht_m ) draw . text (( 30 , height - 48 ), 'A plugin by \u5317\u6781\u3065\u839c\u84dd, made for Little-UNIkeEN-Bot' , fill = ( 175 , 175 , 175 , 255 ), font = font_syht_m ) save_path = os . path . join ( SAVE_TMP_PATH , f ' { today_str } _news.png' ) img . save ( save_path ) return save_path","title":"\u65b0\u95fb"},{"location":"plugin/plugins/newsPlugin/#1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 ShowNews StandardPlugin '\u65b0\u95fb' None \u83b7\u53d6\u5f53\u65e5\u65b0\u95fb","title":"1. \u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/newsPlugin/#2","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... PluginGroupManager ([ ShowNews ()], 'news' ), # \u65b0\u95fb # ..... ] PrivatePluginList = [ # \u79c1\u804a\u542f\u7528\u63d2\u4ef6 # ..... ShowNews (), # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00news 111 > \u65b0\u95fb # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00news 111 > -grpcfg enable news bot> OK 111 > \u65b0\u95fb bot> ${ \u65b0\u95fb\u56fe\u7247 } \u56fe\u7247\u5c55\u793a\uff1a","title":"2. \u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/newsPlugin/#3","text":"import requests from lxml import etree from PIL import Image , ImageDraw , ImageFont import datetime from pathlib import Path import re from typing import Union , Any from utils.basicEvent import * from utils.basicConfigs import * from utils.standardPlugin import StandardPlugin TXT_ONELINE_SIZE = 745 class ShowNews ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return ( msg in [ '\u6bcf\u65e5\u65b0\u95fb' , '\u65b0\u95fb' ]) def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: ret = get_news () target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] if ret == \"err 0\" : send ( target , \"\u83b7\u53d6\u5931\u8d25 \\n \u65b0\u95fb\u6e90\u5c1a\u672a\u66f4\u65b0\u672c\u65e5\u65b0\u95fb\" , data [ 'message_type' ]) else : newsPicPath = os . path . join ( ROOT_PATH , ret ) send ( target , f '[CQ:image,file=files:// { newsPicPath } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'ShowNews' , 'description' : '\u65b0\u95fb' , 'commandDescription' : '\u6bcf\u65e5\u65b0\u95fb/\u65b0\u95fb' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : '\u5317\u6781\u3065\u839c\u84dd' , } def get_news (): #\u5efa\u8bae\u662f\u751f\u6210\u56fe\u7247\u5bbd\u5ea6-\u4e24\u4fa7\u8fb9\u8ddd-\u6296\u52a8 today_str = str ( datetime . date . today ()) newsPicPath = os . path . join ( SAVE_TMP_PATH , f ' { today_str } _news.png' ) if Path ( newsPicPath ) . is_file (): #\u4eca\u65e5\u5df2\u66f4\u65b0\u5219\u8fd4\u56de return newsPicPath headers = { 'User-Agent' : 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36' } url = 'https://www.liulinblog.com/kuaixun' page_text = requests . get ( url = url , headers = headers ) . text tree = etree . HTML ( page_text ) img_url = tree . xpath ( '//div[@class=\"col-lg-12\"]//a[@target=\"_blank\"]/@href' )[ 0 ] detail_page_text = requests . get ( url = img_url , headers = headers ) . text newtree = etree . HTML ( detail_page_text ) title = newtree . xpath ( '//h1[@class=\"entry-title\"]/text()' )[ 0 ] # \u5224\u65ad\u662f\u5426\u5f53\u65e5\u66f4\u65b0 news_day = int (( re . findall ( \"\u6708(.*?)\u65e5\" , title ))[ 0 ]) if news_day != int ( datetime . date . today () . day ): return \"err 0\" news = newtree . xpath ( '//div[@class=\"entry-content u-text-format u-clearfix\"]//p/text()' ) #news[0] = title total = title for new in news [: - 1 ]: total = total + new . strip () total = total + ' \\n ' total = total . replace ( 'https://www.liulinblog.com/' , '' , 1 ) total = total . replace ( '\uff0c\u5728\u8fd9\u91cc\u6bcf\u592960\u79d2\u8bfb\u61c2\u4e16\u754c\uff01' , ' \\n ' , 1 ) return draw_news_card ( total ) def draw_news_card ( text ): today_str = str ( datetime . date . today ()) txt_line = \"\" txt_parse = [] for word in text : if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d txt_parse [ - 1 ] += word continue txt_line += word if word == ' \\n ' : if txt_line != ' \\n ' : txt_parse . append ( txt_line ) txt_parse . append ( \"-sep line-\" ) txt_line = \"\" continue if font_hywh_85w_ms . getsize ( txt_line )[ 0 ] > TXT_ONELINE_SIZE : txt_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : txt_parse . append ( txt_line ) width = 880 i , j = 0 , 0 for one_line in txt_parse : if one_line == \"-sep line-\" : j += 1 continue i += 1 height = 250 + i * 45 + j * 20 img = Image . new ( 'RGBA' , ( width , height ), ( 46 , 192 , 189 , 255 )) draw = ImageDraw . Draw ( img ) draw . rectangle (( 0 , 120 , width , height ), fill = ( 255 , 255 , 255 , 255 )) draw . text (( width - 300 , 40 ), \"\u6bcf\u65e5\u65b0\u95fb\" , fill = ( 255 , 255 , 255 , 255 ), font = font_hywh_85w ) draw . text (( width - 120 , 44 ), \"LITTLE \\n UNIkeEN\" , fill = ( 255 , 255 , 255 , 255 ), font = font_syht_m ) i , j = 0 , 0 for one_line in txt_parse : if one_line == \"-sep line-\" : j += 1 continue draw . text (( 60 , 150 + i * 45 + j * 20 ), one_line , fill = ( 0 , 0 , 0 , 255 ), font = font_hywh_85w_ms ) i += 1 draw . text (( 30 , height - 78 ), '\u6765\u6e90:\u6f8e\u6e43\u3001\u4eba\u6c11\u65e5\u62a5\u3001\u817e\u8baf\u65b0\u95fb\u3001\u7f51\u6613\u65b0\u95fb\u3001\u65b0\u534e\u7f51\u3001\u4e2d\u56fd\u65b0\u95fb\u7f51' , fill = ( 175 , 175 , 175 , 255 ), font = font_syht_m ) draw . text (( 30 , height - 48 ), 'A plugin by \u5317\u6781\u3065\u839c\u84dd, made for Little-UNIkeEN-Bot' , fill = ( 175 , 175 , 175 , 255 ), font = font_syht_m ) save_path = os . path . join ( SAVE_TMP_PATH , f ' { today_str } _news.png' ) img . save ( save_path ) return save_path","title":"3. \u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/roulettePlugin/","text":"","title":"\u8f6e\u76d8\u8d4c"},{"location":"plugin/plugins/signinPlugin/","text":"","title":"\u7b7e\u5230"},{"location":"plugin/plugins/sjtuDektPlugin/","text":"","title":"SJTU\u7b2c\u4e8c\u8bfe\u5802"},{"location":"plugin/plugins/sjtuJwcPlugin/","text":"1. \u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 JwcGroup PluginGroupManager '-jwc' None \u83b7\u53d6\u4ea4\u5927\u6559\u52a1\u5904\u4fe1\u606f 2. \u793a\u8303\u6837\u4f8b \u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... JwcGroup () # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00jwc 333 > -jwc # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00canvas 111 > -grpcfg enable jwc bot> OK # \u7528\u6237\u53d1\u9001jwc\u6307\u4ee4 222 > -jwc bot> \u30101\u30112022-09-30 2022\u5e74\u5927\u5b66\u751f\u82f1\u8bed\u7ade\u8d5b\u95f5\u884c\u6821\u533a\u8003\u751f\u9000\u8d39\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1285/11905.htm \u30102\u30112022-09-30 \u5173\u4e8e\u4e0a\u6d77\u4ea4\u901a\u5927\u5b662022\u5e74\u7acb\u9879\u6559\u6750\u8bc4\u5ba1\u7ed3\u679c\u7684\u516c\u793a https://jwc.sjtu.edu.cn/info/1257/11904.htm \u30103\u30112022-09-29 \u5173\u4e8e\u4e3e\u529e\u7b2c\u5341\u56db\u5c4a\u5168\u56fd\u5927\u5b66\u751f\u6570\u5b66\u7ade\u8d5b\u8d5b\u524d\u57f9\u8bad\u7684\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1222/11900.htm \u30104\u30112022-09-27 \u4e0a\u6d77\u4ea4\u901a\u5927\u5b662023\u5e74\u63a8\u8350\u4f18\u79c0\u5e94\u5c4a\u672c\u79d1\u6bd5\u4e1a\u751f\u514d\u8bd5\u653b\u8bfb\u7814\u7a76\u751f\u516c\u793a\u540d\u5355 https://jwc.sjtu.edu.cn/content.jsp?urltype = news.NewsContentUrl & wbtreeid = 1222 & wbnewsid = 11897 \u30105\u30112022-09-27 \u5173\u4e8e2022\u5e74\u666e\u901a\u8bdd\u6c34\u5e73\u6d4b\u8bd5\u5de5\u4f5c\u5ef6\u671f\u5230\u672c\u5b66\u671f\u4e3e\u529e\u7684\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1222/11894.htm # \u67d0\u65f6\u523bbot\u68c0\u6d4b\u5230\u6559\u52a1\u5904\u901a\u77e5\u66f4\u65b0 bot> ${ \u6559\u52a1\u5904\u901a\u77e5\u7684\u56fe\u7247 } \u56fe\u7247\u5c55\u793a\uff1a 3. \u4ee3\u7801\u5206\u6790 from utils.standardPlugin import StandardPlugin , Any , Union , PluginGroupManager from utils.responseImage import * import requests from bs4 import BeautifulSoup as BS from utils.basicEvent import * from utils.basicConfigs import * from threading import Timer from pathlib import Path import json from datetime import datetime import qrcode def getSjtuGk (): \"\"\"\u4ea4\u5927\u4fe1\u606f\u516c\u5f00\u7f51\"\"\" html = requests . get ( 'https://gk.sjtu.edu.cn' ) . text html = BS ( html , 'lxml' ) news = html . find ( class_ = 'new-ncon' ) . find_all ( 'li' ) result = [] for n in news : category = n . i . contents [ 0 ] link = n . a . get ( 'href' ) if link [ 0 ] == '/' : link = 'https://gk.sjtu.edu.cn' + link title = n . a . contents [ 0 ] result . append ({ 'category' : category , 'link' : link , 'title' : title }) return result def getSjtuNews (): \"\"\"\u4ea4\u5927\u65b0\u95fb\u7f51\"\"\" html = requests . get ( 'https://news.sjtu.edu.cn/jdyw/index.html' ) . text html = BS ( html , 'lxml' ) news = html . find ( 'div' , class_ = 'list-card-h' ) . find_all ( 'li' , class_ = 'item' ) result = [] for n in news : card = n . find ( 'a' , class_ = 'card' ) link = card . get ( 'href' ) if link [ 0 ] == '/' : link = 'https://news.sjtu.edu.cn' + link imgLink = card . find ( 'img' ) . get ( 'src' ) if imgLink [ 0 ] == '/' : imgLink = 'https://news.sjtu.edu.cn' + imgLink title = card . find ( 'p' , class_ = 'dot' ) . contents [ 0 ] detail = card . find ( 'div' , class_ = 'des dot' ) . contents [ 0 ] about = card . find ( 'div' , class_ = 'time' ) time = about . find ( 'span' ) . contents [ 0 ] source = about . find ( 'div' , class_ = 'source' ) . p . contents [ 0 ] result . append ({ 'title' : title , 'link' : link , 'imgLink' : imgLink , 'detail' : detail , 'time' : time , 'source' : source }) return result def drawSjtuNews (): a = ResponseImage ( title = '\u4ea4\u5927\u65b0\u95fb' , titleColor = PALETTE_SJTU_RED , primaryColor = PALETTE_SJTU_RED , footer = 'update at %s ' % datetime . strftime ( datetime . now (), \"%Y-%m- %d %H:%M\" ), layout = 'normal' ) for news in sorted ( getSjtuNews (), key = lambda x : x [ 'time' ], reverse = True ): a . addCard ({ 'style' : 'normal' , 'title' : news [ 'title' ], 'keyword' : news [ 'source' ] + ' ' + news [ 'time' ], 'body' : news [ 'detail' ], 'icon' : news [ 'imgLink' ] }) a . generateImage ( os . path . join ( SAVE_TMP_PATH , 'sjtu_news.png' )) def getJwc (): page = str ( requests . get ( 'https://jwc.sjtu.edu.cn/xwtg/tztg.htm' ) . content , 'utf-8' ) page = BS ( page , 'lxml' ) news = page . find ( class_ = 'Newslist' ) . ul . find_all ( class_ = 'clearfix' ) newsList = [] for n in news : sj = n . find ( class_ = 'sj' ) year , month = sj . p . contents [ 0 ] . split ( '.' ) day = sj . h2 . contents [ 0 ] content = n . find ( class_ = 'wz' ) title : str = content . h2 . contents [ 0 ] link : str = content . a . get ( 'href' ) . replace ( '..' , 'https://jwc.sjtu.edu.cn' ) detail : str = content . p . contents [ 0 ] newsList . append ({ 'year' : year , 'month' : month , 'day' : day , 'title' : title , 'detail' : detail , 'link' : link , }) return newsList class GetJwc ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg == '-jwc' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] jwc = sorted ( getJwc (), key = lambda x : ' %s - %s - %s ' % ( x [ 'year' ], x [ 'month' ], x [ 'day' ]), reverse = True ) jwcStr = \"\" idx = 1 for j in jwc [: 5 ]: jwcStr += '\u3010 %d \u3011 %s - %s - %s %s %s \\n ' % ( idx , j [ 'year' ], j [ 'month' ], j [ 'day' ], j [ 'title' ], j [ 'link' ]) idx += 1 jwcStr = jwcStr [: - 1 ] send ( target , jwcStr , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetJwc' , 'description' : '\u83b7\u53d6\u6559\u52a1\u901a\u77e5' , 'commandDescription' : '-jwc' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class GetSjtuNews ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg == '-sjtu news' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] pic_path = os . path . join ( SAVE_TMP_PATH , 'sjtu_news.png' ) if not Path ( pic_path ) . is_file (): drawSjtuNews () send ( target , f '[CQ:image,file=files:/// { ROOT_PATH } / { pic_path } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetSjtuNews' , 'description' : '\u83b7\u53d6\u4ea4\u5927\u65b0\u95fb\u7f51' , 'commandDescription' : '-sjtu news' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'fangtiancheng' , } class JwcGroup ( PluginGroupManager ): def __init__ ( self ,): super () . __init__ ([ GetJwc (), GetSjtuNews ()], 'jwc' ) self . checkTimer = Timer ( 20 , self . updateAndCheck ) self . checkTimer . start () def updateAndCheck ( self , ): self . checkTimer . cancel () self . checkTimer = Timer ( 180 , self . updateAndCheck ) self . checkTimer . start () drawSjtuNews () noticelist = getJwc () exact_path = ( f 'data/jwc.json' ) if not Path ( exact_path ) . is_file (): Path ( exact_path ) . write_text ( r '[]' ) url_list = json . load ( open ( exact_path , 'r' )) for j in noticelist : if j [ 'link' ] not in url_list : url_list . append ( j [ 'link' ]) for group_id in APPLY_GROUP_ID : if self . queryEnabled ( group_id ): pic = DrawNoticePIC ( j ) send ( group_id , '\u5df2\u53d1\u73b0\u6559\u52a1\u901a\u77e5\u66f4\u65b0: \\n \u3010' + j [ 'title' ] + '\u3011 \\n ' + j [ 'link' ]) send ( group_id , f '[CQ:image,file=files:/// { ROOT_PATH } / { pic } ,id=40000]' ) with open ( exact_path , 'w' ) as f : json . dump ( url_list , f , indent = 4 ) def DrawNoticePIC ( notice ) -> str : width = 720 txt_line = \"\" txt_parse , title_parse = [], [] for word in notice [ 'title' ]: if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d title_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_24 . getsize ( txt_line )[ 0 ] > width - 180 : title_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : title_parse . append ( txt_line ) txt_line = \"\" for word in notice [ 'detail' ] . strip (): if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d txt_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_18 . getsize ( txt_line )[ 0 ] > width - 240 : txt_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : txt_parse . append ( txt_line ) if txt_parse [ - 1 ][ - 1 ] != '.' : txt_parse [ - 1 ] += '...' height = 525 + len ( txt_parse ) * 27 + len ( title_parse ) * 33 img , draw , h = init_image_template ( '\u6559\u52a1\u901a\u77e5\u00b7\u66f4\u65b0\u63d0\u9192' , width , height , ( 167 , 32 , 56 , 255 )) h += 130 l = 60 img = draw_rounded_rectangle ( img , 60 , h , width - 60 , height - 90 , ( 255 , 255 , 255 , 255 )) txt_size = draw . textsize ( notice [ 'title' ], font = font_syhtmed_24 ) for line in title_parse : txt_size = draw . textsize ( line , font = font_syhtmed_24 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 33 ), line , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_24 ) h += 33 # draw.text(((width-txt_size[0])/2,h+30),notice['title'], fill=(0,0,0,255),font = font_syhtmed_24) # h+=(30+txt_size[1]) h += 5 time_txt = ' %s - %s - %s ' % ( notice [ 'year' ], notice [ 'month' ], notice [ 'day' ]) txt_size = draw . textsize ( time_txt , font = font_syhtmed_18 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 30 ), time_txt , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) h += ( 30 + txt_size [ 1 ]) for line in txt_parse : txt_size = draw . textsize ( line , font = font_syhtmed_18 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 27 ), line , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) h += 27 qrc = qrcode . QRCode ( version = 3 , error_correction = qrcode . constants . ERROR_CORRECT_Q , box_size = 15 , border = 4 , ) qrc . add_data ( notice [ 'link' ]) qrc . make ( fit = True ) imgqrc = qrc . make_image () . resize (( 180 , 180 )) img . paste ( imgqrc , (( width - 180 ) // 2 , h + 30 )) save_path = os . path . join ( SAVE_TMP_PATH , 'jwc_notice.png' ) img . save ( save_path ) return save_path","title":"SJTU\u6559\u52a1"},{"location":"plugin/plugins/sjtuJwcPlugin/#1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 JwcGroup PluginGroupManager '-jwc' None \u83b7\u53d6\u4ea4\u5927\u6559\u52a1\u5904\u4fe1\u606f","title":"1. \u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/sjtuJwcPlugin/#2","text":"\u4ee3\u7801\u90e8\u5206\uff1a ROOT_ADMIN_ID = [ 111 , # \u7528\u6237A 222 , # \u7528\u6237B 444 ] # \u7528\u6237D GroupPluginList = [ # \u7fa4\u804a\u542f\u7528\u63d2\u4ef6 # ..... JwcGroup () # ..... ] \u7fa4\u804a\u90e8\u5206\uff1a # \u7fa4\u5185\u5c1a\u672a\u6253\u5f00jwc 333 > -jwc # \u65e0\u4e8b\u53d1\u751f # \u63a5\u4e0b\u6765\u7ba1\u7406\u5458\u6253\u5f00canvas 111 > -grpcfg enable jwc bot> OK # \u7528\u6237\u53d1\u9001jwc\u6307\u4ee4 222 > -jwc bot> \u30101\u30112022-09-30 2022\u5e74\u5927\u5b66\u751f\u82f1\u8bed\u7ade\u8d5b\u95f5\u884c\u6821\u533a\u8003\u751f\u9000\u8d39\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1285/11905.htm \u30102\u30112022-09-30 \u5173\u4e8e\u4e0a\u6d77\u4ea4\u901a\u5927\u5b662022\u5e74\u7acb\u9879\u6559\u6750\u8bc4\u5ba1\u7ed3\u679c\u7684\u516c\u793a https://jwc.sjtu.edu.cn/info/1257/11904.htm \u30103\u30112022-09-29 \u5173\u4e8e\u4e3e\u529e\u7b2c\u5341\u56db\u5c4a\u5168\u56fd\u5927\u5b66\u751f\u6570\u5b66\u7ade\u8d5b\u8d5b\u524d\u57f9\u8bad\u7684\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1222/11900.htm \u30104\u30112022-09-27 \u4e0a\u6d77\u4ea4\u901a\u5927\u5b662023\u5e74\u63a8\u8350\u4f18\u79c0\u5e94\u5c4a\u672c\u79d1\u6bd5\u4e1a\u751f\u514d\u8bd5\u653b\u8bfb\u7814\u7a76\u751f\u516c\u793a\u540d\u5355 https://jwc.sjtu.edu.cn/content.jsp?urltype = news.NewsContentUrl & wbtreeid = 1222 & wbnewsid = 11897 \u30105\u30112022-09-27 \u5173\u4e8e2022\u5e74\u666e\u901a\u8bdd\u6c34\u5e73\u6d4b\u8bd5\u5de5\u4f5c\u5ef6\u671f\u5230\u672c\u5b66\u671f\u4e3e\u529e\u7684\u901a\u77e5 https://jwc.sjtu.edu.cn/info/1222/11894.htm # \u67d0\u65f6\u523bbot\u68c0\u6d4b\u5230\u6559\u52a1\u5904\u901a\u77e5\u66f4\u65b0 bot> ${ \u6559\u52a1\u5904\u901a\u77e5\u7684\u56fe\u7247 } \u56fe\u7247\u5c55\u793a\uff1a","title":"2. \u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/sjtuJwcPlugin/#3","text":"from utils.standardPlugin import StandardPlugin , Any , Union , PluginGroupManager from utils.responseImage import * import requests from bs4 import BeautifulSoup as BS from utils.basicEvent import * from utils.basicConfigs import * from threading import Timer from pathlib import Path import json from datetime import datetime import qrcode def getSjtuGk (): \"\"\"\u4ea4\u5927\u4fe1\u606f\u516c\u5f00\u7f51\"\"\" html = requests . get ( 'https://gk.sjtu.edu.cn' ) . text html = BS ( html , 'lxml' ) news = html . find ( class_ = 'new-ncon' ) . find_all ( 'li' ) result = [] for n in news : category = n . i . contents [ 0 ] link = n . a . get ( 'href' ) if link [ 0 ] == '/' : link = 'https://gk.sjtu.edu.cn' + link title = n . a . contents [ 0 ] result . append ({ 'category' : category , 'link' : link , 'title' : title }) return result def getSjtuNews (): \"\"\"\u4ea4\u5927\u65b0\u95fb\u7f51\"\"\" html = requests . get ( 'https://news.sjtu.edu.cn/jdyw/index.html' ) . text html = BS ( html , 'lxml' ) news = html . find ( 'div' , class_ = 'list-card-h' ) . find_all ( 'li' , class_ = 'item' ) result = [] for n in news : card = n . find ( 'a' , class_ = 'card' ) link = card . get ( 'href' ) if link [ 0 ] == '/' : link = 'https://news.sjtu.edu.cn' + link imgLink = card . find ( 'img' ) . get ( 'src' ) if imgLink [ 0 ] == '/' : imgLink = 'https://news.sjtu.edu.cn' + imgLink title = card . find ( 'p' , class_ = 'dot' ) . contents [ 0 ] detail = card . find ( 'div' , class_ = 'des dot' ) . contents [ 0 ] about = card . find ( 'div' , class_ = 'time' ) time = about . find ( 'span' ) . contents [ 0 ] source = about . find ( 'div' , class_ = 'source' ) . p . contents [ 0 ] result . append ({ 'title' : title , 'link' : link , 'imgLink' : imgLink , 'detail' : detail , 'time' : time , 'source' : source }) return result def drawSjtuNews (): a = ResponseImage ( title = '\u4ea4\u5927\u65b0\u95fb' , titleColor = PALETTE_SJTU_RED , primaryColor = PALETTE_SJTU_RED , footer = 'update at %s ' % datetime . strftime ( datetime . now (), \"%Y-%m- %d %H:%M\" ), layout = 'normal' ) for news in sorted ( getSjtuNews (), key = lambda x : x [ 'time' ], reverse = True ): a . addCard ({ 'style' : 'normal' , 'title' : news [ 'title' ], 'keyword' : news [ 'source' ] + ' ' + news [ 'time' ], 'body' : news [ 'detail' ], 'icon' : news [ 'imgLink' ] }) a . generateImage ( os . path . join ( SAVE_TMP_PATH , 'sjtu_news.png' )) def getJwc (): page = str ( requests . get ( 'https://jwc.sjtu.edu.cn/xwtg/tztg.htm' ) . content , 'utf-8' ) page = BS ( page , 'lxml' ) news = page . find ( class_ = 'Newslist' ) . ul . find_all ( class_ = 'clearfix' ) newsList = [] for n in news : sj = n . find ( class_ = 'sj' ) year , month = sj . p . contents [ 0 ] . split ( '.' ) day = sj . h2 . contents [ 0 ] content = n . find ( class_ = 'wz' ) title : str = content . h2 . contents [ 0 ] link : str = content . a . get ( 'href' ) . replace ( '..' , 'https://jwc.sjtu.edu.cn' ) detail : str = content . p . contents [ 0 ] newsList . append ({ 'year' : year , 'month' : month , 'day' : day , 'title' : title , 'detail' : detail , 'link' : link , }) return newsList class GetJwc ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg == '-jwc' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] jwc = sorted ( getJwc (), key = lambda x : ' %s - %s - %s ' % ( x [ 'year' ], x [ 'month' ], x [ 'day' ]), reverse = True ) jwcStr = \"\" idx = 1 for j in jwc [: 5 ]: jwcStr += '\u3010 %d \u3011 %s - %s - %s %s %s \\n ' % ( idx , j [ 'year' ], j [ 'month' ], j [ 'day' ], j [ 'title' ], j [ 'link' ]) idx += 1 jwcStr = jwcStr [: - 1 ] send ( target , jwcStr , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetJwc' , 'description' : '\u83b7\u53d6\u6559\u52a1\u901a\u77e5' , 'commandDescription' : '-jwc' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class GetSjtuNews ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg == '-sjtu news' def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] pic_path = os . path . join ( SAVE_TMP_PATH , 'sjtu_news.png' ) if not Path ( pic_path ) . is_file (): drawSjtuNews () send ( target , f '[CQ:image,file=files:/// { ROOT_PATH } / { pic_path } ,id=40000]' , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> Any : return { 'name' : 'GetSjtuNews' , 'description' : '\u83b7\u53d6\u4ea4\u5927\u65b0\u95fb\u7f51' , 'commandDescription' : '-sjtu news' , 'usePlace' : [ 'group' , 'private' , ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'fangtiancheng' , } class JwcGroup ( PluginGroupManager ): def __init__ ( self ,): super () . __init__ ([ GetJwc (), GetSjtuNews ()], 'jwc' ) self . checkTimer = Timer ( 20 , self . updateAndCheck ) self . checkTimer . start () def updateAndCheck ( self , ): self . checkTimer . cancel () self . checkTimer = Timer ( 180 , self . updateAndCheck ) self . checkTimer . start () drawSjtuNews () noticelist = getJwc () exact_path = ( f 'data/jwc.json' ) if not Path ( exact_path ) . is_file (): Path ( exact_path ) . write_text ( r '[]' ) url_list = json . load ( open ( exact_path , 'r' )) for j in noticelist : if j [ 'link' ] not in url_list : url_list . append ( j [ 'link' ]) for group_id in APPLY_GROUP_ID : if self . queryEnabled ( group_id ): pic = DrawNoticePIC ( j ) send ( group_id , '\u5df2\u53d1\u73b0\u6559\u52a1\u901a\u77e5\u66f4\u65b0: \\n \u3010' + j [ 'title' ] + '\u3011 \\n ' + j [ 'link' ]) send ( group_id , f '[CQ:image,file=files:/// { ROOT_PATH } / { pic } ,id=40000]' ) with open ( exact_path , 'w' ) as f : json . dump ( url_list , f , indent = 4 ) def DrawNoticePIC ( notice ) -> str : width = 720 txt_line = \"\" txt_parse , title_parse = [], [] for word in notice [ 'title' ]: if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d title_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_24 . getsize ( txt_line )[ 0 ] > width - 180 : title_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : title_parse . append ( txt_line ) txt_line = \"\" for word in notice [ 'detail' ] . strip (): if txt_line == \"\" and word in [ '\uff0c' , '\uff1b' , '\u3002' , '\u3001' , '\"' , '\uff1a' , '.' , '\u201d' ]: #\u907f\u514d\u6807\u70b9\u7b26\u53f7\u5728\u9996\u4f4d txt_parse [ - 1 ] += word continue txt_line += word if font_syhtmed_18 . getsize ( txt_line )[ 0 ] > width - 240 : txt_parse . append ( txt_line ) txt_line = \"\" if txt_line != \"\" : txt_parse . append ( txt_line ) if txt_parse [ - 1 ][ - 1 ] != '.' : txt_parse [ - 1 ] += '...' height = 525 + len ( txt_parse ) * 27 + len ( title_parse ) * 33 img , draw , h = init_image_template ( '\u6559\u52a1\u901a\u77e5\u00b7\u66f4\u65b0\u63d0\u9192' , width , height , ( 167 , 32 , 56 , 255 )) h += 130 l = 60 img = draw_rounded_rectangle ( img , 60 , h , width - 60 , height - 90 , ( 255 , 255 , 255 , 255 )) txt_size = draw . textsize ( notice [ 'title' ], font = font_syhtmed_24 ) for line in title_parse : txt_size = draw . textsize ( line , font = font_syhtmed_24 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 33 ), line , fill = ( 0 , 0 , 0 , 255 ), font = font_syhtmed_24 ) h += 33 # draw.text(((width-txt_size[0])/2,h+30),notice['title'], fill=(0,0,0,255),font = font_syhtmed_24) # h+=(30+txt_size[1]) h += 5 time_txt = ' %s - %s - %s ' % ( notice [ 'year' ], notice [ 'month' ], notice [ 'day' ]) txt_size = draw . textsize ( time_txt , font = font_syhtmed_18 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 30 ), time_txt , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) h += ( 30 + txt_size [ 1 ]) for line in txt_parse : txt_size = draw . textsize ( line , font = font_syhtmed_18 ) draw . text ((( width - txt_size [ 0 ]) / 2 , h + 27 ), line , fill = ( 115 , 115 , 115 , 255 ), font = font_syhtmed_18 ) h += 27 qrc = qrcode . QRCode ( version = 3 , error_correction = qrcode . constants . ERROR_CORRECT_Q , box_size = 15 , border = 4 , ) qrc . add_data ( notice [ 'link' ]) qrc . make ( fit = True ) imgqrc = qrc . make_image () . resize (( 180 , 180 )) img . paste ( imgqrc , (( width - 180 ) // 2 , h + 30 )) save_path = os . path . join ( SAVE_TMP_PATH , 'jwc_notice.png' ) img . save ( save_path ) return save_path","title":"3. \u4ee3\u7801\u5206\u6790"},{"location":"plugin/plugins/sjtuNewsPlugin/","text":"","title":"SJTU\u65b0\u95fb"},{"location":"plugin/plugins/stocksPlugin/","text":"","title":"\u6a21\u62df\u7092\u80a1"},{"location":"plugin/plugins/superEmojiPlugin/","text":"1. \u63d2\u4ef6\u7b80\u4ecb \u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 FireworksFace StandardPlugin '\u70df\u82b1' / '\u653e\u4e2a\u70df\u82b1' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u70df\u82b1 FirecrackersFace StandardPlugin '\u97ad\u70ae' / '\u70b9\u4e2a\u97ad\u70ae' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u97ad\u70ae BasketballFace StandardPlugin '\u7bee\u7403' / '\u6295\u4e2a\u7bee\u7403' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403 HotFace StandardPlugin '\u597d\u70ed' / '\u70ed\u6b7b\u4e86' / '\u592a\u70ed\u4e86' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u70ed\u5316\u4e86 2. \u793a\u8303\u6837\u4f8b 111 > \u70df\u82b1 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u70df\u82b1\u3011 222 > \u70b9\u4e2a\u97ad\u70ae bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u97ad\u70ae\u3011 333 > \u6295\u4e2a\u7bee\u7403 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403\u3011 444 > \u70ed\u6b7b\u4e86 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u70ed\u5316\u4e86\u3011 3. \u4ee3\u7801\u5206\u6790 from typing import Union , Any from utils.basicEvent import * from utils.standardPlugin import StandardPlugin class FireworksFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u653e\u4e2a\u70df\u82b1' , '\u70df\u82b1' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=333,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FireworksFace' , 'description' : '\u70df\u82b1' , 'commandDescription' : '\u653e\u4e2a\u70df\u82b1/\u70df\u82b1' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class FirecrackersFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u70b9\u4e2a\u97ad\u70ae' , '\u97ad\u70ae' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=137,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FirecrackersFace' , 'description' : '\u97ad\u70ae' , 'commandDescription' : '\u70b9\u4e2a\u97ad\u70ae/\u97ad\u70ae' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class BasketballFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u6295\u4e2a\u7bee\u7403' , '\u6295\u7bee' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=114,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'BasketballFace' , 'description' : '\u6295\u7bee' , 'commandDescription' : '\u6295\u4e2a\u7bee\u7403/\u6295\u7bee' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class HotFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u70ed\u6b7b\u4e86' , '\u597d\u70ed' , '\u592a\u70ed\u4e86' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=340,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'HotFace' , 'description' : '\u70ed\u5316\u4e86' , 'commandDescription' : '\u70ed\u6b7b\u4e86/\u597d\u70ed/\u592a\u70ed\u4e86' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"\u8d85\u7ea7\u8868\u60c5"},{"location":"plugin/plugins/superEmojiPlugin/#1","text":"\u63d2\u4ef6\u540d\u79f0 \u7236\u7c7b \u89e6\u53d1\u5173\u952e\u8bcd \u89e6\u53d1\u6743\u9650 \u5185\u5bb9 FireworksFace StandardPlugin '\u70df\u82b1' / '\u653e\u4e2a\u70df\u82b1' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u70df\u82b1 FirecrackersFace StandardPlugin '\u97ad\u70ae' / '\u70b9\u4e2a\u97ad\u70ae' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u97ad\u70ae BasketballFace StandardPlugin '\u7bee\u7403' / '\u6295\u4e2a\u7bee\u7403' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403 HotFace StandardPlugin '\u597d\u70ed' / '\u70ed\u6b7b\u4e86' / '\u592a\u70ed\u4e86' None \u53d1\u9001\u8d85\u7ea7\u8868\u60c5\uff1a\u70ed\u5316\u4e86","title":"1. \u63d2\u4ef6\u7b80\u4ecb"},{"location":"plugin/plugins/superEmojiPlugin/#2","text":"111 > \u70df\u82b1 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u70df\u82b1\u3011 222 > \u70b9\u4e2a\u97ad\u70ae bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u97ad\u70ae\u3011 333 > \u6295\u4e2a\u7bee\u7403 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u7bee\u7403\u3011 444 > \u70ed\u6b7b\u4e86 bot> \u3010\u8d85\u7ea7\u8868\u60c5\uff1a\u70ed\u5316\u4e86\u3011","title":"2. \u793a\u8303\u6837\u4f8b"},{"location":"plugin/plugins/superEmojiPlugin/#3","text":"from typing import Union , Any from utils.basicEvent import * from utils.standardPlugin import StandardPlugin class FireworksFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u653e\u4e2a\u70df\u82b1' , '\u70df\u82b1' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=333,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FireworksFace' , 'description' : '\u70df\u82b1' , 'commandDescription' : '\u653e\u4e2a\u70df\u82b1/\u70df\u82b1' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class FirecrackersFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u70b9\u4e2a\u97ad\u70ae' , '\u97ad\u70ae' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=137,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'FirecrackersFace' , 'description' : '\u97ad\u70ae' , 'commandDescription' : '\u70b9\u4e2a\u97ad\u70ae/\u97ad\u70ae' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class BasketballFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u6295\u4e2a\u7bee\u7403' , '\u6295\u7bee' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=114,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'BasketballFace' , 'description' : '\u6295\u7bee' , 'commandDescription' : '\u6295\u4e2a\u7bee\u7403/\u6295\u7bee' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , } class HotFace ( StandardPlugin ): def judgeTrigger ( self , msg : str , data : Any ) -> bool : return msg in [ '\u70ed\u6b7b\u4e86' , '\u597d\u70ed' , '\u592a\u70ed\u4e86' ] def executeEvent ( self , msg : str , data : Any ) -> Union [ None , str ]: target = data [ 'group_id' ] if data [ 'message_type' ] == 'group' else data [ 'user_id' ] send ( target , \"[CQ:face,id=340,type=sticker]\" , data [ 'message_type' ]) return \"OK\" def getPluginInfo ( self , ) -> dict : return { 'name' : 'HotFace' , 'description' : '\u70ed\u5316\u4e86' , 'commandDescription' : '\u70ed\u6b7b\u4e86/\u597d\u70ed/\u592a\u70ed\u4e86' , 'usePlace' : [ 'group' , 'private' ], 'showInHelp' : True , 'pluginConfigTableNames' : [], 'version' : '1.0.0' , 'author' : 'Unicorn' , }","title":"3. \u4ee3\u7801\u5206\u6790"}]}